<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/liudalogometal.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/liudalogometal.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/liudalogometal.png">
  <link rel="mask-icon" href="/images/liudalogometal.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ncepuee.github.io","root":"/","images":"/images","scheme":"Pisces","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script>
<meta name="description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
<meta property="og:type" content="website">
<meta property="og:title" content="School boy">
<meta property="og:url" content="http://ncepuee.github.io/index.html">
<meta property="og:site_name" content="School boy">
<meta property="og:description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="èœèœçš„é»„">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://ncepuee.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>School boy</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">School boy</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸å¦„åŠ¨ï¼Œä¸æ»¥è¨€ï¼Œä¸è‹Ÿæ±‚ï¼Œä¸è™šè¡Œ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="èœèœçš„é»„"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">èœèœçš„é»„</p>
  <div class="site-description" itemprop="description">è®°å½•ç§‘ç ”ç”Ÿæ´»</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ncepuee" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;ncepuee" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/ncepuee" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;ncepuee" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://ncepuee.github.io/2021/09/05/20210830-0905/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="èœèœçš„é»„">
      <meta itemprop="description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="School boy">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/05/20210830-0905/" class="post-title-link" itemprop="url">20210830-0905å‘¨æŠ¥</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-05 08:00:00" itemprop="dateCreated datePublished" datetime="2021-09-05T08:00:00+08:00">2021-09-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="æ¯å‘¨éŸ³ä¹ğŸµ"><a href="#æ¯å‘¨éŸ³ä¹ğŸµ" class="headerlink" title="æ¯å‘¨éŸ³ä¹ğŸµ"></a>æ¯å‘¨éŸ³ä¹ğŸµ</h2><iframe frameborder="0" height="80" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" src="//music.163.com/outchain/player?type=2&id=461347998&auto=1&height=66"></iframe>

<h2 id="è¿åŠ¨æ­Œå•ğŸƒâ€"><a href="#è¿åŠ¨æ­Œå•ğŸƒâ€" class="headerlink" title="è¿åŠ¨æ­Œå•ğŸƒâ€"></a>è¿åŠ¨æ­Œå•ğŸƒâ€</h2><p>é€‚åˆè·‘æ­¥è¿åŠ¨çš„æ­Œå•ï¼ˆï£¿Musicï¼‰</p>
<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/cn/playlist/running-fitness-sports/pl.u-Ldbqel5u27kmjlm"></iframe>

<h2 id="å­¦ä¹ è¿›å±•âœ"><a href="#å­¦ä¹ è¿›å±•âœ" class="headerlink" title="å­¦ä¹ è¿›å±•âœ"></a>å­¦ä¹ è¿›å±•âœ</h2><h3 id="æ˜ŸæœŸä¸€"><a href="#æ˜ŸæœŸä¸€" class="headerlink" title="æ˜ŸæœŸä¸€"></a>æ˜ŸæœŸä¸€</h3><p>æ™®ä¸­ç§‘æŠ€Bç«™è§†é¢‘çš„ç¬¬å…­è®²å·¥ç¨‹æ¨¡ç‰ˆçš„åˆ›å»ºï¼Œä¸€ä¸ªå®Œæ•´çš„åŸºç¡€å·¥ç¨‹æœ‰å“ªäº›æ–‡ä»¶æ‰€æ„æˆï¼Ÿ</p>
<p>1ã€é¦–å…ˆéœ€è¦ä»¿çœŸè°ƒè¯•æˆ–è€…flashçƒ§å†™æ‰€éœ€çš„.cmdæ–‡ä»¶å’ŒDSPçš„nonBIOS.cmdæ–‡ä»¶ã€‚</p>
<p>2ã€å…¶æ¬¡éœ€è¦æˆ‘ä»¬ä½¿ç”¨çš„èŠ¯ç‰‡çš„.ccxmlç›®æ ‡é…ç½®æ–‡ä»¶ã€‚</p>
<p>3ã€èŠ¯ç‰‡å†…æ ¸åŠå¤–è®¾.cæºæ–‡ä»¶ï¼Œæ¯”å¦‚DSP2833x_Gpio.cç­‰</p>
<p>4ã€èŠ¯ç‰‡å†…æ ¸åŠå¤–è®¾.hå¤´æ–‡ä»¶ï¼Œæ¯”å¦‚DSP2833x_Gpio.hç­‰</p>
<p>5ã€DSP .libåº“æ–‡ä»¶ï¼Œå¸¸ç”¨çš„å¦‚IQmath.libç­‰ã€‚</p>
<p>å‘ç°æ‰‹æŠŠæ‰‹ç¬¬86é¡µæœ‰ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//HISPCP/LOSPCP prescale register settings, normally it will be set to default values</span></span><br><span class="line">SysCtrlRegs.HISPCP.all = <span class="number">0x0001</span>;</span><br><span class="line">SysCtrlRegs.LOSPCP.all = <span class="number">0x0002</span>;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://tva1.sinaimg.cn/large/0084Tjdoly1gu4w6r5n0uj60wb0nftlm02.jpg" alt="image"></p>
<p>é«˜é€Ÿå¤–è®¾æ—¶é’Ÿé¢‘ç‡æ˜¯å¯¹ç³»ç»Ÿé¢‘ç‡è¿›è¡Œ2åˆ†é¢‘ï¼Œå³ä¸º150/2=75MHzï¼›åŒç†ï¼Œå¯ä»¥æ±‚å¾—ä½é€Ÿå¤–è®¾æ—¶é’Ÿé¢‘ç‡ä¸º37.5MHzï¼›</p>
<h3 id="å¯¹ç³»ç»Ÿæ—¶é’Ÿçš„ç†è§£"><a href="#å¯¹ç³»ç»Ÿæ—¶é’Ÿçš„ç†è§£" class="headerlink" title="å¯¹ç³»ç»Ÿæ—¶é’Ÿçš„ç†è§£"></a>å¯¹ç³»ç»Ÿæ—¶é’Ÿçš„ç†è§£</h3><p>æ‰€è°“PLLç”µè·¯ï¼Œå°±æ˜¯é”ç›¸ç¯ç”µè·¯(Phase-Locked Loop)ã€‚ç”µè·¯é€šè¿‡æ¯”è¾ƒå¤æ‚çš„åŸç†å¯ä»¥å°†ä½é¢‘ä¿¡å·è¿›è¡Œå€é¢‘ä¸åˆ†é¢‘å¤„ç†ã€‚F28335çš„å·¥ä½œæœ€é«˜é¢‘ç‡ä¸º150MHzï¼Œè€Œä¸€èˆ¬åœ¨ç”µè·¯è®¾è®¡ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨çš„æ™¶æŒ¯é¢‘ç‡ä¸º30MHzã€‚ä¹‹æ‰€ä»¥ä¸ç›´æ¥é‡‡ç”¨150MHzæ™¶æŒ¯ï¼Œä¸€æ–¹é¢æ˜¯ä»·æ ¼é«˜æ˜‚ï¼Œå¦ä¸€æ–¹é¢è¿˜è¦å¯¹ç”µè·¯åšEMIå¤„ç†ã€‚<strong>å› æ­¤ï¼Œä¸ºäº†è®©DSPèƒ½å¤Ÿå·¥ä½œåœ¨æœ€é«˜é¢‘ç‡ï¼Œéœ€è¦å¯¹æ™¶æŒ¯ä¿¡å·é¢‘ç‡è¿›è¡Œ5å€é¢‘å¤„ç†ã€‚é€šå¸¸é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯é€šè¿‡PLLç”µè·¯å…ˆè¿›è¡Œ10å€é¢‘å¤„ç†ï¼Œå†2åˆ†é¢‘å¤„ç†ã€‚</strong></p>
<p>é€šå¸¸ç”¨PLLæ¥äº§ç”Ÿå€é¢‘ï¼Œå€é¢‘æœ‰2ã€4ã€6ã€8ã€10è¿™å‡ ä¸ªç­‰çº§ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦è®©CPUè¿è¡Œåœ¨150MHzï¼Œé€šå¸¸é€‰ç”¨çš„å€é¢‘æ˜¯10ï¼Œè¿™æ ·é€šè¿‡PLLå‡ºæ¥çš„VCOCLKçš„é¢‘ç‡ä¸º300MHzï¼Œä½†æ˜¯ä¸èƒ½è®©300MHzç›´æ¥è¿›å…¥CPUï¼Œè€Œæ˜¯è¦å¯¹å…¶å†è¿›è¡Œåˆ†é¢‘ï¼ŒPLLSTS.DIVSELè®¾ç½®ä¸º2åˆ†é¢‘ï¼Œè¿™æ ·CLKINå°±æ˜¯150MHzï¼Œå³ç³»ç»Ÿçš„æ—¶é’Ÿé¢‘ç‡ä¸º150MHzã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitPll</span><span class="params">(Uint16 val, Uint16 divsel)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Make sure the PLL is not running in limp mode</span></span><br><span class="line">   <span class="keyword">if</span> (SysCtrlRegs.PLLSTS.bit.MCLKSTS != <span class="number">0</span>)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="comment">// Missing external clock has been detected</span></span><br><span class="line">      <span class="comment">// Replace this line with a call to an appropriate</span></span><br><span class="line">      <span class="comment">// SystemShutdown(); function.</span></span><br><span class="line">      <span class="keyword">asm</span>(<span class="string">&quot;        ESTOP0&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// DIVSEL MUST be 0 before PLLCR can be changed from</span></span><br><span class="line">   <span class="comment">// 0x0000. It is set to 0 by an external reset XRSn</span></span><br><span class="line">   <span class="comment">// This puts us in 1/4</span></span><br><span class="line">   <span class="keyword">if</span> (SysCtrlRegs.PLLSTS.bit.DIVSEL != <span class="number">0</span>)</span><br><span class="line">   &#123;</span><br><span class="line">       EALLOW;</span><br><span class="line">       SysCtrlRegs.PLLSTS.bit.DIVSEL = <span class="number">0</span>;</span><br><span class="line">       EDIS;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Change the PLLCR</span></span><br><span class="line">   <span class="keyword">if</span> (SysCtrlRegs.PLLCR.bit.DIV != val)</span><br><span class="line">   &#123;</span><br><span class="line"></span><br><span class="line">      EALLOW;</span><br><span class="line">      <span class="comment">// Before setting PLLCR turn off missing clock detect logic</span></span><br><span class="line">      SysCtrlRegs.PLLSTS.bit.MCLKOFF = <span class="number">1</span>;</span><br><span class="line">      SysCtrlRegs.PLLCR.bit.DIV = val;</span><br><span class="line">      EDIS;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Optional: Wait for PLL to lock.</span></span><br><span class="line">      <span class="comment">// During this time the CPU will switch to OSCCLK/2 until</span></span><br><span class="line">      <span class="comment">// the PLL is stable.  Once the PLL is stable the CPU will</span></span><br><span class="line">      <span class="comment">// switch to the new PLL value.</span></span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">      <span class="comment">// This time-to-lock is monitored by a PLL lock counter.</span></span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">      <span class="comment">// Code is not required to sit and wait for the PLL to lock.</span></span><br><span class="line">      <span class="comment">// However, if the code does anything that is timing critical,</span></span><br><span class="line">      <span class="comment">// and requires the correct clock be locked, then it is best to</span></span><br><span class="line">      <span class="comment">// wait until this switching has completed.</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// Wait for the PLL lock bit to be set.</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// The watchdog should be disabled before this loop, or fed within</span></span><br><span class="line">      <span class="comment">// the loop via ServiceDog().</span></span><br><span class="line"></span><br><span class="line">	  <span class="comment">// Uncomment to disable the watchdog</span></span><br><span class="line">      DisableDog();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span>(SysCtrlRegs.PLLSTS.bit.PLLLOCKS != <span class="number">1</span>)</span><br><span class="line">      &#123;</span><br><span class="line">	      <span class="comment">// Uncomment to service the watchdog</span></span><br><span class="line">          <span class="comment">// ServiceDog();</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      EALLOW;</span><br><span class="line">      SysCtrlRegs.PLLSTS.bit.MCLKOFF = <span class="number">0</span>;</span><br><span class="line">      EDIS;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If switching to 1/2</span></span><br><span class="line">	<span class="keyword">if</span>((divsel == <span class="number">1</span>)||(divsel == <span class="number">2</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		EALLOW;</span><br><span class="line">	    SysCtrlRegs.PLLSTS.bit.DIVSEL = divsel;</span><br><span class="line">	    EDIS;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// If switching to 1/1</span></span><br><span class="line">	<span class="comment">// * First go to 1/2 and let the power settle</span></span><br><span class="line">	<span class="comment">//   The time required will depend on the system, this is only an example</span></span><br><span class="line">	<span class="comment">// * Then switch to 1/1</span></span><br><span class="line">	<span class="keyword">if</span>(divsel == <span class="number">3</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		EALLOW;</span><br><span class="line">	    SysCtrlRegs.PLLSTS.bit.DIVSEL = <span class="number">2</span>;</span><br><span class="line">	    DELAY_US(<span class="number">50L</span>);</span><br><span class="line">	    SysCtrlRegs.PLLSTS.bit.DIVSEL = <span class="number">3</span>;</span><br><span class="line">	    EDIS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="å…³äºDSPç³»ç»Ÿæ—¶é’Ÿçš„ä¸€äº›ç†è§£ä¸ä¿®æ”¹"><a href="#å…³äºDSPç³»ç»Ÿæ—¶é’Ÿçš„ä¸€äº›ç†è§£ä¸ä¿®æ”¹" class="headerlink" title="å…³äºDSPç³»ç»Ÿæ—¶é’Ÿçš„ä¸€äº›ç†è§£ä¸ä¿®æ”¹"></a>å…³äºDSPç³»ç»Ÿæ—¶é’Ÿçš„ä¸€äº›ç†è§£ä¸ä¿®æ”¹</h3><p><img data-src="https://tvax2.sinaimg.cn/large/0084Tjdoly1gu4w7qrtwtj616s0o2awj02.jpg" alt="image"></p>
<p>ç³»ç»Ÿæ—¶é’Ÿæ˜¯åœ¨InitSysCtrl();è¿›è¡Œåˆå§‹åŒ–çš„ï¼Œè¿›å…¥è¿™ä¸ªå‡½æ•°ï¼Œç³»ç»Ÿåˆå§‹åŒ–å‡½æ•°é»˜è®¤ä¸ä½¿ç”¨çœ‹é—¨ç‹—ã€‚</p>
<p>é«˜é€Ÿæ—¶é’Ÿå’Œä½é€Ÿæ—¶é’Ÿçš„åˆ†é¢‘åˆå§‹åŒ–è®¾ç½®æ˜¯â†“â†“</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SysCtrlRegs.HISPCP.all = <span class="number">0x0001</span>;</span><br><span class="line">SysCtrlRegs.LOSPCP.all = <span class="number">0x0002</span>;</span><br></pre></td></tr></table></figure>
<p>å³é«˜é€Ÿæ—¶é’Ÿé»˜è®¤ä¸ºç³»ç»Ÿæ—¶é’Ÿçš„äºŒåˆ†é¢‘ï¼Œä½é€Ÿæ—¶é’Ÿé»˜è®¤ä¸ºç³»ç»Ÿæ—¶é’Ÿçš„å››åˆ†é¢‘ã€‚</p>
<p><strong>å¯ä»¥å‘ç°ï¼Œé«˜é€Ÿå¤–è®¾æ—¶é’Ÿé¢‘ç‡æ˜¯å¯¹ç³»ç»Ÿé¢‘ç‡è¿›è¡Œ2åˆ†é¢‘ï¼Œå³ä¸º150/2=75MHz;åŒç†ï¼Œå¯ä»¥æ±‚å¾—ä½é€Ÿå¤–è®¾æ—¶é’Ÿé¢‘ç‡ä¸º150/4=37.5MHzï¼›</strong></p>
<p>åˆå§‹åŒ–é«˜é€Ÿå’Œä½é€Ÿæ—¶é’Ÿä¹‹åï¼Œå°†å¤–è®¾çš„æ—¶é’Ÿè¿›è¡Œä½¿èƒ½ï¼Œä¸€èˆ¬é»˜è®¤éƒ½æ˜¯ä½¿èƒ½çš„ã€‚å¤–è®¾æ—¶é’Ÿæ§åˆ¶å¯„å­˜å™¨æœ‰ä¸‰ä¸ªå¯„å­˜å™¨PCLKCR0ã€PCLKCR1ã€PCLKCR3ï¼Œä¸åŒçš„å¤–è®¾æ—¶é’Ÿæ§åˆ¶å¯„å­˜å™¨ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitPeripheralClocks</span><span class="params">(<span class="keyword">void</span>)</span><span class="comment">//åˆå§‹åŒ–å¤–è®¾æ—¶é’Ÿ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   EALLOW;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HISPCP/LOSPCP prescale register settings, normally it will be set to default values</span></span><br><span class="line">   SysCtrlRegs.HISPCP.all = <span class="number">0x0001</span>;</span><br><span class="line">   SysCtrlRegs.LOSPCP.all = <span class="number">0x0002</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// XCLKOUT to SYSCLKOUT ratio.  By default XCLKOUT = 1/4 SYSCLKOUT</span></span><br><span class="line">   <span class="comment">// XTIMCLK = SYSCLKOUT/2</span></span><br><span class="line">   XintfRegs.XINTCNF2.bit.XTIMCLK = <span class="number">1</span>;</span><br><span class="line">   <span class="comment">// XCLKOUT = XTIMCLK/2</span></span><br><span class="line">   XintfRegs.XINTCNF2.bit.CLKMODE = <span class="number">1</span>;</span><br><span class="line">   <span class="comment">// Enable XCLKOUT</span></span><br><span class="line">   XintfRegs.XINTCNF2.bit.CLKOFF = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Peripheral clock enables set for the selected peripherals.</span></span><br><span class="line"><span class="comment">// If you are not using a peripheral leave the clock off</span></span><br><span class="line"><span class="comment">// to save on power.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Note: not all peripherals are available on all 2833x derivates.</span></span><br><span class="line"><span class="comment">// Refer to the datasheet for your particular device.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This function is not written to be an example of efficient code.</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.ADCENCLK = <span class="number">1</span>;    <span class="comment">// ADC</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// *IMPORTANT*</span></span><br><span class="line">   <span class="comment">// The ADC_cal function, which  copies the ADC calibration values from TI reserved</span></span><br><span class="line">   <span class="comment">// OTP into the ADCREFSEL and ADCOFFTRIM registers, occurs automatically in the</span></span><br><span class="line">   <span class="comment">// Boot ROM. If the boot ROM code is bypassed during the debug process, the</span></span><br><span class="line">   <span class="comment">// following function MUST be called for the ADC to function according</span></span><br><span class="line">   <span class="comment">// to specification. The clocks to the ADC MUST be enabled before calling this</span></span><br><span class="line">   <span class="comment">// function.</span></span><br><span class="line">   <span class="comment">// See the device data manual and/or the ADC Reference</span></span><br><span class="line">   <span class="comment">// Manual for more information.</span></span><br><span class="line"></span><br><span class="line">   ADC_cal();</span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.I2CAENCLK = <span class="number">1</span>;   <span class="comment">// I2C</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SCIAENCLK = <span class="number">1</span>;   <span class="comment">// SCI-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SCIBENCLK = <span class="number">1</span>;   <span class="comment">// SCI-B</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SCICENCLK = <span class="number">1</span>;   <span class="comment">// SCI-C</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SPIAENCLK = <span class="number">1</span>;   <span class="comment">// SPI-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.MCBSPAENCLK = <span class="number">1</span>; <span class="comment">// McBSP-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.MCBSPBENCLK = <span class="number">1</span>; <span class="comment">// McBSP-B</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.ECANAENCLK=<span class="number">1</span>;    <span class="comment">// eCAN-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.ECANBENCLK=<span class="number">1</span>;    <span class="comment">// eCAN-B</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC = <span class="number">0</span>;   <span class="comment">// Disable TBCLK within the ePWM</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM1ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM2ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM2</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM3ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM3</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM4ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM4</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM5ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM5</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM6ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM6</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC = <span class="number">1</span>;   <span class="comment">// Enable TBCLK within the ePWM</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP3ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP3</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP4ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP4</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP5ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP5</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP6ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP6</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP1ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP2ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP2</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EQEP1ENCLK = <span class="number">1</span>;  <span class="comment">// eQEP1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EQEP2ENCLK = <span class="number">1</span>;  <span class="comment">// eQEP2</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.CPUTIMER0ENCLK = <span class="number">1</span>; <span class="comment">// CPU Timer 0</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.CPUTIMER1ENCLK = <span class="number">1</span>; <span class="comment">// CPU Timer 1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.CPUTIMER2ENCLK = <span class="number">1</span>; <span class="comment">// CPU Timer 2</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.DMAENCLK = <span class="number">1</span>;       <span class="comment">// DMA Clock</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.XINTFENCLK = <span class="number">1</span>;     <span class="comment">// XTIMCLK</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.GPIOINENCLK = <span class="number">1</span>;    <span class="comment">// GPIO input clock</span></span><br><span class="line"></span><br><span class="line">   EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦å¯¹ç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯InitPllå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼švalå’Œdivselï¼Œvalæ˜¯ç”¨æ¥è®¾ç½®PLLçš„å€é¢‘ç³»æ•°ï¼Œdivselæ˜¯ç”¨æ¥è®¾ç½®åˆ†é¢‘ç³»æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">InitPll(DSP28_PLLCR,DSP28_DIVSEL);</span><br><span class="line">----------</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitPll</span><span class="params">(Uint16 val, Uint16 divsel)</span></span></span><br></pre></td></tr></table></figure>
<p>InitPllå‡½æ•°å°†DSP_PLLCRä¼ é€’ç»™valï¼Œå°†DSP_DIVSELä¼ é€’ç»™divselã€‚</p>
<p>æŒ‰ä½Ctrlç‚¹å‡»DSP_PLLCRï¼Œå°±å¯ä»¥å‘ç°DSP_PLLCRçš„å€¼è®¾ç½®çš„æ˜¯10ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DSP28_PLLCR  10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  0 // PLL is bypassed in this mode</span></span><br></pre></td></tr></table></figure>
<p>æŒ‰ä½Ctrlç‚¹å‡»DSP_DIVSELï¼Œå°±å¯ä»¥å‘ç°DSP_DIVSELçš„å€¼è®¾ç½®çš„æ˜¯2ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#define DSP28_DIVSEL  0  // Enable /4 for SYSCLKOUT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_DIVSEL  1 // Disable /4 for SYSCKOUT</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DSP28_DIVSEL   2 <span class="comment">// Enable /2 for SYSCLKOUT</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_DIVSEL   3 // Enable /1 for SYSCLKOUT</span></span><br></pre></td></tr></table></figure>
<p>å³å°†æ™¶æŒ¯é¢‘ç‡30MHzé€šè¿‡PLLå€é¢‘10å€åï¼Œå†åˆ†é¢‘2å€ï¼Œå³ç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡é»˜è®¤æ˜¯150MHzã€‚</p>
<p>æ‰€ä»¥ä½¿ç”¨Tié»˜è®¤æä¾›çš„ç³»ç»Ÿåˆå§‹åŒ–å‡½æ•°InitSysCtrl()ï¼Œè°ƒç”¨çš„cæ–‡ä»¶ä¸ºDSP2833x_SysCtrl.cï¼Œåˆå§‹åŒ–ä¹‹åçš„é¢‘ç‡æ˜¯ç»è¿‡PLL10å€é¢‘åå†åˆ†é¢‘2å€ï¼Œå¾—åˆ°ç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡ä¸º150MHzã€‚</p>
<h4 id="ä¿®æ”¹ç³»ç»Ÿæ—¶é’Ÿ"><a href="#ä¿®æ”¹ç³»ç»Ÿæ—¶é’Ÿ" class="headerlink" title="ä¿®æ”¹ç³»ç»Ÿæ—¶é’Ÿ"></a>ä¿®æ”¹ç³»ç»Ÿæ—¶é’Ÿ</h4><p>å¦‚æœè¦ä¿®æ”¹ç³»ç»Ÿæ—¶é’Ÿï¼Œè®©å…¶ä¸å†æ˜¯150MHzï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹DSP_PLLCRå’ŒDSP_DIVSELçš„å€¼ï¼Œæ¯”å¦‚è®¾ç½®DSP_PLLCR=3ï¼ŒDSP_DIVSEL=2ï¼Œå³ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#define DSP28_PLLCR  10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DSP28_PLLCR  3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_PLLCR  1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#define DSP28_DIVSEL  0  // Enable /4 for SYSCLKOUT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_DIVSEL  1 // Disable /4 for SYSCKOUT</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DSP28_DIVSEL   2 <span class="comment">// Enable /2 for SYSCLKOUT</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DSP28_DIVSEL   3 // Enable /1 for SYSCLKOUT</span></span><br></pre></td></tr></table></figure>
<p>å³æ™¶æŒ¯é¢‘ç‡ä¸º30MHzï¼Œç»è¿‡3å€é¢‘ï¼Œ2åˆ†é¢‘ï¼Œç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡æ­¤æ—¶ä¸º45MHzã€‚</p>
<h4 id="å…³äºGPIOçš„ç†è§£å­¦ä¹ "><a href="#å…³äºGPIOçš„ç†è§£å­¦ä¹ " class="headerlink" title="å…³äºGPIOçš„ç†è§£å­¦ä¹ "></a>å…³äºGPIOçš„ç†è§£å­¦ä¹ </h4><p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gu4w8yfqb8j616s15rb0a02.jpg" alt="image"></p>
<h3 id="æ˜ŸæœŸäºŒ"><a href="#æ˜ŸæœŸäºŒ" class="headerlink" title="æ˜ŸæœŸäºŒ"></a>æ˜ŸæœŸäºŒ</h3><p>æ•°æ®ç±»å‹çš„ä½æ•°ï¼š</p>
<ul>
<li>float æ˜¯4å­—èŠ‚ï¼Œå…±32ä½</li>
<li>double æ˜¯8å­—èŠ‚ï¼Œ64ä½</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.notion.so/0684e6301db149c08904c9375a896996">å®šä¹‰æ•°ç»„ç‰ˆæœ¬çš„ä¸­æ–­</a></p>
<p>EPWM3æ¨¡å—å‡ºç°çš„é—®é¢˜ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">interrupt <span class="keyword">void</span> <span class="title">epwm3_isr</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//ç»™ä¸‰ç›¸å‚è€ƒæ³¢ï¼Œtctråˆå€¼è®¾ç½®ä¸º0</span></span><br><span class="line">	ua=m*Vdc/<span class="built_in">sqrt</span>(<span class="number">3</span>)*<span class="built_in">cos</span>(<span class="number">100</span>*PI*tctr3);</span><br><span class="line">	ub=m*Vdc/<span class="built_in">sqrt</span>(<span class="number">3</span>)*<span class="built_in">cos</span>(<span class="number">100</span>*PI*tctr3<span class="number">-2</span>*PI/<span class="number">3</span>);</span><br><span class="line">	uc=m*Vdc/<span class="built_in">sqrt</span>(<span class="number">3</span>)*<span class="built_in">cos</span>(<span class="number">100</span>*PI*tctr3+<span class="number">2</span>*PI/<span class="number">3</span>);</span><br><span class="line">	cosne = (<span class="keyword">double</span>)<span class="number">2.0</span>/<span class="number">3</span>*(ua<span class="number">-0.5</span>*ub<span class="number">-0.5</span>*uc);</span><br><span class="line">	sinne = <span class="built_in">sqrt</span>(<span class="number">3</span>)/<span class="number">3</span>*(ub-uc);</span><br><span class="line">    <span class="comment">//å°†uaã€ubã€ucæ•°ç»„è¿›è¡ŒClarkeå˜æ¢</span></span><br><span class="line">	u_alfa=cosne;</span><br><span class="line">	u_beta=sinne;</span><br><span class="line">    <span class="comment">//ç¡®å®šXYZçš„å€¼ï¼Œè¯¦è§è‡ªå·±çš„æ€»ç»“æ–‡æ¡£ï¼Œè¿™é‡Œçš„XYZæ˜¯æ ‡å¹ºå€¼</span></span><br><span class="line">    X1=u_beta;</span><br><span class="line">    Y1=<span class="number">0.867</span>*u_alfa<span class="number">-0.5</span>*u_beta;</span><br><span class="line">    Z1=<span class="number">-0.867</span>*u_alfa<span class="number">-0.5</span>*u_beta;</span><br><span class="line">    X=<span class="built_in">sqrt</span>(<span class="number">3</span>)*Ts/Vdc*X1;</span><br><span class="line">    Y=<span class="built_in">sqrt</span>(<span class="number">3</span>)*Ts/Vdc*Y1;</span><br><span class="line">    Z=<span class="built_in">sqrt</span>(<span class="number">3</span>)*Ts/Vdc*Z1;</span><br><span class="line">    <span class="comment">//ç”¨Xã€Yã€Zå¯ä»¥åˆ¤æ–­æ‰‡åŒºï¼Œsec=315462åˆ†åˆ«å¯¹åº”æ‰‡åŒº123456</span></span><br><span class="line">    <span class="keyword">if</span>(X1&gt;<span class="number">0</span>) A=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> A=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(Y1&gt;<span class="number">0</span>) B=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> B=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(Z1&gt;<span class="number">0</span>) C=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> C=<span class="number">0</span>;</span><br><span class="line">    N=<span class="number">4</span>*C+<span class="number">2</span>*B+A;</span><br><span class="line">    <span class="comment">//å°†æ•°å­—Nè½¬åŒ–æˆå¯¹åº”çš„æ‰‡åŒºå·</span></span><br><span class="line">    <span class="keyword">switch</span>(N)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;sec=<span class="number">2</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;sec=<span class="number">6</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;sec=<span class="number">1</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: &#123;sec=<span class="number">4</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>: &#123;sec=<span class="number">3</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: &#123;sec=<span class="number">5</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ ¹æ®å‚è€ƒç”µå‹çŸ¢é‡æ‰€åœ¨çš„æ‰‡åŒºç¡®å®šæ ‡å‡†çŸ¢é‡çš„ä½œç”¨æ—¶é—´</span></span><br><span class="line">    <span class="keyword">switch</span>(sec)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;t1=Y;  t2=X;  t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;t1=-Y; t2=-Z; t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;t1=X;  t2=Z;  t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: &#123;t1=-X; t2=-Y; t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>: &#123;t1=Z;  t2=Y;  t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: &#123;t1=-Z; t2=-X; t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†T1ã€T2è¿›è¡Œé¥±å’Œå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(t1+t2&gt;Ts)</span><br><span class="line">    &#123;</span><br><span class="line">    	t1=t1*Ts/(t1+t2);</span><br><span class="line">    	t2=t2*Ts/(t1+t2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸‰ä¸ªåˆ‡æ¢æ—¶åˆ»Taonã€Tbonã€Tcon</span></span><br><span class="line">    Taon=t0/<span class="number">4</span>;</span><br><span class="line">    Tbon=t0/<span class="number">4</span>+t1/<span class="number">2</span>;</span><br><span class="line">    Tcon=t0/<span class="number">4</span>+t1/<span class="number">2</span>+t2/<span class="number">2</span>;</span><br><span class="line">    <span class="comment">//æ ¹æ®æ‰‡åŒºç»™åˆ‡æ¢æ—¶åˆ»Taonã€Tbonã€Tcon</span></span><br><span class="line">    <span class="keyword">switch</span>(sec)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;Ta=Taon; Tb=Tbon; Tc=Tcon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;Ta=Tbon; Tb=Taon; Tc=Tcon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;Ta=Tcon; Tb=Taon; Tc=Tbon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: &#123;Ta=Tcon; Tb=Tbon; Tc=Taon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>: &#123;Ta=Tbon; Tb=Tcon; Tc=Taon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: &#123;Ta=Taon; Tb=Tcon; Tc=Tbon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    EPwm3Regs.CMPA.half.CMPA =Tc*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    EPwm3Regs.CMPB =Tc*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    tctr3=(<span class="keyword">double</span>)(tctr3+(<span class="keyword">double</span>)Ts);</span><br><span class="line">    k3++;</span><br><span class="line">	<span class="keyword">if</span>(tctr3&gt;=<span class="number">0.02</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		tctr3=<span class="number">0</span>;</span><br><span class="line">		k3=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//Voltage3[k3]=EPwm3Regs.CMPA.half.CMPA ;//è§‚å¯Ÿç”¨</span></span><br><span class="line">    Voltage3[k3]=Tc;</span><br><span class="line">	EPwm3Regs.ETCLR.bit.INT = <span class="number">1</span>;             <span class="comment">//æ¸…é™¤æ ‡å¿—ä½</span></span><br><span class="line">	PieCtrlRegs.PIEACK.all = PIEACK_GROUP3;  <span class="comment">//æ¸…é™¤åº”ç­”ä½</span></span><br><span class="line">	EINT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gu4wd9vzwnj616s0k8gr302.jpg" alt="image"> <img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gu4wdi67pwj616s0k8afj02.jpg" alt="image"> <img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gu4wdps8fdj316s0k879r.jpg" alt="image"></p>
<p>Taã€Tbã€Tcçš„æ³¢å½¢æ²¡æœ‰é”™ï¼Œä½†æ˜¯æˆ‘è°ƒè¯•å‘ç°k1ã€k2ã€k3ä¸æ˜¯åŒæ­¥å˜åŒ–ï¼Œk1ã€k2æ˜¯åŒæ­¥å˜åŒ–çš„ã€‚</p>
<h3 id="æ˜ŸæœŸä¸‰"><a href="#æ˜ŸæœŸä¸‰" class="headerlink" title="æ˜ŸæœŸä¸‰"></a>æ˜ŸæœŸä¸‰</h3><p>æŠŠæ˜¨å¤©çš„é—®é¢˜å’Œåˆ˜è€å¸ˆè®¨è®ºä¹‹åï¼Œè‡ªå·±æ€è€ƒäº†ä¸‹ï¼ŒePWM3ç¨‹åºåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºæˆ‘å°†ePWM1æ¨¡å—çš„ä¸­æ–­è¿›è¡Œäº†å±è”½ä¹‹åï¼Œåªç”¨ePWM2å’ŒePWM3çš„ä¸­æ–­ï¼Œè¿™æ ·å¾—å‡ºæ¥çš„SVPWMæ³¢å½¢æ˜¯å¯¹çš„ã€‚</p>
<blockquote>
<p>å¦‚ä½•å°†ePWM1çš„ä¸­æ–­è¿›è¡Œå¿«é€Ÿå±è”½ï¼šåªéœ€è¦å°†ä¸‹é¢çš„å‡ è¡Œä»£ç æ³¨é‡Šå³å¯ï¼›</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//interrupt void epwm1_isr(void);//å£°æ˜EPWM1ä¸­æ–­æœåŠ¡ç¨‹åº</span></span><br><span class="line"><span class="comment">//  PieVectTable.EPWM1_INT = &amp;epwm1_isr;//é‡æ–°æ˜ å°„ä½¿ç”¨çš„ä¸­æ–­å‘é‡ï¼Œå¯¹åº”çš„åœ°å€P134é¡µ</span></span><br><span class="line"><span class="comment">//   PieCtrlRegs.PIEIER3.bit.INTx1 = 1;//å…è®¸PIEçº§ä¸­æ–­INT3.1ï¼Œå³EPWM1ä¸­æ–­</span></span><br></pre></td></tr></table></figure>
<p>çº¢è‰²çš„çº¿æ¥çš„æ˜¯ePWM3æ¨¡å—çš„ePWMAï¼Œè¤è‰²çš„çº¿æ¥çš„æ˜¯ePWM3æ¨¡å—çš„ePWMBï¼Œåˆ†åˆ«å¯¹åº”ç¤ºæ³¢å™¨çš„1è·¯ä¿¡å·å’Œ2è·¯ä¿¡å·ï¼Œè¿™é‡Œä½¿ç”¨çš„ç¤ºæ³¢å™¨ä¿¡å·çš„çº¿æ˜¯Probe Compï¼Œå¯ä»¥å‘ç°ePWM3æ¨¡å—çš„æ³¢å½¢å‚è€ƒæ³¢æ˜¯50Hzï¼ŒPWMçš„é¢‘ç‡æ˜¾ç¤ºæ˜¯12.8kHzï¼Œä¸ç†è§£çš„æ˜¯ä¸€è‡´çš„ï¼Œå› ä¸ºç³»ç»Ÿæ—¶é’Ÿæ˜¯150MHzï¼ˆ30MHzæ™¶æŒ¯10å€é¢‘ä¹‹åäºŒåˆ†é¢‘ï¼‰ï¼ŒTBPRD=5859ï¼ŒTpwm=12.8kHz;</p>
<p>ä½†æ˜¯å¦‚æœä¸å±è”½ePWM1æ¨¡å—ï¼Œé‚£ä¹ˆä¼šå‘ç°ePWM1å’ŒePWM2æ¨¡å—çš„æ³¢å½¢æ˜¯å¯¹çš„ï¼Œå‚è€ƒæ³¢çš„é¢‘ç‡æ˜¯50Hzï¼ŒePWM3æ¨¡å—çš„å‚è€ƒæ³¢çš„é¢‘ç‡ä¸æ˜¯50Hzã€‚PWMçš„é¢‘ç‡è¿˜æ˜¯12.8kHzã€‚Debugå‘ç°k3ä¸æ˜¯å’Œk1ã€k2åŒæ­¥å˜åŒ–çš„ã€‚å¦‚æœä¸¤ä¸ªä¸­æ–­åŒæ—¶æ¥ï¼Œé‚£ä¹ˆä¼šæ ¹æ®ä¸¤è€…çš„ä¸­æ–­ä¼˜å…ˆçº§æ¥åˆ¤æ–­å“ªä¸ªä¸­æ–­å…ˆæ‰§è¡Œï¼Œä»è€Œè¿›å…¥ä¸­æ–­æœåŠ¡å‡½æ•°ã€‚å¦‚PWM1ä¸­æ–­ä¼˜å…ˆçº§æ¯”è¾ƒé«˜ï¼Œåˆ™å…ˆè¿›å…¥PWM1çš„ä¸­æ–­ä¼˜å…ˆçº§ï¼ŒPWM2ç­‰å¾…PWM1çš„ä¸­æ–­æœåŠ¡å‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œå†æ‰§è¡Œã€‚å¦‚æœä¸¤ä¸ªä¸­æ–­ä¸åŒæ—¶æ¥çš„è¯ï¼Œé‚£ä¹ˆå…ˆåˆ°å…ˆæ‰§è¡Œã€‚</p>
<p>é—®é¢˜åˆ†æï¼šç”±äºè‡ªå·±çš„ä¸­æ–­å¤ªå¤šï¼Œåœ¨ä¸‰ä¸ªePWMçš„ä¸­æ–­ä¸­æœ‰å¾ˆå¤šé‡å¤çš„è¿ç®—ï¼Œæ¯”å¦‚èµ‹tctr1ã€2ã€3çš„åˆå€¼ï¼ŒClarkeå˜æ¢ï¼Œæ‰‡åŒºåˆ¤æ–­ï¼Œæœ€åè®¡ç®—çš„åˆ‡æ¢æ—¶åˆ»Taã€Tbã€Tcéƒ½æ˜¯é‡å¤çš„è¿ç®—ï¼Œè¿™æ ·å°±é€ æˆäº†è®¡ç®—çš„å†—ä½™ï¼Œå¯¼è‡´28335çš„è®¡ç®—é‡å¤ªå¤§ï¼Œä»è€Œç®—åŠ›ä¸å¤Ÿâ€¦</p>
<p>æ”¹è¿›æ€è·¯ï¼šé‚£ä¹ˆæˆ‘éœ€è¦å‡å°‘ä¸­æ–­ä¸­é‡å¤è®¡ç®—çš„è¿ç®—è¿‡ç¨‹ï¼Œæ‰€ä»¥æ€è·¯å°±æ˜¯åœ¨ä¸€ä¸ªä¸­æ–­ä¸­ï¼Œè¿›å…¥è¿™ä¸ªä¸­æ–­çš„æ—¶åˆ»æ˜¯å½“æ—¶åŸºè®¡æ•°å™¨TBCTRçš„å€¼ä¸º0æ—¶è¿›å…¥ï¼Œä¹‹åè®¾ç½®ä¸€ä¸ªå˜é‡tctrï¼Œå·²ç»ä¸å†éœ€è¦ä¸‰ä¸ªtctrè¿›è¡Œæ—¶é—´è®¡ç®—äº†ã€‚è¿™æ ·åªéœ€è¦è¿›è¡Œä¸€æ¬¡ä¸‰ç›¸å‚è€ƒæ³¢è®¡ç®—ï¼Œæ‰‡åŒºåˆ¤æ–­ï¼Œåˆ‡æ¢æ—¶åˆ»Taã€Tbã€Tcçš„è®¡ç®—ï¼Œä¹‹ååœ¨ä¸€ä¸ªä¸­æ–­ä¸­å°†Taã€Tbã€Tcåˆ†åˆ«è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œç›´æ¥èµ‹ç»™ePWM1ã€ePWM2ã€ePWM3çš„æ¯”è¾ƒå¯„å­˜å™¨ã€‚</p>
<h4 id="åˆ©ç”¨ä¸€ä¸ªä¸­æ–­è¿›è¡Œä¸‰ç›¸çš„è®¡ç®—"><a href="#åˆ©ç”¨ä¸€ä¸ªä¸­æ–­è¿›è¡Œä¸‰ç›¸çš„è®¡ç®—" class="headerlink" title="åˆ©ç”¨ä¸€ä¸ªä¸­æ–­è¿›è¡Œä¸‰ç›¸çš„è®¡ç®—"></a>åˆ©ç”¨ä¸€ä¸ªä¸­æ–­è¿›è¡Œä¸‰ç›¸çš„è®¡ç®—</h4><p>æ ¹æ®ä¸€ä¸ªä¸­æ–­å®ç°çš„SVPWMçš„æ€è·¯ï¼Œå°†DSP2833x_EPwm_1INT.cæ–‡ä»¶ä¸­ï¼Œå°†ePWM2ã€ePWM3çš„ä¸­æ–­è¿›è¡Œå±è”½ï¼Œåªç”¨ePWM1çš„ä¸­æ–­ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.ETSEL.bit.INTEN = <span class="number">1</span>; <span class="comment">// ePWM1æ¨¡å—ä¸­æ–­äº§ç”Ÿä½ï¼Œä½¿èƒ½ä¸­æ–­</span></span><br><span class="line">EPwm2Regs.ETSEL.bit.INTEN = <span class="number">0</span>; <span class="comment">// disable ePWM2 INT</span></span><br><span class="line">EPwm3Regs.ETSEL.bit.INTEN = <span class="number">0</span>; <span class="comment">// disable ePWM3 INT</span></span><br></pre></td></tr></table></figure>
<p>ä¹‹ååœ¨SVPWM_Modified_1INT_0901.cæ–‡ä»¶ä¸­ï¼Œå°†ePWM2å’ŒePWM3ç›¸å…³çš„å£°æ˜å‡½æ•°æ³¨é‡Šï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">interrupt <span class="keyword">void</span> <span class="title">epwm1_isr</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//å£°æ˜EPWM1ä¸­æ–­æœåŠ¡ç¨‹åº</span></span><br><span class="line"><span class="comment">//interrupt void epwm2_isr(void);//å£°æ˜EPWM2ä¸­æ–­æœåŠ¡ç¨‹åº</span></span><br><span class="line"><span class="comment">//interrupt void epwm3_isr(void);//å£°æ˜EPWM3ä¸­æ–­æœåŠ¡ç¨‹åº</span></span><br></pre></td></tr></table></figure>
<p>å°†ä¸éœ€è¦çš„PIEä¸­æ–­ä¸CPUä¸­æ–­çš„è¿æ¥å…¨éƒ¨æ–­å¼€ï¼Œå…è®¸ePWM1ä¸­æ–­ï¼Œå³PIEç»„3å‘é‡çš„ç¬¬ä¸€ä¸ªä¸­æ–­INT3.1ï¼ŒINT3.2å’ŒINT3.3æ³¨é‡Šæ‰ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PieCtrlRegs.PIEIER3.bit.INTx1 = <span class="number">1</span>;<span class="comment">//å…è®¸PIEçº§ä¸­æ–­INT3.1ï¼Œå³EPWM1ä¸­æ–­</span></span><br><span class="line"><span class="comment">//   PieCtrlRegs.PIEIER3.bit.INTx2 = 1;//å…è®¸PIEçº§ä¸­æ–­INT3.2ï¼Œå³EPWM2ä¸­æ–­</span></span><br><span class="line"><span class="comment">//   PieCtrlRegs.PIEIER3.bit.INTx3 = 1;//å…è®¸PIEçº§ä¸­æ–­INT3.3ï¼Œå³EPWM3ä¸­æ–­</span></span><br></pre></td></tr></table></figure>
<p>å°†ePWM1çš„ä¸­æ–­å‡½æ•°çš„åœ°å€æ˜ å°„åˆ°EPWM1_INTä¸­æ–­å‘é‡è¡¨ï¼Œå³ä¸­æ–­å‘é‡çš„å…¥å£åœ°å€ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">PieVectTable.EPWM1_INT = &amp;epwm1_isr;<span class="comment">//é‡æ–°æ˜ å°„ä½¿ç”¨çš„ä¸­æ–­å‘é‡ï¼Œå¯¹åº”çš„åœ°å€P134é¡µ</span></span><br><span class="line"><span class="comment">//   PieVectTable.EPWM2_INT = &amp;epwm2_isr;</span></span><br><span class="line"><span class="comment">//   PieVectTable.EPWM3_INT = &amp;epwm3_isr;</span></span><br><span class="line">----------</span><br><span class="line"><span class="comment">// Group 3 PIE Peripheral Vectors:</span></span><br><span class="line">      PINT     EPWM1_INT;  <span class="comment">// EPWM-1</span></span><br><span class="line">      PINT     EPWM2_INT;  <span class="comment">// EPWM-2</span></span><br><span class="line">      PINT     EPWM3_INT;  <span class="comment">// EPWM-3</span></span><br><span class="line">      PINT     EPWM4_INT;  <span class="comment">// EPWM-4</span></span><br><span class="line">      PINT     EPWM5_INT;  <span class="comment">// EPWM-5</span></span><br><span class="line">      PINT     EPWM6_INT;  <span class="comment">// EPWM-6</span></span><br><span class="line">      PINT     rsvd3_7;</span><br><span class="line">      PINT     rsvd3_8;</span><br></pre></td></tr></table></figure>
<p>ä¸­æ–­å‡½æ•°interrupt void epwm1_isr(void)çš„ç¼–å†™ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">interrupt <span class="keyword">void</span> <span class="title">epwm1_isr</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ua=m*Vdc/<span class="built_in">sqrt</span>(<span class="number">3</span>)*<span class="built_in">cos</span>(<span class="number">100</span>*PI*tctr);</span><br><span class="line">	ub=m*Vdc/<span class="built_in">sqrt</span>(<span class="number">3</span>)*<span class="built_in">cos</span>(<span class="number">100</span>*PI*tctr<span class="number">-2</span>*PI/<span class="number">3</span>);</span><br><span class="line">	uc=m*Vdc/<span class="built_in">sqrt</span>(<span class="number">3</span>)*<span class="built_in">cos</span>(<span class="number">100</span>*PI*tctr+<span class="number">2</span>*PI/<span class="number">3</span>);</span><br><span class="line">	cosne = (<span class="keyword">double</span>)<span class="number">2.0</span>/<span class="number">3</span>*(ua<span class="number">-0.5</span>*ub<span class="number">-0.5</span>*uc);</span><br><span class="line">	sinne = <span class="built_in">sqrt</span>(<span class="number">3</span>)/<span class="number">3</span>*(ub-uc);</span><br><span class="line">    <span class="comment">//å°†uaã€ubã€ucæ•°ç»„è¿›è¡ŒClarkeå˜æ¢ï¼Œmæ˜¯è°ƒåˆ¶æ¯”</span></span><br><span class="line">	u_alfa=cosne;</span><br><span class="line">	u_beta=sinne;</span><br><span class="line">    <span class="comment">//ç¡®å®šXYZçš„å€¼ï¼Œè¯¦è§è‡ªå·±çš„æ€»ç»“æ–‡æ¡£ï¼Œè¿™é‡Œçš„XYZæ˜¯æ ‡å¹ºå€¼</span></span><br><span class="line">    X1=u_beta;</span><br><span class="line">    Y1=<span class="number">0.867</span>*u_alfa<span class="number">-0.5</span>*u_beta;</span><br><span class="line">    Z1=<span class="number">-0.867</span>*u_alfa<span class="number">-0.5</span>*u_beta;</span><br><span class="line">    X = <span class="built_in">sqrt</span>(<span class="number">3</span>)*Ts/Vdc*X1;<span class="comment">//è®¡ç®—çœŸæ­£çš„çŸ¢é‡ä½œé‡æ—¶é—´XYZçš„å€¼</span></span><br><span class="line">    Y = <span class="built_in">sqrt</span>(<span class="number">3</span>)*Ts/Vdc*Y1;</span><br><span class="line">    Z = <span class="built_in">sqrt</span>(<span class="number">3</span>)*Ts/Vdc*Z1;</span><br><span class="line">    <span class="comment">//ç”¨Xã€Yã€Zå¯ä»¥åˆ¤æ–­æ‰‡åŒºï¼Œsec=315462åˆ†åˆ«å¯¹åº”æ‰‡åŒº123456</span></span><br><span class="line">    <span class="keyword">if</span>(X1&gt;<span class="number">0</span>) A=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> A=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(Y1&gt;<span class="number">0</span>) B=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> B=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(Z1&gt;<span class="number">0</span>) C=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> C=<span class="number">0</span>;</span><br><span class="line">    N=<span class="number">4</span>*C+<span class="number">2</span>*B+A;</span><br><span class="line">    <span class="comment">//å°†æ•°å­—Nè½¬åŒ–æˆå¯¹åº”çš„æ‰‡åŒºå·</span></span><br><span class="line">    <span class="keyword">switch</span>(N)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;sec=<span class="number">2</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;sec=<span class="number">6</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;sec=<span class="number">1</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: &#123;sec=<span class="number">4</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>: &#123;sec=<span class="number">3</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: &#123;sec=<span class="number">5</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ ¹æ®å‚è€ƒç”µå‹çŸ¢é‡æ‰€åœ¨çš„æ‰‡åŒºç¡®å®šæ ‡å‡†çŸ¢é‡çš„ä½œç”¨æ—¶é—´</span></span><br><span class="line">    <span class="keyword">switch</span>(sec)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;t1=Y;  t2=X;  t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;t1=-Y; t2=-Z; t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;t1=X;  t2=Z;  t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: &#123;t1=-X; t2=-Y; t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>: &#123;t1=Z;  t2=Y;  t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: &#123;t1=-Z; t2=-X; t0=Ts-t1-t2; <span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†T1ã€T2è¿›è¡Œé¥±å’Œå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(t1+t2&gt;Ts)</span><br><span class="line">    &#123;</span><br><span class="line">    	t1=t1*Ts/(t1+t2);</span><br><span class="line">    	t2=t2*Ts/(t1+t2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸‰ä¸ªåˆ‡æ¢æ—¶åˆ»Taonã€Tbonã€Tcon</span></span><br><span class="line">    Taon=t0/<span class="number">4</span>;</span><br><span class="line">    Tbon=t0/<span class="number">4</span>+t1/<span class="number">2</span>;</span><br><span class="line">    Tcon=t0/<span class="number">4</span>+t1/<span class="number">2</span>+t2/<span class="number">2</span>;</span><br><span class="line">    <span class="comment">//æ ¹æ®æ‰‡åŒºç»™åˆ‡æ¢æ—¶åˆ»Taonã€Tbonã€Tcon</span></span><br><span class="line">    <span class="keyword">switch</span>(sec)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;Ta=Taon; Tb=Tbon; Tc=Tcon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;Ta=Tbon; Tb=Taon; Tc=Tcon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;Ta=Tcon; Tb=Taon; Tc=Tbon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: &#123;Ta=Tcon; Tb=Tbon; Tc=Taon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>: &#123;Ta=Tbon; Tb=Tcon; Tc=Taon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: &#123;Ta=Taon; Tb=Tcon; Tc=Tbon; <span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç»™Aã€Bã€Cçš„æ¯”è¾ƒå¯„å­˜å™¨èµ‹å€¼</span></span><br><span class="line">    EPwm1Regs.CMPA.half.CMPA = Ta*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    EPwm1Regs.CMPB = Ta*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    EPwm2Regs.CMPA.half.CMPA = Tb*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    EPwm2Regs.CMPB = Tb*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    EPwm3Regs.CMPA.half.CMPA = Tc*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    EPwm3Regs.CMPB = Tc*EPwm1Regs.TBPRD/(Ts/<span class="number">2</span>);</span><br><span class="line">    tctr=(<span class="keyword">double</span>)(tctr+(<span class="keyword">double</span>)Ts);</span><br><span class="line">    k1++;</span><br><span class="line">	<span class="keyword">if</span>(tctr&gt;=<span class="number">0.02</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		tctr=<span class="number">0</span>;</span><br><span class="line">		k1=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//    Voltage1[k1]=EPwm1Regs.CMPA.half.CMPA ;//è§‚å¯Ÿç”¨</span></span><br><span class="line">  Voltage1[k1]=Ta;</span><br><span class="line">	EPwm1Regs.ETCLR.bit.INT = <span class="number">1</span>;             <span class="comment">//æ¸…é™¤æ ‡å¿—ä½</span></span><br><span class="line">	PieCtrlRegs.PIEACK.all = PIEACK_GROUP3;  <span class="comment">//æ¸…é™¤åº”ç­”ä½,ä¸­æ–­ç»“æŸåå‡†å¤‡ä¸‹ä¸€æ¬¡ä¸­æ–­å“åº”ã€‚</span></span><br><span class="line">	EINT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†å·¥ç¨‹ç¼–è¯‘ä¹‹åè§‚å¯ŸePWM1ã€ePWM2ã€ePWM3æ¨¡å—çš„è„‰å†²æ³¢å½¢ï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/0084Tjdoly1gu4wnbyxh0j61400u04hu02.jpg" alt="image"> <img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gu4won3eltj31400u07o9.jpg" alt="image"> <img data-src="https://tvax4.sinaimg.cn/large/0084Tjdoly1gu4wrrfuulj61400u0kbb02.jpg" alt="image"></p>
<p>å¯ä»¥å‘ç°æ³¢å½¢æ˜¯æ­£ç¡®çš„ï¼Œ10mså†…æœ‰äº”ä¸ªå‚è€ƒæ³¢ï¼Œå³50Hzï¼ŒPWMçš„é¢‘ç‡ä¸º12.8kHzï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆç”¨ä¹‹å‰çš„çº¿æ˜¾ç¤ºçš„è½½æ³¢é¢‘ç‡ä¸º25.6kHzï¼Œç”¨Probe Compæµ‹å¾—çš„è½½æ³¢é¢‘ç‡ä¸º12.8kHzï¼Œæ˜¯ä¸è‡ªå·±è®¾å®šçš„æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>é‚£ä¹ˆæ¥ä¸‹æ¥éœ€è¦æƒ³çš„æ˜¯å¦‚ä½•å»æ”¹å˜Tså’Œå„ä¸ªæ¨¡å—çš„TBPRDçš„å€¼ã€‚</p>
<p>æ€è·¯ï¼šåœ¨ePWM2ä¸­æ–­ä¸­è¿›è¡ŒTså’ŒTBPRDå€¼çš„ä¿®æ”¹ï¼Œç”±äºePWM1çš„ä¸­æ–­æ‰§è¡Œå®Œä¹‹åï¼Œç´§æ¥ç€æ‰§è¡ŒePMW2çš„ä¸­æ–­ï¼Œå› ä¸ºePWM1ã€ePWM2åˆå§‹åŒ–è®¾ç½®çš„éƒ½æ˜¯åœ¨TBCTR=0çš„æ—¶å€™è¿›å…¥ä¸­æ–­ï¼Œæ‰€ä»¥åœ¨ePWM1ä¸­æ–­æ‰§è¡Œå®Œä¹‹åï¼Œé‚£ä¹ˆæ¯”è¾ƒå¯„å­˜å™¨çš„å€¼å·²ç»æœ‰äº†ï¼ŒtctråŠ ä¸Šä¸Šä¸€ä¸ªTsçš„å€¼ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªæ—¶åˆ»ï¼Œå‡†å¤‡å¥½ä¸‹ä¸€ä¸ªçš„æ¯”è¾ƒï¼Œä¹‹åè¿›å…¥ePWM2ä¸­æ–­ï¼Œæˆ‘è®¾ç½®k2è¿›è¡Œè®¡æ•°ï¼Œç”¨ä¸€ä¸ªifï¼šå½“k2æ˜¯å¥‡æ•°çš„æ—¶å€™ï¼Œæ”¹å˜ä¸€ä¸ªTsï¼Œæ›´æ–°TBPRDçš„å€¼ï¼›å½“k2æ˜¯å¶æ•°çš„æ—¶å€™ï¼Œæ”¹å˜ä¸€ä¸ªTsï¼Œæ›´æ–°TBPRDçš„å€¼ï¼›ä¹‹åk2++ï¼›è¿™æ ·ePWM2ä¸­æ–­æ‰§è¡Œå®Œä¹‹åï¼Œå°±æ›´æ–°äº†æ–°çš„Tså’ŒTBPRDï¼Œæ­£å¥½å’Œæ–°çš„tctrçš„æ—¶åˆ»è¿›è¡Œæ¯”è¾ƒâ€¦</p>
<p>ä½†æ˜¯å‘ç°ä¸­æ–­è¿›äº†ä¸¤æ¬¡å°±è·‘é£äº†â€¦ï¼Œå¦‚æœå°†å…¶ä»–çš„ä»£ç æ³¨é‡Šæ‰k2æ˜¯åœ¨ä¸€ç›´åŠ çš„ã€‚</p>
<h3 id="æ˜ŸæœŸå››"><a href="#æ˜ŸæœŸå››" class="headerlink" title="æ˜ŸæœŸå››"></a>æ˜ŸæœŸå››</h3><p>å°†ä¸­æ–­æœåŠ¡å­ç¨‹åºçš„ä»£ç å…¨éƒ¨æ³¨é‡Šï¼Œä¿ç•™ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.CMPA.half.CMPA = <span class="number">0.1</span>*EPwm1Regs.TBPRD;</span><br><span class="line">EPwm1Regs.CMPB = <span class="number">0.1</span>*EPwm1Regs.TBPRD;</span><br><span class="line">EPwm2Regs.CMPA.half.CMPA = <span class="number">0.5</span>*EPwm1Regs.TBPRD;</span><br><span class="line">EPwm2Regs.CMPB = <span class="number">0.5</span>*EPwm1Regs.TBPRD;</span><br><span class="line">EPwm3Regs.CMPA.half.CMPA = <span class="number">0.9</span>*EPwm1Regs.TBPRD;</span><br><span class="line">EPwm3Regs.CMPB = <span class="number">0.9</span>*EPwm1Regs.TBPRD;</span><br></pre></td></tr></table></figure>
<p>ä»¥ePWM1æ¨¡å—çš„æ³¢å½¢ä¸ºä¾‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.CMPA.half.CMPA = <span class="number">0.1</span>*EPwm1Regs.TBPRD;</span><br><span class="line">EPwm1Regs.CMPB = <span class="number">0.1</span>*EPwm1Regs.TBPRD;</span><br></pre></td></tr></table></figure>
<p>ç†è®ºåˆ†æè¾“å‡ºçš„ePWM1xAçš„æ³¢å½¢å’ŒePWM1xBçš„æ³¢å½¢ä¸ºï¼Œå³ePWM1xAè¾“å‡ºè„‰å†²çš„å ç©ºæ¯”ä¸º0.9ï¼ŒePWM1xBè¾“å‡ºè„‰å†²çš„å ç©ºæ¯”ä¸º0.1ï¼š</p>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gu4wuyqzwzj616s0rwnol02.jpg" alt="image"></p>
<p><img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gu4wv6dbzrj60uo0lhgul02.jpg" alt="image"></p>
<p>åœ¨è®¾ç½®å®ŒåŠ¨ä½œæ¨¡å—ä¹‹åï¼Œæˆ‘ä»¬æ¥ç€éœ€è¦è®¾ç½®æ­»åŒºæ¨¡å—ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/Set the dead P213ã€<span class="number">214</span>é¡µ</span><br><span class="line">EPwm1Regs.DBCTL.all=<span class="number">0x0</span>;</span><br><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x3</span>; <span class="comment">//ePWMxBä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x3</span>; <span class="comment">//ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x1</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼›</span></span><br><span class="line">EPwm1Regs.DBRED = dead_time;<span class="comment">//è®¾å®šä¸Šå‡æ²¿æ­»åŒºæ—¶é—´</span></span><br><span class="line">EPwm1Regs.DBFED = dead_time;<span class="comment">//è®¾å®šä¸‹é™æ²¿æ­»åŒºæ—¶é—´</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æ­»åŒºæ¨¡å—çš„è®¾ç½®æœ‰ä¸ªé—®é¢˜å°±æ˜¯æœ‰äº›æ¨¡å¼è®¾ç½®ä¹‹åï¼ŒePWM1xAæˆ–è€…ePWM1xBçš„æ³¢å½¢å¯èƒ½ä¼šå‘ç”Ÿç¿»è½¬ã€‚äºæ˜¯å°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è®¾ç½®æ¨¡å¼è¿›è¡Œäº†æ±‡æ€»ä¸æ•´ç†ï¼š</p>
<p>1ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º00ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</strong>ï¼Œå³OUT_MODEä½ä¸º00ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢æ­£ç¡®</strong>ï¼Œä¸éœ€è¦è¿›è¡Œç¿»è½¬ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x0ï¼ŒOUT_MODE = 0x0ï¼ŒPOLSEL =0x0</p>
<p>2ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º00ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶</strong>ï¼Œå³OUT_MODEä½ä¸º01ï¼›<strong>ePWMxBçš„è¾“å‡ºæ³¢å½¢é»˜è®¤ä¼šå‘ç”Ÿç¿»è½¬ï¼ŒTIé»˜è®¤çš„ï¼</strong>å¤ªé˜´é—´äº†ï¼å¦‚æœè¦çœ‹æ­£ç¡®çš„ePWMxBçš„æ³¢å½¢ï¼Œéœ€è¦å°†ææ€§é€‰æ‹©ä¸ºePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼Œå³POLSELä½ä¸º0x2ï¼›è¿™æ ·è¾“å‡ºçš„ePWMxAå’ŒePWMxBçš„æ³¢å½¢å°±æ˜¯å¯¹çš„ï¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x1</span>; <span class="comment">//**ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶**</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x2</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x0ï¼ŒOUT_MODE = 0x1ï¼ŒPOLSEL =0x2</p>
<p>3ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º00ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶</strong>ï¼Œå³OUT_MODEä½ä¸º10ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢æ­£ç¡®</strong>ï¼Œä¸éœ€è¦è¿›è¡Œç¿»è½¬ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x2</span>; <span class="comment">//ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œ**ä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶**</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x0ï¼ŒOUT_MODE = 0x2ï¼ŒPOLSEL =0x0</p>
<p>4ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º00ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œå³OUT_MODEä½ä¸º11ï¼›<strong>ePWMxBçš„è¾“å‡ºæ³¢å½¢é»˜è®¤ä¼šå‘ç”Ÿç¿»è½¬ï¼ŒTIé»˜è®¤çš„ï¼</strong>å¤ªé˜´é—´äº†ï¼å¦‚æœè¦çœ‹æ­£ç¡®çš„ePWMxBçš„æ³¢å½¢ï¼Œéœ€è¦å°†ææ€§é€‰æ‹©ä¸ºePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼Œå³POLSELä½ä¸º0x2ï¼›è¿™æ ·è¾“å‡ºçš„ePWMxAå’ŒePWMxBçš„æ³¢å½¢å°±æ˜¯å¯¹çš„ï¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x3</span>; <span class="comment">//ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x2</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x0ï¼ŒOUT_MODE = 0x3ï¼ŒPOLSEL =0x2</p>
<p>5ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxAæ˜¯ä¸‹é™æ²¿è¾“å…¥æº</strong>ï¼ŒIN_MODE=01ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</strong>ï¼ŒOUT_MODEä½=00ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢æ­£ç¡®</strong>ï¼Œä¸éœ€è¦è¿›è¡Œç¿»è½¬ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x1</span>; <span class="comment">//ePWMxBä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxAä½œä¸ºä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x1ï¼ŒOUT_MODE = 0x0ï¼ŒPOLSEL =0x0</p>
<p>6ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAæ˜¯ä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒePWMxBä½œä¸ºä¸Šå‡æ²¿è¾“å…¥æºï¼ŒIN_MODE=01ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶</strong>ï¼ŒOUT_MODEä½=01ï¼›<strong>æ­¤æ—¶ePWMxBçš„è¾“å‡ºæ³¢å½¢ä¼šå‘ç”Ÿç¿»è½¬ï¼ŒTIé»˜è®¤çš„ï¼›</strong>é‚£ä¹ˆè§‚å¯Ÿæ­£ç¡®çš„ePWMxAã€ePWMxBæ³¢å½¢å°±éœ€è¦è®¾ç½®ePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼Œå³POSELä½ä¸º10ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x1</span>; <span class="comment">//**ePWMxAæ˜¯ä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº**ï¼ŒePWMxBä½œä¸ºä¸Šå‡æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x1</span>; <span class="comment">//ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œ**ä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶**</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x2</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x1ï¼ŒOUT_MODE = 0x1ï¼ŒPOLSEL =0x2</p>
<p>7ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxAæ˜¯ä¸‹é™æ²¿è¾“å…¥æº</strong>ï¼ŒIN_MODE=01ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶</strong>ï¼ŒOUT_MODEä½=10ï¼›<strong>æ­¤æ—¶ePWMxAçš„è¾“å‡ºæ³¢å½¢ä¼šå‘ç”Ÿç¿»è½¬ï¼ŒTIé»˜è®¤çš„</strong>ï¼›é‚£ä¹ˆè§‚å¯Ÿæ­£ç¡®çš„ePWMxAã€ePWMxBæ³¢å½¢å°±éœ€è¦è®¾ç½®ePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼Œå³POSELä½ä¸º01ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x1</span>; <span class="comment">//ePWMxBä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxAä½œä¸ºä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x2</span>; <span class="comment">//ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x1</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x1ï¼ŒOUT_MODE = 0x2ï¼ŒPOLSEL =0x1</p>
<p>8ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxAæ˜¯ä¸‹é™æ²¿è¾“å…¥æº</strong>ï¼ŒIN_MODE=01ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼ŒOUT_MODEä½=11ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢éƒ½ä¼šå‘ç”Ÿç¿»è½¬ï¼ŒTIé»˜è®¤çš„</strong>ï¼›é‚£ä¹ˆè§‚å¯Ÿæ­£ç¡®çš„ePWMxAã€ePWMxBæ³¢å½¢ï¼Œå°±éœ€è¦è®¾ç½®ePWMxAç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼Œå³POSELä½ä¸º11ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x1</span>; <span class="comment">//ePWMxBä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxAä½œä¸ºä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x3</span>; <span class="comment">//**ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶**</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x3</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x1ï¼ŒOUT_MODE = 0x3ï¼ŒPOLSEL =0x3</p>
<p>9ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxBæ˜¯ä¸‹é™æ²¿è¾“å…¥æº</strong>ï¼ŒIN_MODEä½=10ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</strong>ï¼ŒOUT_MODEä½=00ï¼›<strong>æ­¤æ—¶ePWMxAã€ePWMxBçš„è¾“å‡ºæ³¢å½¢å°±ä¸ä¼šå‘ç”Ÿç¿»è½¬</strong>ï¼›é‚£ä¹ˆè§‚å¯Ÿæ­£ç¡®çš„ePWMxAã€ePWMxBæ³¢å½¢å°±ä¸éœ€è¦è®¾ç½®POSELä½ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x2</span>; <span class="comment">//ePWMxAä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxBä½œä¸ºä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x2ï¼ŒOUT_MODE = 0x0ï¼ŒPOLSEL =0x0</p>
<p>10ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBæ˜¯ä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒePWMxAä½œä¸ºä¸Šå‡æ²¿è¾“å…¥æºï¼ŒIN_MODE=10ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶</strong>ï¼ŒOUT_MODEä½=01ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢æ­£ç¡®</strong>ï¼Œä¸éœ€è¦è¿›è¡Œç¿»è½¬ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x2</span>; <span class="comment">//**ePWMxBæ˜¯ä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº**ï¼ŒePWMxAä½œä¸ºä¸Šå‡æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x1</span>; <span class="comment">//ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x2ï¼ŒOUT_MODE = 0x1ï¼ŒPOLSEL =0x0</p>
<p>11ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxBæ˜¯ä¸‹é™æ²¿è¾“å…¥æº</strong>ï¼ŒIN_MODEä½=10ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶</strong>ï¼ŒOUT_MODEä½=10ï¼›<strong>æ­¤æ—¶ePWMxAã€ePWMxBçš„è¾“å‡ºæ³¢å½¢å°±ä¸ä¼šå‘ç”Ÿç¿»è½¬</strong>ï¼›é‚£ä¹ˆè§‚å¯Ÿæ­£ç¡®çš„ePWMxAã€ePWMxBæ³¢å½¢å°±ä¸éœ€è¦è®¾ç½®POSELä½ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x2</span>; <span class="comment">//ePWMxAä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxBä½œä¸ºä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x2</span>; <span class="comment">//ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x2ï¼ŒOUT_MODE = 0x2ï¼ŒPOLSEL =0x0</p>
<p>12ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨å•è¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxAä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxBæ˜¯ä¸‹é™æ²¿è¾“å…¥æº</strong>ï¼ŒIN_MODEä½=10ï¼›è¾“å‡ºæ§åˆ¶ä¸º<strong>ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼ŒOUT_MODEä½=11ï¼›<strong>æ­¤æ—¶ePWMxAã€ePWMxBçš„è¾“å‡ºæ³¢å½¢å°±ä¸ä¼šå‘ç”Ÿç¿»è½¬</strong>ï¼›é‚£ä¹ˆè§‚å¯Ÿæ­£ç¡®çš„ePWMxAã€ePWMxBæ³¢å½¢å°±ä¸éœ€è¦è®¾ç½®POSELä½ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x2</span>; <span class="comment">//ePWMxAä½œä¸ºä¸Šå‡æ²¿å»¶æ—¶è¾“å…¥æºï¼ŒePWMxBä½œä¸ºä¸‹é™æ²¿å»¶æ—¶è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x3</span>; <span class="comment">//ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x2ï¼ŒOUT_MODE = 0x3ï¼ŒPOLSEL =0x0</p>
<p>13ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º11ï¼Œè¾“å‡ºæ§åˆ¶ä¸ºePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—ï¼Œå³OUT_MODEä½ä¸º00ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢æ­£ç¡®</strong>ï¼Œä¸éœ€è¦è¿›è¡Œç¿»è½¬ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x3</span>; <span class="comment">//ePWMxBä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x0</span>; <span class="comment">//ePWMxAå’ŒePWMxBä¸ç»è¿‡æ­»åŒºæ¨¡å—</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x3ï¼ŒOUT_MODE = 0x0ï¼ŒPOLSEL =0x0</p>
<p>14ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º11ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶</strong>ï¼Œå³OUT_MODEä½ä¸º01ï¼›<strong>æ­¤æ—¶ePWMxAå’ŒePWMxBçš„è¾“å‡ºæ³¢å½¢æ­£ç¡®</strong>ï¼Œä¸éœ€è¦è¿›è¡Œç¿»è½¬ï¼Œå³POSELä½ä¸º00ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x3</span>; <span class="comment">//ePWMxBä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x1</span>; <span class="comment">//**ç¦æ­¢ä¸Šå‡æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸‹é™æ²¿å»¶æ—¶**</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x0</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x3ï¼ŒOUT_MODE = 0x1ï¼ŒPOLSEL =0x0</p>
<p>15ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º11ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶</strong>ï¼Œå³OUT_MODEä½ä¸º10ï¼›<strong>æ­¤æ—¶ePWMxAçš„è¾“å‡ºæ³¢å½¢å‘ç”Ÿäº†ç¿»è½¬</strong>ï¼Œå¦‚æœè¦çœ‹æ­£ç¡®çš„ePWMxAçš„æ³¢å½¢ï¼Œéœ€è¦å°†ææ€§é€‰æ‹©ä¸ºePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼Œå³POLSELä½ä¸º0x1ï¼›è¿™æ ·è¾“å‡ºçš„ePWMxAå’ŒePWMxBçš„æ³¢å½¢å°±æ˜¯å¯¹çš„ï¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x3</span>; <span class="comment">//ePWMxBä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x2</span>; <span class="comment">//**ç¦æ­¢ä¸‹é™æ²¿å»¶æ—¶ï¼Œä½¿èƒ½ä¸Šå‡æ²¿å»¶æ—¶**</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x1</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x3ï¼ŒOUT_MODE = 0x2ï¼ŒPOLSEL =0x1</p>
<p>16ã€å¦‚æœ<strong>æ­»åŒºä½¿ç”¨åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œé€‰æ‹©<strong>ePWMxBä½œä¸ºåŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æº</strong>ï¼ŒIN_MODEä½ä¸º11ï¼Œè¾“å‡ºæ§åˆ¶ä¸º<strong>ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</strong>ï¼Œå³OUT_MODEä½ä¸º11ï¼›<strong>ePWMxAçš„è¾“å‡ºæ³¢å½¢é»˜è®¤ä¼šå‘ç”Ÿç¿»è½¬ï¼ŒTIé»˜è®¤çš„ï¼</strong>å¤ªé˜´é—´äº†ï¼å¦‚æœè¦çœ‹æ­£ç¡®çš„ePWMxAçš„æ³¢å½¢ï¼Œéœ€è¦å°†ææ€§é€‰æ‹©ä¸ºePWMxAç¿»è½¬ï¼ŒePWMxBä¸ç¿»è½¬ï¼Œå³POLSELä½ä¸º0x1ï¼›è¿™æ ·è¾“å‡ºçš„ePWMxAå’ŒePWMxBçš„æ³¢å½¢å°±æ˜¯å¯¹çš„ï¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.DBCTL.bit.IN_MODE = <span class="number">0x3</span>; <span class="comment">//ePWMxBä½œä¸ºåŒè¾¹æ²¿è¾“å…¥æº</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x3</span>; <span class="comment">//ä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</span></span><br><span class="line">EPwm1Regs.DBCTL.bit.POLSEL =<span class="number">0x1</span>;<span class="comment">//ææ€§é€‰æ‹©æ§åˆ¶ï¼ŒePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬ï¼›</span></span><br></pre></td></tr></table></figure>
<p>IN_MODE = 0x3ï¼ŒOUT_MODE = 0x3ï¼ŒPOLSEL =0x1</p>
<p>ä»¥ååªè¦ç”¨åˆ°æ­»åŒºï¼Œé€‰æ‹©éœ€è¦çš„æ­»åŒºæ¨¡å¼ï¼Œå¹¶å°†å¯¹åº”çš„ä»£ç è¿›è¡Œè®¾ç½®ï¼Œåˆ™è¾“å‡ºçš„ePWMxAå’ŒePWMxBçš„æ³¢å½¢å°±æ˜¯æ­£ç¡®çš„ã€‚ä¸ä¼šå‡ºç°å“ªä¸ªæ¨¡å—æ³¢å½¢ç¿»è½¬çš„é—®é¢˜ã€‚ä¹‹å‰æŸ¥çœ‹æ³¢å½¢å‘ç°æ³¢å½¢ä¸å¯¹ï¼Œå‘äº†æˆ‘ä¸€æ•´å¤©ï¼æœ€åæ‰å‘ç°è¿™ä¸ªé—®é¢˜ğŸ˜­ï¼Œæ°”å¾—æˆ‘æŠŠæ‰€æœ‰çš„æƒ…å†µå…¨éƒ¨æ€»ç»“å‡ºæ¥äº†ï¼</p>
<h3 id="æ˜ŸæœŸäº”"><a href="#æ˜ŸæœŸäº”" class="headerlink" title="æ˜ŸæœŸäº”"></a>æ˜ŸæœŸäº”</h3><p>å°†æ­»åŒºæ¨¡å¼è®¾ç½®æ€»ç»“æˆä¸€ä¸ªã€Šå…³äºTMS320F28335çš„ePWMæ¨¡å—çš„æ­»åŒºæ¨¡å¼è®¾ç½®ã€‹æ–‡æ¡£ï¼Œä»¥ä¾¿ä¹‹åè¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.TBPRD=<span class="number">5000</span>;</span><br><span class="line">EPwm2Regs.TBPRD=<span class="number">3000</span>;</span><br><span class="line">EPwm3Regs.TBPRD=<span class="number">2500</span>;</span><br><span class="line">EPwm1Regs.CMPA.half.CMPA = <span class="number">2000</span>;</span><br><span class="line">EPwm1Regs.CMPB = <span class="number">2000</span>;</span><br><span class="line">EPwm2Regs.CMPA.half.CMPA = <span class="number">2000</span>;</span><br><span class="line">EPwm2Regs.CMPB = <span class="number">2000</span>;</span><br><span class="line">EPwm3Regs.CMPA.half.CMPA = <span class="number">2000</span>;</span><br><span class="line">EPwm3Regs.CMPB = <span class="number">2000</span>;</span><br></pre></td></tr></table></figure>
<p>å°†ePWM1ã€2ã€3æ¨¡å—çš„TBPRDçš„å€¼è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ”¹æˆä¸€ä¸ªå®šå€¼ï¼Œç„¶åè®©ä¸‰ä¸ªæ¯”è¾ƒå¯„å­˜å™¨çš„å€¼è®¾ç½®æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·ç¼–è¯‘ä¹‹åè§‚å¯ŸePWM1ã€ePWM2ã€ePWM3æ¨¡å—çš„è„‰å†²æ³¢å½¢çš„å ç©ºæ¯”å°±å¯çŸ¥é“TBPRDçš„å€¼æ˜¯å¦å‘ç”Ÿæ”¹å˜ã€‚ç¼–è¯‘ä¹‹åå‘ç°TBPRDçš„å€¼æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œæ‰€ä»¥å¯ä»¥å®ç°å¯¹TBPRDè¿›è¡Œèµ‹å€¼ï¼</p>
<p>å½“Tsçš„é¢‘ç‡å¤ªé«˜æ—¶ï¼Œè¿›å…¥ä¸­æ–­çš„äº‹ä»¶å¤ªçŸ­è¿˜æ˜¯DSPçš„ç®—åŠ›ä¸è¶³ï¼Œè¾“å‡ºçš„å‚è€ƒæ³¢çš„é¢‘ç‡ä¸æ­£ç¡®ï¼›æœ€å¤§çš„Tsé¢‘ç‡è®¾ç½®ä¸º22000Hzå·¦å³ã€‚</p>
<p>å½“è®¾ç½®çš„é¢‘ç‡è¾ƒä½æ—¶å€™ï¼Œk2åœ¨å˜åŒ–çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ³¢å½¢è„‰å†²æ¯éš”ä¸€ä¸ªå‘¨æœŸå ç©ºæ¯”å°±ä¼šå‘ç”Ÿä¸€æ¬¡å˜åŒ–ã€‚ä¸ç¼–ç¨‹æƒ³è¦å®ç°çš„è¦æ±‚ä¸€è‡´ã€‚åˆ˜è€å¸ˆè¯´å†æƒ³æƒ³è¿˜èƒ½ä¸èƒ½å‡å°‘ç¨‹åºçš„è¿ç®—é‡ã€‚å› ä¸ºè½½æ³¢é¢‘ç‡é«˜ï¼Œè¯´æ˜æ—¶åŸºå¯„å­˜å™¨ä¸€ä¸ªå‘¨æœŸç‰¹åˆ«å°ï¼Œåˆ™å¯èƒ½ä¸­æ–­è¿˜æ²¡ç»“æŸå°±å‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªä¸­æ–­äº†ã€‚ä¼šæŠŠç¨‹åºæŠ›å¼ƒé‡æ–°è¿›å…¥ä¸­æ–­æ‰§è¡Œç¨‹åºã€‚</p>
<h3 id="æ˜ŸæœŸå…­"><a href="#æ˜ŸæœŸå…­" class="headerlink" title="æ˜ŸæœŸå…­"></a>æ˜ŸæœŸå…­</h3><p>å°†æš‘å‡çš„ä¸€äº›æ€»ç»“è¿›è¡Œäº†æ±‡æ€»ä¸æ•´ç†ï¼Œåˆ˜è€å¸ˆè¯´å«æˆ‘å°†æ‰€æœ‰çš„å†…å®¹æ•´ç†æˆæ–‡æ¡£ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ï¼Œå¹¶å‡†å¤‡å°†PWMçš„æ•´ä¸ªç¼–ç¨‹çš„æµç¨‹å’Œåˆ˜è€å¸ˆè¿›è¡Œè®²è§£ã€‚äºæ˜¯é¦–å…ˆå°†ç­‰å¹…å€¼Clarkeå˜æ¢å’Œç­‰åŠŸç‡Clarkeå˜æ¢æ•´ç†æˆã€Šå…³äºç­‰å¹…å€¼Clarkeå˜æ¢å’Œç­‰åŠŸç‡Clarkeå˜æ¢çš„ç†è§£ã€‹æ–‡æ¡£ï¼Œå°†ç©ºé—´çŸ¢é‡çš„æ¦‚å¿µå’ŒSVPWMçš„å·¥ä½œåŸç†æ•´ç†æˆã€Šå…³äºç©ºé—´çŸ¢é‡çš„æ¦‚å¿µå’ŒSVPWMçš„å·¥ä½œåŸç†ã€‹æ–‡æ¡£ã€‚å°†CCSçƒ§å†™çš„é—®é¢˜æ•´ç†æˆåŠŸã€Šå…³äºCCSçƒ§å†™FLASHå’Œçƒ§å†™RAMçš„ä¸€äº›ç†è§£ï¼Œå¦‚ä½•ä¿®æ”¹CMDæ–‡ä»¶ã€‹æ–‡æ¡£ï¼Œå°†Tekç¤ºæ³¢å™¨å¦‚ä½•å¯¼å‡ºæ³¢å½¢æ•´ç†æˆã€Šå…³äºTekç¤ºæ³¢å™¨å¯¼å‡ºæ³¢å½¢çš„æ–¹æ³•ã€‹æ–‡æ¡£ï¼Œä»¥åŠæœ€å‘äººçš„æ­»åŒºæ¨¡å—è®¾ç½®é—®é¢˜æ•´ç†æˆã€Šå…³äºTMS320F28335çš„ePWMæ¨¡å—çš„æ­»åŒºæ¨¡å¼è®¾ç½®ã€‹æ–‡æ¡£ï¼š</p>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gu4x8ji6osj60jr080td202.jpg" alt="image"></p>
<h2 id="ä¸€äº›æ„Ÿæ‚ŸğŸ§ "><a href="#ä¸€äº›æ„Ÿæ‚ŸğŸ§ " class="headerlink" title="ä¸€äº›æ„Ÿæ‚ŸğŸ§ "></a>ä¸€äº›æ„Ÿæ‚ŸğŸ§ </h2><p>å¤§å­¦å–å¾—çš„æ‰€æœ‰æˆç»©ä¸€åˆ‡æ¸…é›¶ï¼Œç ”ç©¶ç”Ÿå¤§å®¶åˆéƒ½æ˜¯åŒä¸€ä¸ªèµ·è·‘çº¿ï¼Œå½“ç„¶å¤§å­¦ä¹‹åè‡ªå·±çš„èƒ½åŠ›è¿˜æ˜¯åœ¨çš„ï¼Œå¸Œæœ›ç ”ç©¶ç”Ÿèƒ½è®©è‡ªå·±çš„å…¶ä»–å¼±é¡¹å¾—åˆ°æå‡ã€‚</p>
<p>å‘ç°ç¡ä¸€ä¸ªå¥½è§‰çœŸçš„èƒ½æ”¹å˜å¿ƒæƒ…ï¼Œä¸€èˆ¬è‡ªå·±æ™šä¸Šç¡å¾—å¥½ï¼Œç¬¬äºŒå¤©çŠ¶æ€å°±è¿˜è¡Œï¼Œæ¯å¤©éƒ½è¦è¿åŠ¨ï¼Œè‡ªå·±æ˜¯é‚£ç§ä¸è¿åŠ¨å°±å¾ˆéš¾å—çš„ğŸ˜‚ï¼Œè¿åŠ¨ä¹‹åæ„Ÿè§‰æ•´ä¸ªäººéƒ½å¾ˆèˆ’æœï¼</p>
<p>ç ”ç©¶ç”Ÿå››äººå¯ï¼Œæ–°å®¤å‹æœ‰ä¸€ä¸ªæ˜¯è¡Œæ”¿ä¿ç ”çš„å­¦é•¿ï¼Œè¿˜æœ‰ä¸€ä¸ªäºŒæˆ˜çš„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åŒä¸€å±Šçš„æœ¬ç§‘åŒå­¦ï¼Œç ”ç©¶ç”Ÿå‘ç°å¾ˆå¤šäººéƒ½ä¸æ˜¯åŒé¾„äººäº†â€¦â€¦ç”šè‡³è¿˜æœ‰ä¸ªä¸‰æˆ˜çš„å­¦é•¿ã€‚</p>
<p>ç ”ç©¶ç”Ÿæ–°çš„å®¤å‹äººéƒ½è¿˜ä¸é”™ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªå®¤å‹ä¼šæ‰“å‘¼å™œğŸ¤¦â€ï¼Œä¸è¿‡æ¯”æˆ‘å¦ä¸€ä¸ªåŒå­¦çš„å®¤å‹å¥½å¤šäº†ï¼Œä»–çš„å®¤å‹æœ‰ä¸€ä¸ªæ¯å¤©å…­ç‚¹åŠèµ·æ¥ï¼Œè¿˜æœ‰ä¸€ä¸ªç¡è§‰æ‰“å‘¼å™œï¼Œæˆ‘çš„å¦ˆè€¶â€¦æ˜¯æˆ‘çœŸçš„å—ä¸äº†ğŸ˜“ï¼Œè¿˜å¥½æˆ‘ç¡è§‰ä¸æ‰“å‘¼å™œï¼Œä¸ç„¶ä¹Ÿä¼šè¢«â€œå«Œå¼ƒâ€</p>
<h2 id="å“²æ€å­¦æ„ğŸ“š"><a href="#å“²æ€å­¦æ„ğŸ“š" class="headerlink" title="å“²æ€å­¦æ„ğŸ“š"></a>å“²æ€å­¦æ„ğŸ“š</h2><p>å½“ä½ è€äº†ï¼Œå›é¡¾ä¸€ç”Ÿï¼Œå°±ä¼šå‘è§‰ï¼šä»€ä¹ˆæ—¶å€™å‡ºå›½è¯»ä¹¦ã€ä»€ä¹ˆæ—¶å€™å†³å®šåšç¬¬ä¸€ä»½èŒä¸šã€ä½•æ—¶é€‰å®šäº†å¯¹è±¡è€Œæ‹çˆ±ã€ä»€ä¹ˆæ—¶å€™ç»“å©šï¼Œå…¶å®éƒ½æ˜¯å‘½è¿çš„å·¨å˜ã€‚åªæ˜¯å½“æ—¶ç«™åœ¨ä¸‰å²”è·¯å£ï¼Œçœ¼è§é£äº‘åƒæ¨¯ï¼Œä½ ä½œå‡ºæŠ‰æ‹©çš„é‚£ä¸€æ—¥ï¼Œåœ¨æ—¥è®°ä¸Šï¼Œç›¸å½“çš„æ²‰é—·å’Œå¹³å‡¡ï¼Œå½“æ—¶è¿˜ä»¥ä¸ºæ˜¯ç”Ÿå‘½ä¸­æ™®é€šçš„ä¸€å¤©ã€‚â€”â€” é™¶æ°ã€Šæ€é¹Œé¹‘çš„å°‘å¥³ã€‹</p>
<p>æ¯ä¸ªäººéƒ½ä¼šæœ‰ä¸€æ®µå¼‚å¸¸è‰°éš¾çš„æ—¶å…‰ï¼Œç”Ÿæ´»çš„å‹åŠ›ï¼Œå·¥ä½œçš„å¤±æ„ï¼Œå­¦ä¸šçš„å‹åŠ›ï¼Œçˆ±çš„æƒ¶æƒ¶ä¸å¯ç»ˆæ—¥ï¼ŒæŒºè¿‡æ¥çš„ï¼Œäººç”Ÿå°±ä¼šè±ç„¶å¼€æœ—ï¼ŒæŒºä¸è¿‡æ¥çš„ï¼Œæ—¶é—´ä¹Ÿä¼šæ•™ä½ ï¼Œæ€ä¹ˆä¸å®ƒä»¬æ¡æ‰‹è¨€å’Œï¼Œæ‰€ä»¥ä¸å¿…å®³æ€•çš„ã€‚â€”â€”æ¨ç»›</p>
<p>æ‰€è°“é•¿å¤§ï¼Œå°±æ˜¯ä½ çŸ¥é“é‚£æ˜¯ä»€ä¹ˆäº‹ï¼›æ‰€è°“æˆç†Ÿï¼Œå°±æ˜¯ä½ çŸ¥é“åæ•…æ„è¯´ä¸çŸ¥é“ã€‚â€”â€”ææ•–</p>
<p>æ²¡æœ‰äººæ„¿æ„ä¸€ç›´å‘ä¸‹å…¼å®¹ï¼Œä¹Ÿæ²¡æœ‰äººç”˜äºä¸€ç›´å‘ä¸Šä»°æœ›ï¼ŒçœŸæ­£é è°±åˆé•¿ä¹…çš„å…³ç³»ï¼Œæ˜¯æˆ‘ä»¬è™½ç„¶è”ç³»å¾—ä¸å¤šï¼Œå´å¯ä»¥å§‹ç»ˆä¸å¯¹æ–¹ä¿æŒåŒé¢‘ã€‚é»˜å¥‘ç›¸çŸ¥çš„å…³ç³»ï¼Œä¸éœ€è¦å¯’æš„ã€‚</p>
<p>æˆç†Ÿä¸åªæ˜¯çœ‹æ‡‚äº‹æƒ…ï¼Œæ›´åœ¨äºçœ‹é€äººæ€§ï¼ŒçœŸæ­£çš„æˆç†Ÿï¼Œæºäºå¯¹äººæ€§çš„æ·±åˆ»ç†è§£ï¼Œè®¤è¯†åˆ°ç¤¾ä¼šçš„å¤æ‚æ€§ï¼Œè®¤è¯†åˆ°äººæ€§çš„å¤æ‚æ€§ï¼Œä»¥å¦ç„¶çš„å§¿æ€èå…¥ç¤¾ä¼šï¼Œä¸å¯¹äººæ€§æœ‰è¿‡å¤šå¹»æƒ³å’ŒæœŸå¾…ï¼Œä¹Ÿä¸å¯¹äººæ€§æœ‰è¿‡äºæ¶åŠ£çš„è§£è¯»ã€‚</p>
<h2 id="ä¼‘æ¯å¨±ä¹ğŸ˜“"><a href="#ä¼‘æ¯å¨±ä¹ğŸ˜“" class="headerlink" title="ä¼‘æ¯å¨±ä¹ğŸ˜“"></a>ä¼‘æ¯å¨±ä¹ğŸ˜“</h2><p>æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªéå¸¸æ£’çš„çºªå½•ç‰‡ã€Šè’é‡é—´è°ã€‹ï¼</p>
<iframe src="//player.bilibili.com/player.html?aid=95576315&bvid=BV1yE411L7mS&cid=163164170&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>è’é‡é—´è°ï¼ˆè‹±èªï¼šSpy in the Wildï¼‰æ˜¯è‹±å›½ä¸€éƒ¨è‡ªç„¶çºªå½•ç‰‡ç³»åˆ—ï¼Œç”±BBCè‡ªç„¶å†å²éƒ¨ã€çº¦ç¿°Â·å”çº³åˆ¶ç‰‡å…¬å¸ã€PBSå…±åŒåˆ¶ä½œã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://ncepuee.github.io/2021/08/29/20210823-0829/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="èœèœçš„é»„">
      <meta itemprop="description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="School boy">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/29/20210823-0829/" class="post-title-link" itemprop="url">20210822-0829å‘¨æŠ¥</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-29 08:00:00" itemprop="dateCreated datePublished" datetime="2021-08-29T08:00:00+08:00">2021-08-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="æ¯å‘¨éŸ³ä¹ğŸµ"><a href="#æ¯å‘¨éŸ³ä¹ğŸµ" class="headerlink" title="æ¯å‘¨éŸ³ä¹ğŸµ"></a>æ¯å‘¨éŸ³ä¹ğŸµ</h2><p>é©¬ä¸Šå°±è¦å¼€å­¦äº†ï¼Œå¼€å­¦æ„å‘³ç€ç ”ç©¶ç”Ÿç”Ÿæ¶¯çš„æ­£å¼å¼€å§‹ï¼Œæš‘å‡åœ¨å­¦æ ¡è¢«å°ä¸€ä¸ªæš‘å‡ï¼Œè¿˜ç®—å……å®å§â€¦</p>
<iframe frameborder="0" height="80" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;"  src="//music.163.com/outchain/player?type=2&id=1299550532&auto=0&height=66"></iframe>

<h2 id="è¿åŠ¨æ­Œå•ğŸƒâ€"><a href="#è¿åŠ¨æ­Œå•ğŸƒâ€" class="headerlink" title="è¿åŠ¨æ­Œå•ğŸƒâ€"></a>è¿åŠ¨æ­Œå•ğŸƒâ€</h2><p>ç ”ç©¶ç”Ÿé‡æ–°æ¢äº†ä¸€ä¸ªè¿åŠ¨è½¯ä»¶ã€Œå°ç±³è¿åŠ¨ã€ï¼Œä¸»è¦æ˜¯ä¸€ç›´ç”¨å°ç±³æ‰‹ç¯ï¼Œæµ‹äº†å¤§å­¦ä¸‰å¹´çš„ç¡çœ æ•°æ®ï¼Œæƒ³ç€ä»¥åå°±ç”¨å°ç±³è¿åŠ¨è¿æ¥æ‰‹ç¯è·‘æ­¥çš„æ—¶å€™ç”¨æ¥æé†’è‡ªå·±è·‘äº†å¤šå°‘å…¬é‡Œï¼Œè¿™æ ·å°±ä¸ç”¨çœ‹æ‰‹æœºäº†ï¼Œä¸ªäººè§‰å¾—ä¸ç”¨ä¹°æ™ºèƒ½æ‰‹è¡¨ï¼Œæˆ‘è§‰å¾—æ‰‹ç¯å·²ç»å®Œæˆèƒ½å¤Ÿè®°å½•æ—¥å¸¸ç”Ÿæ´»äº†ã€‚</p>
<p>é€‚åˆè·‘æ­¥è¿åŠ¨çš„æ­Œå•ï¼ˆï£¿Musicï¼‰</p>
<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/cn/playlist/running-fitness-sports/pl.u-Ldbqel5u27kmjlm"></iframe>

<h2 id="å­¦ä¹ è¿›å±•âœ"><a href="#å­¦ä¹ è¿›å±•âœ" class="headerlink" title="å­¦ä¹ è¿›å±•âœ"></a>å­¦ä¹ è¿›å±•âœ</h2><h3 id="æ˜ŸæœŸä¸€"><a href="#æ˜ŸæœŸä¸€" class="headerlink" title="æ˜ŸæœŸä¸€"></a>æ˜ŸæœŸä¸€</h3><p>ç”±äºè‡ªå·±çš„ç¼–çš„ä»£ç ï¼Œä½†æ˜¯ä»£ç èƒ½ç¼–è¯‘æˆåŠŸï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆå°†ä»£ç çƒ§åˆ°ç¡¬ä»¶ä¸­ï¼Œå‡ºæ¥çš„æ³¢å½¢ä¸æ˜¯å¾ˆå¯¹ï¼Œåå¤æ£€æŸ¥ä»£ç ä¹Ÿæ²¡å‘ç°å“ªé‡Œå‡ºé”™äº†ï¼Œäºæ˜¯åªèƒ½æ‰¾åˆ˜è€å¸ˆå¸®æˆ‘è°ƒè¯•ä¸‹ï¼Œå’Œåˆ˜è€å¸ˆè°ƒè¯•äº†ä¸€ä¸ªä¸‹åˆéƒ½è¿˜æ²¡è°ƒè¯•å‡ºæ¥ï¼Œä½†æ˜¯å¯¹CCSè½¯ä»¶æœ‰æ›´æ·±åˆ»çš„äº†è§£ï¼Œäº†è§£äº†ä¸‹å¦‚ä½•æ‰“æ–­ç‚¹ï¼Œåˆ˜è€å¸ˆè¯´æˆ‘æ‰‡åŒºä¸€ç›´ä¸å¯¹ï¼Œæˆ‘ä¿¡äº†è€å¸ˆçš„è¯ï¼Œä½†æ˜¯è¿åŠ¨å®Œä¹‹åå›æ¥ï¼Œæˆ‘å‘ç°Expressionå…¶å®æ˜¯å¯ä»¥é‡‡æ ·è¿›è¡Œå®æ—¶è§‚å¯Ÿå˜é‡çš„å˜åŒ–ï¼š</p>
<p><img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gtsrcxuqijj61hc0u07wh02.jpg" alt="å®æ—¶è§‚å¯Ÿå˜é‡"></p>
<p>å’Œåˆ˜è€å¸ˆåé¦ˆä»–ç†è§£é”™äº†ï¼Œæˆ‘çš„æ‰‡åŒºæ˜¯åœ¨æ—¶åˆ»å˜åŒ–çš„ï¼Œå¹¶ä¸æ˜¯åªåœ¨ä¸¤ä¸ªæ‰‡åŒºå†…è·³â€¦â€¦å› ä¸ºExpressionå˜é‡æ˜¯æ—¶åˆ»å˜åŒ–çš„ï¼Œsecæ‰‡åŒºæ˜¯123456éƒ½æœ‰è·³å˜ï¼Œè¯´æ˜æ‰‡åŒºåˆ¤æ–­æ˜¯å¯¹çš„ã€‚</p>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gtss4y7bv3j60t70ekn8j02.jpg" alt="Expressionçš„ä½¿ç”¨"></p>
<blockquote>
<p>è¿™é‡Œè¯´æ˜ä¸‹æ€ä¹ˆä½¿ç”¨Expressionçš„åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬å°†ç¨‹åºè¿è¡Œåœ¨æ¿å­ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Expressionä¸­è§‚å¯Ÿè‡ªå·±è®¾ç½®çš„å˜é‡çš„æ•°å€¼å˜åŒ–ï¼Œç‚¹å‡»åˆ·æ–°çš„bottonå°±å¯ä»¥å®ç°å®æ—¶åˆ·æ–°ï¼Œç‚¹å‡»â–½çš„Continuous Refresh Intervalï¼Œå‡ºç°å¦‚ä¸‹çš„å¼¹çª—ï¼Œä¹‹åè®¾ç½®å€¼æœ€å°ä¸º100msï¼Œä¹Ÿå°±æ˜¯10Hzçš„åˆ·æ–°ç‡ï¼Œæœ€å¤§åªèƒ½è¿™ä¹ˆå¤§äº†ï¼è¿™æ ·å°±èƒ½å®æ—¶è§‚å¯Ÿå˜é‡æ•°æ®çš„å˜åŒ–ã€‚<br><img data-src="https://tvax4.sinaimg.cn/large/0084Tjdoly1gtssagqxstj60ss0g5k0h02.jpg"></p>
</blockquote>
<h3 id="æ˜ŸæœŸäºŒ"><a href="#æ˜ŸæœŸäºŒ" class="headerlink" title="æ˜ŸæœŸäºŒ"></a>æ˜ŸæœŸäºŒ</h3><h4 id="ROMã€FLASHã€RAMçš„åŒºåˆ«"><a href="#ROMã€FLASHã€RAMçš„åŒºåˆ«" class="headerlink" title="ROMã€FLASHã€RAMçš„åŒºåˆ«"></a>ROMã€FLASHã€RAMçš„åŒºåˆ«</h4><p>ç”±äºFlashçƒ§å†™æ¬¡æ•°æœ‰é™åˆ¶ï¼Œåˆ˜è€å¸ˆé—®æˆ‘æ¿å­å¦‚ä½•è¿›è¡Œçƒ§å†™ï¼Œæˆ‘å¼€å§‹ä»¥ä¸ºæ˜¯ç›´æ¥çƒ§å†™Flashï¼Œä½†æ˜¯éšç€è¿›ä¸€æ­¥çš„æŸ¥è¯¢ï¼Œäº†è§£äº†ROMã€FLASHã€RAMçš„åŒºåˆ«ã€‚</p>
<p>æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦è¯´ä¸€ä¸‹è¿™ä¸ªï¼Œå½“ä¸ªå¸¸è¯†äº†è§£ä¸‹ï¼</p>
<p>RAMå’ŒROMçš„åŒºåˆ«ï¼Œæˆ–è€…è¯´ROMå’ŒRAMçš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼ŸROMå’ŒRAMéƒ½æ˜¯ä¸€ç§å­˜å‚¨æŠ€æœ¯ï¼Œåªæ˜¯ä¸¤è€…åŸç†ä¸åŒï¼ŒRAMä¸ºéšæœºå­˜å‚¨ï¼Œæ‰ç”µä¸ä¼šä¿å­˜æ•°æ®ï¼Œè€ŒROMå¯ä»¥åœ¨æ‰ç”µçš„æƒ…å†µä¸‹ï¼Œä¾ç„¶ä¿å­˜åŸæœ‰çš„æ•°æ®ã€‚ROMå’ŒRAMæŒ‡çš„éƒ½æ˜¯åŠå¯¼ä½“å­˜å‚¨å™¨ã€‚æœ¬æ¥çš„å«ä¹‰æ˜¯ï¼šROMæ˜¯Read Only Memoryçš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§å­˜å‚¨å™¨åªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚è€ŒRAMæ˜¯Random Access Memoryçš„ç¼©å†™ã€‚è¿™ä¸ªè¯çš„ç”±æ¥æ˜¯å› ä¸ºæ—©æœŸçš„è®¡ç®—æœºæ›¾ç»ä½¿ç”¨ç£é¼“ä½œä¸ºå†…å­˜ï¼Œè€Œç£é¼“å’Œç£å¸¦éƒ½æ˜¯å…¸å‹çš„é¡ºåºè¯»å†™è®¾å¤‡ã€‚RAMåˆ™å¯ä»¥éšæœºè¯»å†™ã€‚</p>
<p>å†…å­˜RAMæ˜¯æŒ‡éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆrandom accessÂ memoryï¼ŒRAMï¼‰åˆç§°ä½œâ€œéšæœºå­˜å‚¨å™¨â€ï¼Œæ˜¯ä¸CPUç›´æ¥äº¤æ¢æ•°æ®çš„å†…éƒ¨å­˜å‚¨å™¨ï¼Œä¹Ÿå«ä¸»å­˜(å†…å­˜)ã€‚ å®ƒå¯ä»¥éšæ—¶è¯»å†™ï¼Œè€Œä¸”é€Ÿåº¦å¾ˆå¿«ï¼Œé€šå¸¸ä½œä¸ºæ“ä½œç³»ç»Ÿæˆ–å…¶ä»–æ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åºçš„çŸ­æ—¶é—´ä¸´æ—¶æ•°æ®å­˜å‚¨åª’ä»‹ã€‚</p>
<p>é€šä¿—çš„è¯´ï¼Œæ¯”å¦‚åœ¨ç”µè„‘ä¸­ï¼Œå¤§å®¶éƒ½çŸ¥é“æœ‰å†…å­˜å’Œç¡¬ç›˜ä¹‹è¯´ï¼Œå…¶å®å†…å­˜å°±æ˜¯ä¸€ç§RAMæŠ€æœ¯ï¼Œè€ŒROMåˆ™ç±»ä¼¼äºç¡¬ç›˜æŠ€æœ¯ï¼Œä¸¤è€…éƒ½æ˜¯å­˜å‚¨å™¨ï¼Œåªæ˜¯RAMçš„é€Ÿåº¦è¦è¿œè¿œé«˜äºROMçš„é€Ÿåº¦ï¼Œåœ¨ç”µè„‘æ—¥å¸¸æ“ä½œä¸­ï¼Œå¾ˆå¤šç¨‹åºéƒ½å°†ä¸´æ—¶è¿è¡Œçš„ç¨‹åºå‘½ä»¤ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œä½†ä¸€æ—¦å…³æœºæˆ–è€…åœç”µï¼Œå†…å­˜é‡ŒåŸæœ¬ä¸´æ—¶å­˜å‚¨çš„ç¨‹åºä¿¡æ¯å°†å…¨éƒ¨è¢«æ¸…ç©ºï¼Œä¹Ÿå°±æ˜¯å†…å­˜åªèƒ½ä¸´æ—¶å­˜å‚¨ä¸œè¥¿ï¼Œä¸èƒ½é•¿ä¹…ä¿å­˜ï¼Œè€ŒROMåˆ™å¯ä»¥å­˜å‚¨ï¼Œå³ä½¿æ‰ç”µåä¹Ÿå¯ä»¥æ‰¾åˆ°ä¹‹å‰å­˜å‚¨çš„æ–‡ä»¶ï¼Œè¿™ä¹Ÿå°±æ˜¯ç¡¬ç›˜äº†ã€‚</p>
<p>åœ¨æ‰‹æœºä¸­ï¼ŒRAMæ˜¯æŒ‡æ‰‹æœºå†…å­˜ï¼Œå±äºæ‰‹æœºå†…éƒ¨å­˜å‚¨å™¨ï¼Œå±äºéšæœºå­˜å‚¨ï¼Œé€Ÿåº¦é«˜äºROMï¼Œå¯¹äºæ‰‹æœºé…ç½®æ€§èƒ½èµ·ç€é‡è¦çš„å†³å®šæ€§ï¼Œå¦å¤–æ‰ç”µåï¼Œæ•°æ®è¢«æ¸…ç©ºï¼Œæ¯”å¦‚æ‰‹æœºè¿è¡Œç€QQä¸å…¶å®ƒè½¯ä»¶ï¼Œé‡å¯æ‰‹æœºåï¼Œè½¯ä»¶å°±æ²¡æœ‰å¤„äºç™»å½•çŠ¶æ€ã€‚</p>
<p>è€ŒROMåˆ™å±äºå¤–éƒ¨å­˜å‚¨ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸å¯ä»¥è´­ä¹°SDå¡æ”¾å…¥æ‰‹æœºé‡Œé¢ï¼Œåˆ™å°±æ˜¯æ‰‹æœºROMï¼Œæ‰‹æœºROMå°±æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„å­˜å‚¨å¡ï¼Œä¹Ÿå¯ä»¥ç®€å•çš„ç†è§£æˆæ‰‹æœºç¡¬ç›˜å§ã€‚ç”¨æ¥å­˜å‚¨æ‰‹æœºç³»ç»Ÿæ–‡ä»¶ã€å›¾ç‰‡ã€ç”µå½±ç­‰ç­‰ï¼Œä¸ä¼šéšç€æ‰ç”µè€Œä¸¢å¤±æ•°æ®ï¼ŒROMè¶Šå¤§å­˜å‚¨çš„æ•°æ®å°±è¶Šå¤šã€‚</p>
<p>RAMå¯ä»¥åå¤æ“¦å†™ï¼Œå†…å­˜çš„å¯¿å‘½å’Œè€åŒ–æœ‰å…³ï¼Œè€Œå’Œè¯»å†™æ¬¡æ•°æ— å…³ã€‚</p>
<p>è¿™é‡Œä¸¾ä¾‹DRAMï¼ˆDynamic Random Access Memoryï¼‰æ˜¯é ç”µå®¹æ¥å­˜å‚¨ç”µè·ï¼Œç”¨ç”µè·å­˜åœ¨ä¸å¦æ¥è¡¨ç¤ºâ€œ0â€â€œ1â€ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥è¯´æ²¡æœ‰ç”µå­å…ƒä»¶ç‰©ç†çŠ¶æ€çš„æ”¹å˜ï¼Œåªæ˜¯ç”µè·æ˜¯ä¸æ˜¯åœ¨ç”µå®¹ä¸­è€Œå·²ã€‚</p>
<p>Flash å­˜å‚¨å™¨ï¼ˆFLASH EEPROMï¼‰åˆç§°é—ªå­˜ï¼Œå¿«é—ªã€‚å®ƒæ˜¯EEPROMçš„ä¸€ç§ã€‚å®ƒç»“åˆäº†ROMå’ŒRAMçš„é•¿å¤„ã€‚ä¸ä»…å…·å¤‡ç”µå­å¯æ“¦é™¤å¯ç¼–è¾‘ï¼ˆEEPROMï¼‰çš„æ€§èƒ½ï¼Œè¿˜ä¸ä¼šæ–­ç”µä¸¢å¤±æ•°æ®åŒæ—¶å¯ä»¥å¿«é€Ÿè¯»å–æ•°æ®ã€‚å®ƒäºEEPROMçš„æœ€å¤§åŒºåˆ«æ˜¯ï¼ŒFLASHæŒ‰æ‰‡åŒºï¼ˆblockï¼‰æ“ä½œï¼Œè€ŒEEPROMæŒ‰ç…§å­—èŠ‚æ“ä½œã€‚FLASHçš„ç”µè·¯ç»“æ„è¾ƒç®€å•ï¼ŒåŒæ ·å®¹é‡å èŠ¯ç‰‡é¢ç§¯è¾ƒå°ï¼Œæˆæœ¬è‡ªç„¶æ¯”EEPROMä½ï¼Œå› æ­¤é€‚åˆç”¨äºåšç¨‹åºå­˜å‚¨å™¨ã€‚</p>
<p>å¯¹äºRAM, ROMä»¥åŠFLASHçš„åŒºåˆ«ï¼Œç®€å•åœ°è¯´ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼ŒRAM ã€ROMéƒ½æ˜¯æ•°æ®å­˜å‚¨å™¨ã€‚RAM æ˜¯éšæœºå­˜å–å­˜å‚¨å™¨ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æ˜“æŒ¥å‘æ€§ï¼Œå³æ‰ç”µå¤±å¿†ã€‚ROM é€šå¸¸æŒ‡å›ºåŒ–å­˜å‚¨å™¨(ä¸€æ¬¡å†™å…¥ï¼Œåå¤è¯»å–)ï¼Œå®ƒçš„ç‰¹ç‚¹ä¸RAM ç›¸åã€‚ROMåˆåˆ†ä¸€æ¬¡æ€§å›ºåŒ–ã€å…‰æ“¦é™¤å’Œç”µæ“¦é™¤é‡å†™ä¸¤ç§ç±»å‹ã€‚</p>
<p>åœ¨åº”ç”¨ä¸­ï¼Œå¸¸è§„ä¸ŠROMæ˜¯ç”¨æ¥å­˜å‚¨å›ºåŒ–ç¨‹åºçš„ï¼ŒRAMæ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®çš„ã€‚ç”±äºFLASH ROMæ¯”æ™®é€šçš„ROMè¯»å†™é€Ÿåº¦å¿«ï¼Œæ“¦å†™æ–¹ä¾¿ï¼Œä¸€èˆ¬ç”¨æ¥å­˜å‚¨ç”¨æˆ·ç¨‹åºå’Œéœ€è¦æ°¸ä¹…ä¿å­˜çš„æ•°æ®ã€‚è­¬å¦‚è¯´ï¼Œç°åœ¨å®¶ç”¨çš„ç”µå­å¼ç”µåº¦è¡¨ï¼Œå®ƒçš„å†…æ ¸æ˜¯ä¸€æ¬¾å•ç‰‡æœºï¼Œè¯¥å•ç‰‡æœºçš„ç¨‹åºå°±æ˜¯å­˜æ”¾åœ¨ROMé‡Œçš„ã€‚ç”µåº¦è¡¨åœ¨å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œæ˜¯è¦è¿ç®—æ•°æ®çš„ï¼Œè¦é‡‡é›†ç”µå‹å’Œç”µæµï¼Œå¹¶æ ¹æ®ç”µå‹å’Œç”µæµè®¡ç®—å‡ºç”µåº¦æ¥ã€‚ç”µå‹å’Œç”µæµæ—¶ä¸€ä¸ªé€‚æ—¶çš„æ•°æ®ï¼Œç”¨æˆ·ä¸å…³å¿ƒï¼Œå®ƒåªæ˜¯ç”¨æ¥è®¡ç®—ç”µåº¦ç”¨ï¼Œè®¡ç®—å®Œåè¯¥æ¬¡é‡‡é›†çš„æ•°æ®å°±ç”¨å®Œäº†ï¼Œç„¶åå†é‡‡é›†ä¸‹ä¸€æ¬¡ï¼Œå› æ­¤è¿™äº›å€¼å°±æ²¡å¿…è¦æ°¸ä¹…å­˜å‚¨ï¼Œå°±æŠŠå®ƒæ”¾åœ¨RAMé‡Œè¾¹ã€‚ç„¶è€Œè®¡ç®—å®Œçš„ç”µåº¦ï¼Œæ˜¯éœ€è¦æ°¸ä¹…ä¿å­˜çš„ï¼Œå•ç‰‡æœºä¼šå®šæ—¶æˆ–è€…åœ¨åœç”µçš„ç¬é—´å°†ç”µåº¦æ•°å­˜å…¥åˆ°FLASHé‡Œã€‚</p>
<h4 id="çƒ§å†™FLASHå’Œçƒ§å†™RAM"><a href="#çƒ§å†™FLASHå’Œçƒ§å†™RAM" class="headerlink" title="çƒ§å†™FLASHå’Œçƒ§å†™RAM"></a>çƒ§å†™FLASHå’Œçƒ§å†™RAM</h4><p>æ‰€ä»¥çŸ¥é“äº†RAMå’ŒFlashçš„åŒºåˆ«åï¼ŒCCSæŠŠ.outæ–‡ä»¶çƒ§å†™åˆ°æ¿å­ä¸Šï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯çƒ§å†™åˆ°RAMï¼Œä¸€ç§æ˜¯çƒ§å†™åˆ°Flashï¼Œä½†æ˜¯ä¸çŸ¥é“æ€æ ·æ˜¯çƒ§å†™åˆ°RAMã€æ€æ ·æ˜¯çƒ§å†™åˆ°Flashï¼Œç»è¿‡æŸ¥è¯¢æ‰¾åˆ°ä¸¤è€…çš„åŒºåˆ«ï¼š</p>
<p><img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gtsrrha7p2j60v00iuaqt02.jpg" alt="çƒ§å†™RAMå’Œçƒ§å†™Flashçš„åŒºåˆ«1"></p>
<p><img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gtsru11rmwj60rs0hjwni02.jpg" alt="çƒ§å†™RAMå’Œçƒ§å†™Flashçš„åŒºåˆ«2"></p>
<p>æ‰€ä»¥åº”è¯¥æ˜¯ä½¿ç”¨çš„CMDæ–‡ä»¶ä¸ä¸€æ ·ï¼Œä»€ä¹ˆæ˜¯CMDæ–‡ä»¶å‘¢ï¼Ÿ</p>
<p>CMDæ–‡ä»¶ï¼Œåˆç§°é“¾æ¥å‘½ä»¤æ–‡ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯åˆ†é…romå’Œramç©ºé—´ï¼Œå®ƒå‘Šè¯‰é“¾æ¥ç¨‹åºæ€æ ·è®¡ç®—åœ°å€å’Œåˆ†é…ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œåº”è¯¥æŠŠç¨‹åºæ”¾åœ¨å“ªå—åœ°å€å†…ï¼ŒæŠŠæ•°æ®æ”¾åœ¨å“ªå—åœ°å€å†…ä»¥åŠæŠŠç¨‹åºä¸­å®šä¹‰çš„æŸäº›å˜é‡æ”¾åœ¨å“ªå—åœ°å€å†…ã€‚</p>
<p>å½“ä½¿ç”¨F28335è¿›è¡Œçƒ§å†™.outæ–‡ä»¶æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯28335_RAM_lnk.cmdæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±æ˜¯æŠŠ.outæ–‡ä»¶çƒ§å†™åˆ°RAMï¼Œç”¨RAMå¯ä»¥ä¸€ç›´çƒ§å†™debugï¼Œä½†æ˜¯æœ€åå›ºåŒ–ç¨‹åºä¹‹åå†çƒ§å†™åˆ°flashï¼Œå°±éœ€è¦é€‰æ‹©F28335.cmdæ–‡ä»¶ï¼Œè¿™æ ·æœ€åçƒ§å†™å°±æ˜¯ç›´æ¥çƒ§å†™åˆ°flashï¼Œåœ¨CCSä¸‹æ‰¾åˆ°è¯¥æ–‡ä»¶ï¼Œå³å‡»28335_RAM_Ink.cmdï¼Œå°†Exclude from Buildå‹¾é€‰ï¼Œåœ¨F28335.cmdä¸­å–æ¶ˆExclude from Buildå‹¾é€‰ï¼Œå°±å¯ä»¥å°†ç¨‹åºçƒ§å†™åˆ°Flashä¸­ã€‚åä¹‹ï¼Œçƒ§å†™åˆ°RAM ä¸­ã€‚</p>
<h4 id="ç¨‹åºè¿‡é•¿å¦‚ä½•ä¿®æ”¹CMDæ–‡ä»¶"><a href="#ç¨‹åºè¿‡é•¿å¦‚ä½•ä¿®æ”¹CMDæ–‡ä»¶" class="headerlink" title="ç¨‹åºè¿‡é•¿å¦‚ä½•ä¿®æ”¹CMDæ–‡ä»¶"></a>ç¨‹åºè¿‡é•¿å¦‚ä½•ä¿®æ”¹CMDæ–‡ä»¶</h4><p>å¦‚æœ.cæ–‡ä»¶çš„ç¨‹åºç¼–å†™è¿‡é•¿ï¼Œå°±å¯èƒ½ä¼šè¶…å‡ºå­˜å‚¨å™¨çš„èŒƒå›´ï¼Œå‡ºç°è¿™æ ·çš„æŠ¥é”™ï¼šerror #10099-D: program will not fit into available memory.</p>
<p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¿®æ”¹CMDæ–‡ä»¶ï¼Œæ‰“å¼€CMDæ–‡ä»¶ï¼Œæ‰¾åˆ°.textï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#endif    </span><br><span class="line">   </span><br><span class="line">   .text            : &gt; RAML1,     PAGE &#x3D; 0</span><br><span class="line">   .cinit           : &gt; RAML0,     PAGE &#x3D; 0</span><br><span class="line">   .pinit           : &gt; RAML0,     PAGE &#x3D; 0</span><br><span class="line">   .switch          : &gt; RAML0,     PAGE &#x3D; 0</span><br><span class="line"></span><br><span class="line">   .stack           : &gt; RAMM1,     PAGE &#x3D; 1</span><br><span class="line">   .ebss            : &gt; RAML4,     PAGE &#x3D; 1</span><br><span class="line">   .econst          : &gt; RAML5,     PAGE &#x3D; 1</span><br><span class="line">   .esysmem         : &gt; RAMM1,     PAGE &#x3D; 1</span><br><span class="line"></span><br><span class="line">   IQmath           : &gt; RAML1,     PAGE &#x3D; 0</span><br><span class="line">   IQmathTables     : &gt; IQTABLES,  PAGE &#x3D; 0, TYPE &#x3D; NOLOAD</span><br></pre></td></tr></table></figure>
<p>.textå¯¹åº”çš„æ®µï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºæ˜¯åœ¨RAML1ï¼ŒPAGE =0çš„ä½ç½®ï¼Œæˆ‘ä»¬æ‰¾åˆ°PAGE 0çš„RAML1ä½ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">MEMORY</span><br><span class="line">&#123;</span><br><span class="line">PAGE 0 :</span><br><span class="line">   &#x2F;* BEGIN is used for the &quot;boot to SARAM&quot; bootloader mode      *&#x2F;</span><br><span class="line"></span><br><span class="line">   BEGIN      : origin &#x3D; 0x000000, length &#x3D; 0x000002     &#x2F;* Boot to M0 will go here                      *&#x2F;</span><br><span class="line">   RAMM0      : origin &#x3D; 0x000050, length &#x3D; 0x0003B0</span><br><span class="line">   RAML0      : origin &#x3D; 0x008000, length &#x3D; 0x001000</span><br><span class="line">   RAML1      : origin &#x3D; 0x009000, length &#x3D; 0x002000</span><br><span class="line">&#x2F;&#x2F;   RAML2      : origin &#x3D; 0x00A000, length &#x3D; 0x001000</span><br><span class="line">   RAML3      : origin &#x3D; 0x00B000, length &#x3D; 0x001000</span><br><span class="line">   ZONE7A     : origin &#x3D; 0x200000, length &#x3D; 0x00FC00    &#x2F;* XINTF zone 7 - program space *&#x2F;</span><br><span class="line">   CSM_RSVD   : origin &#x3D; 0x33FF80, length &#x3D; 0x000076     &#x2F;* Part of FLASHA.  Program with all 0x0000 when CSM is in use. *&#x2F;</span><br><span class="line">   CSM_PWL    : origin &#x3D; 0x33FFF8, length &#x3D; 0x000008     &#x2F;* Part of FLASHA.  CSM password locations in FLASHA            *&#x2F;</span><br><span class="line">   ADC_CAL    : origin &#x3D; 0x380080, length &#x3D; 0x000009</span><br><span class="line">   RESET      : origin &#x3D; 0x3FFFC0, length &#x3D; 0x000002</span><br><span class="line">   IQTABLES   : origin &#x3D; 0x3FE000, length &#x3D; 0x000b50</span><br><span class="line">   IQTABLES2  : origin &#x3D; 0x3FEB50, length &#x3D; 0x00008c</span><br><span class="line">   FPUTABLES  : origin &#x3D; 0x3FEBDC, length &#x3D; 0x0006A0</span><br><span class="line">   BOOTROM    : origin &#x3D; 0x3FF27C, length &#x3D; 0x000D44</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘ç°PAGE 0 å¯¹åº”çš„RAML1çš„ä½ç½®åœ¨0x009000ï¼Œé•¿åº¦æ˜¯0x001000ï¼Œå¦‚æœéœ€è¦å°†æ­¤ä½ç½®å˜å¤§ï¼Œåˆ™å¯ä»¥å°†PAGE 0 ä¸‹çš„RAML2çš„è¡Œä»£ç æ³¨é‡Šï¼ŒæŠŠRAML1çš„é•¿åº¦æ”¹æˆlength = 0x002000ã€‚è¿™æ ·å°±èƒ½å®ç°ç¼–è¯‘ã€‚</p>
<h4 id="å¦‚ä½•é˜²æ­¢çƒ§å†™è¿‡ç¨‹ä¸­åŠ å¯†FLASH"><a href="#å¦‚ä½•é˜²æ­¢çƒ§å†™è¿‡ç¨‹ä¸­åŠ å¯†FLASH" class="headerlink" title="å¦‚ä½•é˜²æ­¢çƒ§å†™è¿‡ç¨‹ä¸­åŠ å¯†FLASH"></a>å¦‚ä½•é˜²æ­¢çƒ§å†™è¿‡ç¨‹ä¸­åŠ å¯†FLASH</h4><p>ç¼–è¯‘å®Œä¹‹åï¼Œæˆ‘ä»¬å…ˆä¸è¦æ€¥ç€çƒ§å†™åˆ°æ¿å­ä¸Šï¼Œç‚¹å¼€å·¥ç¨‹çš„DEBUGæ–‡ä»¶å¤¹ä¸‹çš„.mapæ–‡ä»¶</p>
<p><img data-src="https://tva4.sinaimg.cn/large/0084Tjdoly1gtst1bbtf1j60uy0gmdwr02.jpg"></p>
<p>éœ€è¦æ£€æŸ¥çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PAGE 0:</span><br><span class="line">&#x2F;&#x2F;åªè¦è¿™ä¸¤è¡Œä»£ç æ˜¯è¿™ä¸ªå°±è¯´æ˜ä¿®æ”¹çš„CMDæ–‡ä»¶æ²¡æœ‰æŠŠFLASHåŠ å¯†å¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œçƒ§å†™ </span><br><span class="line">  CSM_RSVD              0033ff80   00000076  00000000  00000076  RWIX</span><br><span class="line">  CSM_PWL               0033fff8   00000008  00000000  00000008  RWIX</span><br></pre></td></tr></table></figure>
<p>åªè¦è¿™ä¸¤è¡Œä»£ç æ˜¯ä¸Šé¢ä¸€æ¨¡ä¸€æ ·æ­£ç¡®çš„ï¼Œå°±è¯´æ˜ä¿®æ”¹çš„CMDæ–‡ä»¶æ²¡æœ‰æŠŠFLASHåŠ å¯†å¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œçƒ§å†™ï¼</p>
<h4 id="å­¦ä¹ CCSçš„Graphçš„ä½¿ç”¨"><a href="#å­¦ä¹ CCSçš„Graphçš„ä½¿ç”¨" class="headerlink" title="å­¦ä¹ CCSçš„Graphçš„ä½¿ç”¨"></a>å­¦ä¹ CCSçš„Graphçš„ä½¿ç”¨</h4><p>åˆ˜è€å¸ˆè¯´CCSè½¯ä»¶æ˜¯å¯ä»¥ç”¨Graphçœ‹æ³¢å½¢çš„ï¼Œäºæ˜¯åœ¨CSDNæ‰¾åˆ°äº†ç”¨Graphçš„æ•™ç¨‹ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/HJ199404182515/article/details/60467027">å…³äºCCSè½¯ä»¶çš„GraphåŠŸèƒ½ä½¿ç”¨è¯¦è§£</a></p>
<p>åœ¨ç¨‹åºçƒ§å†™åˆ°28335çš„RAMä¹‹åï¼Œç‚¹å‡»è¿è¡Œâ–·ï¼Œè¿™æ ·åœ¨CCS Debugç•Œé¢ç‚¹å‡»Toolsä¸‹çš„Graphçš„Single Timeï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gtssfum8t6j61hc0gph4102.jpg"></p>
<p>ä¹‹åä¼šå¼¹å‡ºå¦‚ä¸‹çš„çª—å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img data-src="https://tva4.sinaimg.cn/large/0084Tjdoly1gtsslaf0jvj60ce0gmjvv02.jpg"></p>
<p>Acquisition Buffer Sizeï¼šè¡¨ç¤ºé€šè¿‡ä»¿çœŸå™¨ä»DSPçš„å†…å­˜ä¸­è¯»å–çš„æ•°æ®çš„å¤§å°ï¼Œç”±äºç¨‹åºé‡Œç”¨äºå­˜å‚¨ä¿¡å·çš„æ•°ç»„å¤§å°æ˜¯256ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®æˆ256ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®æˆæ›´å°çš„å€¼ï¼Œè¿™æ ·å°±åªèƒ½çœ‹åˆ°ä¿¡å·çš„éƒ¨åˆ†å›¾åƒã€‚</p>
<p>Dsp Data Typeï¼šè¡¨ç¤ºä½ çš„æ•°æ®æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œè¿™é‡Œé€‰æ‹©32 bit floating pointï¼Œæ ¹æ®è‡ªå·±éœ€è¦çœ‹çš„å˜é‡çš„æ³¢å½¢ï¼Œé€‰æ‹©å®šä¹‰å˜é‡çš„æ•°æ®ç±»å‹ã€‚</p>
<p>Index Incrementï¼šç´¢å¼•å¢é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªæ•°æ®ç‚¹åºå·çš„ç›¸å·®å€¼ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯é€ç‚¹æ˜¾ç¤ºçš„ï¼Œå› æ­¤é»˜è®¤è®¾ç½®ä¸º1ï¼Œå¦‚æœæƒ³è¦æ¯éš”ä¸€ä¸ªç‚¹æ˜¾ç¤ºä¸€ä¸ªé‚£ä¹ˆä½ å°±åº”è¯¥è®¾ç½®æˆ2ã€‚</p>
<p>Q_Valueï¼šQå€¼ï¼Œä¸€èˆ¬è¿™ä¸å¸¸ç”¨ï¼Œé»˜è®¤å°±è¡Œã€‚</p>
<p>Sampling Rate Hzï¼šä»¥Hzä¸ºå•ä½çš„é‡‡æ ·ç‡ï¼Œæˆ‘è®¾ç½®ä¸º10000ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾ç½®ï¼š<a target="_blank" rel="noopener" href="https://bbs.elecfans.com/m/jishu_1597845_1_1.html">è¿™æ˜¯Googleçš„æ•™ç¨‹</a></p>
<p>Start Addressï¼šå¼€å§‹åœ°å€ï¼Œè¡¨ç¤ºä½ è¦æ˜¾ç¤ºçš„æ•°ç»„çš„é¦–åœ°å€ï¼Œæˆ‘ä»¬ç°åœ¨æƒ³è¦çœ‹çš„æ˜¯æ•°ç»„uaå› æ­¤ï¼Œè®¾ç½®æˆuaã€‚</p>
<p>Auto Scaleï¼šè‡ªåŠ¨è°ƒæ•´æ˜¾ç¤ºæ¯”ä¾‹ä½¿å…¶é€‚åº”æ•´ä¸ªæ˜¾ç¤ºçª—å£ã€‚  è¿™é‡Œæˆ‘ä»¬å¼€å¯ã€‚</p>
<p>Axis Display ï¼šæ˜¾ç¤ºåæ ‡è½´ï¼Œè¿™é‡Œæˆ‘ä»¬å¼€å¯ã€‚</p>
<p>Data Plot Styleï¼šæ•°æ®ç»˜åˆ¶ç±»å‹ï¼Œæœ‰Lineå’ŒBarä¸¤ç§ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©Lineã€‚</p>
<p>Display Data Sizeï¼šæ˜¾ç¤ºæ•°æ®å¤§å°ï¼Œè¡¨ç¤ºè¦å°†å¤šå°‘ä¸ªç‚¹çš„æ•°æ®è¿›è¡Œæ˜¾ç¤ºï¼Œæ³¨æ„è¿™ä¸ªå€¼ä¸€å®šè¦å°äºç­‰äºAcquisition Buffer Sizeï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®æˆ256ã€‚</p>
<p>Grid Styleï¼šç½‘æ ¼ç±»å‹ï¼Œæœ‰ No Grid, Minor Grid, Major Gridä¸‰ç§é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©No Gridã€‚</p>
<p>Magnitude Display Scaleï¼šå¹…å€¼æ˜¾ç¤ºç±»å‹ï¼Œæœ‰Linearï¼ˆçº¿æ€§çš„ï¼‰Logarithmicï¼ˆå¯¹æ•°çš„ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©Linearã€‚</p>
<p>Time Display Unitï¼šæ˜¾ç¤ºæ—¶é—´çš„å•ä½æœ‰sample, s, ms, uså‡ ç§å¯é€‰ï¼Œå…¶ä¸­sampleè¡¨ç¤ºæ˜¾ç¤ºçš„ç‚¹çš„åºå·ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©msã€‚</p>
<p>Use Dc Value For Graphï¼šæ˜¯å¦ä½¿ç”¨Dcå€¼ï¼Œä¸€èˆ¬ä¸å¸¸ç”¨ï¼Œé»˜è®¤å°±è¡Œã€‚</p>
<p>ä¸‹å›¾å°±æ˜¯uaçš„æ³¢å½¢ï¼š</p>
<p><img data-src="https://tvax2.sinaimg.cn/large/0084Tjdoly1gtssyykkfdj61fa0o97bh02.jpg"></p>
<p>ä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆè§‚å¯Ÿæ‰‡åŒºçš„æ³¢å½¢ï¼Œæƒ³çœ‹ä¸‹æ‰‡åŒºçš„å˜åŒ–å¯¹ä¸å¯¹â€¦</p>
<h3 id="æ˜ŸæœŸä¸‰"><a href="#æ˜ŸæœŸä¸‰" class="headerlink" title="æ˜ŸæœŸä¸‰"></a>æ˜ŸæœŸä¸‰</h3><p>æŠŠæ˜ŸæœŸä¸€çš„é—ç•™é—®é¢˜è¿›è¡Œäº†åˆ†æï¼Œå°†è‡ªå·±ç¼–å†™çš„SVPWM_Modified_3INT.cæ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œé¦–å…ˆå£°æ˜ePWMæ¨¡å—çš„åˆå§‹åŒ–å‡½æ•°EPwmSetup()ï¼Œç”±äºAã€Bã€Cä¸‰ç›¸åªéœ€è¦ç”¨ePWM1ã€2ã€3æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘å°†ePWM4ã€5ã€6çš„æ¨¡å—ä»£ç è¿›è¡Œäº†æ³¨é‡Šï¼Œå› ä¸ºæ²¡æœ‰ä½¿ç”¨åˆ°è¿™ä¸‰ä¸ªæ¨¡å—ï¼Œä»£ç å¯¹æˆ‘æ¥è¯´å°±æ˜¯å¤šä½™çš„ã€‚</p>
<p>åœ¨åˆå§‹åŒ–å‡½æ•°çš„æ–‡ä»¶DSP2833x_EPwm.cä¸­ï¼Œç³»ç»Ÿæ—¶é’Ÿä¸º150MHzï¼ŒPWMçš„é¢‘ç‡è®¾å®šä¸º12.8kHzï¼Œæ­»åŒºæ—¶é—´è®¾ç½®ä¸º475ï¼Œæ­»åŒºæ¨¡å¼é€‰æ‹©ALCæ¨¡å¼ã€‚å®šä¹‰Uint16 Tä½œä¸ºæ—¶åŸºå‘¨æœŸå¯„å­˜å™¨çš„å€¼ï¼Œ T=CPU_CLK/(2Ã—PWM_CLK)ï¼Œæ‰€ä»¥Tçš„å€¼åº”è¯¥ç®—åˆ°æ˜¯5859ã€‚</p>
<p>ä¹‹åå£°æ˜ePWM1ã€2ã€3çš„åˆå§‹åŒ–å‡½æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void InitPwm1AB(float32 f);</span><br><span class="line">void InitPwm2AB(float32 f);</span><br><span class="line">void InitPwm3AB(float32 f);</span><br></pre></td></tr></table></figure>
<p>ä»¥ePWM1æ¨¡å—çš„åˆå§‹åŒ–å‡½æ•°ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">void InitPwm1AB(float32 f)</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;ç³»ç»Ÿæ—¶é’ŸSYSCLKOUT&#x3D;150MHzï¼ŒTBCLK&#x3D;6.6666667nsï¼Œåœ¨è¿ç»­å¢è®¡æ•°æ¨¡å¼ä¸‹ï¼Œf&#x3D;150000000&#x2F;(TBPDR+1)</span><br><span class="line">	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;Setup TBCLK P207ã€208é¡µ&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">	EPwm1Regs.TBPRD &#x3D; T; &#x2F;&#x2F;å‘¨æœŸå¯„å­˜å™¨ä¸­è®¾ç½®è®¡æ•°å™¨çš„è®¡æ•°å‘¨æœŸ  12.8k</span><br><span class="line">	EPwm1Regs.TBPHS.half.TBPHS &#x3D; 0x0000; &#x2F;&#x2F; åœ¨ç›¸ä½å¯„å­˜å™¨ä¸­è®¾ç½®è®¡æ•°å™¨çš„èµ·å§‹è®¡æ•°ä½ç½®</span><br><span class="line">	EPwm1Regs.TBCTR &#x3D;0x0000; &#x2F;&#x2F;è®¾ç½®æ—¶åŸºè®¡æ•°å™¨è®¡æ•°åˆå€¼ä»é›¶å¼€å§‹è®¡æ•°</span><br><span class="line">	EPwm1Regs.CMPA.half.CMPA &#x3D;EPwm1Regs.TBPRD&gt;&gt;2;</span><br><span class="line">	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;Setup TBCTL counter mode &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">	EPwm1Regs.TBCTL.bit.CTRMODE &#x3D; TB_COUNT_UPDOWN; &#x2F;&#x2F;0x2&#x2F;&#x2F;è®¾ç½®è®¡æ•°æ¨¡å¼ä½ä¸ºè¿ç»­å¢å‡è®¡æ•°æ¨¡å¼ï¼Œäº§ç”Ÿå¯¹ç§°æ–¹æ³¢</span><br><span class="line">	EPwm1Regs.TBCTL.bit.PHSEN &#x3D; TB_DISABLE; &#x2F;&#x2F;0x0&#x2F;&#x2F;å°†å®šæ—¶å™¨ç›¸ä½ä½¿èƒ½ä½å…³é—­</span><br><span class="line">	EPwm1Regs.TBCTL.bit.HSPCLKDIV &#x3D; 0;&#x2F;&#x2F;TBCLK &#x3D; SYSCLKOUT &#x2F; (HSPCLKDIV Ã— CLKDIV)</span><br><span class="line">	EPwm1Regs.TBCTL.bit.CLKDIV &#x3D; 0;&#x2F;&#x2F;å€¼éƒ½ä¸º0è¯´æ˜ç³»ç»Ÿæ—¶é’Ÿä¸º150MHz</span><br><span class="line">	EPwm1Regs.TBCTL.bit.PRDLD &#x3D; TB_SHADOW;&#x2F;&#x2F;0x0&#x2F;&#x2F;æ˜ å°„å¯„å­˜å™¨SHADOWä½¿èƒ½å¹¶é…ç½®æ˜ å°„å¯„å­˜å™¨ä¸ºè‡ªåŠ¨è¯»å†™</span><br><span class="line">	EPwm1Regs.TBCTL.bit.SYNCOSEL &#x3D; TB_CTR_ZERO;&#x2F;&#x2F;0x1</span><br><span class="line">	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;Setup shadowing P209é¡µ&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">	EPwm1Regs.CMPCTL.bit.SHDWAMODE &#x3D; CC_SHADOW;&#x2F;&#x2F;0x0&#x2F;&#x2F;Aæ¨¡å—æ¯”è¾ƒæ¨¡å¼CC_SHADOW</span><br><span class="line">	EPwm1Regs.CMPCTL.bit.SHDWBMODE &#x3D; CC_SHADOW;&#x2F;&#x2F;0x0&#x2F;&#x2F;Bæ¨¡å—æ¯”è¾ƒæ¨¡å¼</span><br><span class="line">	EPwm1Regs.CMPCTL.bit.LOADAMODE &#x3D; CC_CTR_ZERO;&#x2F;&#x2F;0x1 CTR&#x3D;Zero&#x2F;&#x2F; Aæ¨¡å—æ¯”è¾ƒä½¿èƒ½,é€šè¿‡å†™0æ¥æ¸…é™¤SHDWAMODEä½æ¥ä½¿èƒ½load on</span><br><span class="line">	EPwm1Regs.CMPCTL.bit.LOADBMODE &#x3D; CC_CTR_ZERO; &#x2F;&#x2F; CTR&#x3D;Zero Bæ¨¡å—æ¯”è¾ƒä½¿èƒ½ï¼Œé€šè¿‡å†™0æ¥æ¸…é™¤SHDWBMODEä½æ¥ä½¿èƒ½load on</span><br><span class="line">	 &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;Set actions P210ã€211ã€212ã€213é¡µ&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">#ifdef ACTV_LOW</span><br><span class="line">	EPwm1Regs.AQCTLA.bit.CAU &#x3D;AQ_SET;    &#x2F;&#x2F; å‘ä¸Šè®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨çš„è®¡æ•°å€¼&#x3D;æ¯”è¾ƒå€¼CMPAæ—¶ePWMAç½®ä½</span><br><span class="line">	EPwm1Regs.AQCTLA.bit.CAD &#x3D;AQ_CLEAR;  &#x2F;&#x2F; å‘ä¸‹è®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨çš„è®¡æ•°å€¼&#x3D;æ¯”è¾ƒå€¼CMPAæ—¶ePWMAæ¸…é›¶</span><br><span class="line">	&#x2F;&#x2F;EPwm1Regs.AQCTLA.bit.PRD &#x3D; AQ_CLEAR;</span><br><span class="line">	EPwm1Regs.AQCTLB.bit.CBU &#x3D;AQ_CLEAR;  &#x2F;&#x2F; å‘ä¸Šè®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨çš„è®¡æ•°å€¼&#x3D;æ¯”è¾ƒå€¼CMPBæ—¶ePWMBæ¸…é›¶</span><br><span class="line">	EPwm1Regs.AQCTLB.bit.CBD &#x3D; AQ_SET;   &#x2F;&#x2F; å‘ä¸‹è®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨çš„è®¡æ•°å€¼&#x3D;æ¯”è¾ƒå€¼CMPBæ—¶ePWMBç½®ä½</span><br><span class="line">	EPwm1Regs.AQCSFRC.all&#x3D;0x0;&#x2F;&#x2F;è½¯ä»¶å¼ºåˆ¶åŠ¨ä½œé™å®šä¸ä½¿èƒ½</span><br><span class="line">#endif</span><br><span class="line">#ifdef ACTV_HIGH</span><br><span class="line">	EPwm1Regs.AQCTLA.bit.CAU &#x3D;AQ_CLEAR;   &#x2F;&#x2F; Set PWM1A on event A, up count</span><br><span class="line">	EPwm1Regs.AQCTLA.bit.CAD &#x3D;AQ_SET; &#x2F;&#x2F; Clear PWM1A on event A, down count</span><br><span class="line">	&#x2F;&#x2F;EPwm1Regs.AQCTLA.bit.PRD &#x3D; AQ_CLEAR;</span><br><span class="line">	EPwm1Regs.AQCTLB.bit.CBU &#x3D;AQ_SET;  &#x2F;&#x2F; Set PWM1B on event B, up count</span><br><span class="line">	EPwm1Regs.AQCTLB.bit.CBD &#x3D;AQ_CLEAR;  &#x2F;&#x2F; Clear PWM1B on event B, down count</span><br><span class="line">	EPwm1Regs.AQCSFRC.all&#x3D;0x0;&#x2F;&#x2F;è½¯ä»¶å¼ºåˆ¶åŠ¨ä½œé™å®šä¸ä½¿èƒ½</span><br><span class="line">#endif</span><br><span class="line">	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;Set the dead P213ã€214é¡µ&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">#ifdef ACTV_LOW</span><br><span class="line">	EPwm1Regs.DBCTL.bit.OUT_MODE &#x3D; DB_FULL_ENABLE;&#x2F;&#x2F;0x3ï¼šDB_FULL_ENABLEæ­»åŒºæ¨¡å—è¾“å‡ºæ§åˆ¶ï¼Œä½¿èƒ½åŒè¾¹æ²¿å»¶æ—¶</span><br><span class="line">	EPwm1Regs.DBCTL.bit.IN_MODE &#x3D; DBA_ALL;&#x2F;&#x2F;0x0ï¼šDBA_ALLï¼›0x3ï¼šDBB_ALLæ­»åŒºæ¨¡å—è¾“å…¥æ§åˆ¶ï¼ŒePWMxAæ˜¯åŒè¾¹æ²¿å»¶æ—¶è¾“å…¥æ²¿ï¼ˆePWMxBæ ¹æ®ePWMxAçš„ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿è¿›è¡Œæ­»åŒºå»¶æ—¶ï¼‰</span><br><span class="line">	EPwm1Regs.DBCTL.bit.POLSEL &#x3D; DB_ACTV_LOC;&#x2F;&#x2F; 0x1ï¼šDB_ACTV_LOCï¼›0x2ï¼šDB_ACTV_HIC;ææ€§é€‰æ‹©æ¨¡å—ï¼Œç”±äºè¾“å…¥æºä¿¡å·æ˜¯ePWMxAï¼Œæ‰€ä»¥ePWMxAä¸ç¿»è½¬ï¼ŒePWMxBç¿»è½¬</span><br><span class="line">#endif</span><br><span class="line">#ifdef ACTV_HIGH</span><br><span class="line">	EPwm1Regs.DBCTL.bit.OUT_MODE &#x3D; DB_FULL_ENABLE;&#x2F;&#x2F;0x3ï¼šDB_FULL_ENABLE</span><br><span class="line">	EPwm1Regs.DBCTL.bit.IN_MODE &#x3D; DBA_ALL;&#x2F;&#x2F;0x0ï¼šDBA_ALLï¼›0x3ï¼šDBB_ALL</span><br><span class="line">	EPwm1Regs.DBCTL.bit.POLSEL &#x3D; DB_ACTV_HIC;&#x2F;&#x2F; 0x1ï¼šDB_ACTV_LOCï¼›0x2ï¼šDB_ACTV_HIC;</span><br><span class="line">#endif</span><br><span class="line">	EPwm1Regs.DBRED &#x3D; dead_time;&#x2F;&#x2F;è®¾å®šä¸Šå‡æ²¿æ­»åŒºæ—¶é—´</span><br><span class="line">	EPwm1Regs.DBFED &#x3D; dead_time;&#x2F;&#x2F;è®¾å®šä¸‹é™æ²¿æ­»åŒºæ—¶é—´</span><br><span class="line"></span><br><span class="line">	EPwm1Regs.PCCTL.all&#x3D;0;&#x2F;&#x2F; é…ç½®æ–©æ³¢æ¨¡å— P215é¡µï¼Œç¦æ­¢æ–©æ³¢åŠŸèƒ½</span><br><span class="line">	EPwm1Regs.TZCTL.all&#x3D;0xf;&#x2F;&#x2F;é…ç½®é”™è¯¯è”é˜²æ¨¡å— P217é¡µï¼Œé”™è¯¯è”é˜²æ¨¡å—è®¾ç½®ä¸èµ·ä½œç”¨å³ 3~0å¯¹åº”1111&#x3D;0xf;</span><br><span class="line">	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;Set ET P219ã€220é¡µ&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">	EPwm1Regs.ETSEL.bit.INTSEL &#x3D; ET_CTR_ZERO; &#x2F;&#x2F;å½“è®¡æ•°å€¼CTRåˆ°0æ—¶å€™ï¼ŒePWM1æ¨¡å—ä¸­æ–­è§¦å‘(æ›´æ–°æ¯”è¾ƒå¯„å­˜å™¨CMPAå’ŒCMPBçš„å€¼)</span><br><span class="line">	EPwm1Regs.ETSEL.bit.INTEN &#x3D; 1; &#x2F;&#x2F; ePWM1æ¨¡å—ä¸­æ–­äº§ç”Ÿä½ï¼Œä½¿èƒ½ä¸­æ–­</span><br><span class="line">	EPwm1Regs.ETPS.bit.INTPRD &#x3D; 1;&#x2F;&#x2F;æ¯æ¬¡äº‹ä»¶å‘ç”Ÿéƒ½è§¦å‘ä¸­æ–­ï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œäº§ç”ŸSOCä¿¡å·ï¼Œå³SOCBCNT&#x3D;01ï¼Œäº§ç”Ÿä¸­æ–­</span><br><span class="line">	&#x2F;&#x2F;ADè§¦å‘è®¾ç½®</span><br><span class="line">&#x2F;&#x2F;	EPwm1Regs.ETSEL.bit.SOCAEN &#x3D; 1;  &#x2F;&#x2F; Enable SOC on A group</span><br><span class="line">&#x2F;&#x2F;	EPwm1Regs.ETSEL.bit.SOCASEL &#x3D; 4; &#x2F;&#x2F; Select SOC  from CPMA on upcount</span><br><span class="line">&#x2F;&#x2F;	EPwm1Regs.ETPS.bit.SOCAPRD &#x3D; 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒç†å…¶ä»–ä¸¤ä¸ªæ¨¡å—ä¹Ÿæ˜¯ä¸€æ ·è®¾ç½®ï¼Œä¸å†è¿‡å¤šèµ˜è¿°<br>ä¹‹åå£°æ˜ePWMä¸­æ–­æœåŠ¡ç¨‹åºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interrupt void epwm1_isr(void);&#x2F;&#x2F;å£°æ˜EPWM1ä¸­æ–­æœåŠ¡ç¨‹åº</span><br><span class="line">interrupt void epwm2_isr(void);&#x2F;&#x2F;å£°æ˜EPWM2ä¸­æ–­æœåŠ¡ç¨‹åº</span><br><span class="line">interrupt void epwm3_isr(void);&#x2F;&#x2F;å£°æ˜EPWM3ä¸­æ–­æœåŠ¡ç¨‹åº</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰ä¸€äº›å˜é‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ç”±äºè½½æ³¢è®¾ç½®çš„æ˜¯12.8kHzï¼Œä¸‰ç›¸è°ƒåˆ¶æ³¢çš„é¢‘ç‡è®¾ç½®ä¸º50Hzï¼Œä¸º256ç‚¹é‡‡æ ·</span><br><span class="line">#define PI 3.1415926</span><br><span class="line">float u_beta,u_alfa,u,m&#x3D;0.8;&#x2F;&#x2F;,temp_1, temp_2;</span><br><span class="line">float ua[256],ub[256],uc[256];</span><br><span class="line">float t1,t2,t0,t,X,Y,Z,sinne[256],cosne[256];</span><br><span class="line">Uint16 k&#x3D;0,k1&#x3D;0,k2&#x3D;0,k3&#x3D;0,n,A&#x3D;0,B&#x3D;0,C&#x3D;0,sec&#x3D;0;</span><br><span class="line">float Voltage1[256],Voltage2[256],Voltage3[256];&#x2F;&#x2F;ABCç›¸è§‚å¯Ÿç”¨è¾“å‡º</span><br></pre></td></tr></table></figure>
<p>ä¹‹åè¿›å…¥ä¸»å‡½æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">void main(void)</span><br><span class="line">&#123;</span><br><span class="line">   InitSysCtrl();&#x2F;&#x2F;ç³»ç»Ÿåˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">   EALLOW;</span><br><span class="line">   SysCtrlRegs.HISPCP.all &#x3D; 0x3;&#x2F;&#x2F;ADC_MODCLK;	&#x2F;&#x2F; HSPCLK &#x3D; SYSCLKOUT&#x2F;ADC_MODCLKï¼Œè®¾ç½®ADCæ¨¡å¼å·¥ä½œçš„æ ‡å‡†é¢‘ç‡ï¼ŒP323é¡µ</span><br><span class="line">   EDIS;</span><br><span class="line"></span><br><span class="line">   InitGpio();&#x2F;&#x2F;åˆå§‹åŒ–GPIOï¼Œä½¿ç”¨äº†DSP2833x_Gpio.cæ–‡ä»¶</span><br><span class="line">   InitXintf16Gpio();&#x2F;&#x2F;ä½¿ç”¨äº†DSP2833x_Xintf.cæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">   DINT; &#x2F;&#x2F;ç¦æ­¢å¯å±è”½ä¸­æ–­</span><br><span class="line"></span><br><span class="line">   InitPieCtrl();&#x2F;&#x2F;åˆå§‹åŒ–PIEæ¨¡å—</span><br><span class="line"></span><br><span class="line">   IER &#x3D; 0x0000;&#x2F;&#x2F;ç¦æ­¢CPUä¸­æ–­</span><br><span class="line">   IFR &#x3D; 0x0000;&#x2F;&#x2F;æ¸…é™¤æ‰€æœ‰CPUä¸­æ–­æ ‡å¿—</span><br><span class="line"></span><br><span class="line">   InitPieVectTable();&#x2F;&#x2F;åˆå§‹åŒ–ä¸­æ–­å‘é‡è¡¨</span><br><span class="line">   InitAdc();&#x2F;&#x2F;åˆå§‹åŒ–ADCæ¨¡å—ï¼Œå¯ä»¥ç”¨ADCæ¨¡å—é‡‡æ ·è§‚å¯Ÿå‡½æ•°ï¼ˆä¹‹åå­¦ä¹ ï¼‰</span><br><span class="line"></span><br><span class="line">   EALLOW;  &#x2F;&#x2F; This is needed to write to EALLOW protected registers</span><br><span class="line">   PieVectTable.EPWM1_INT &#x3D; &amp;epwm1_isr;&#x2F;&#x2F;é‡æ–°æ˜ å°„ä½¿ç”¨çš„ä¸­æ–­å‘é‡ï¼Œå¯¹åº”çš„åœ°å€P134é¡µ</span><br><span class="line">   PieVectTable.EPWM2_INT &#x3D; &amp;epwm2_isr;</span><br><span class="line">   PieVectTable.EPWM3_INT &#x3D; &amp;epwm3_isr;</span><br><span class="line">   EDIS;    &#x2F;&#x2F; This is needed to disable write to EALLOW protected registers</span><br><span class="line"></span><br><span class="line">   EALLOW;</span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC &#x3D; 0;&#x2F;&#x2F;åœæ­¢æ‰€æœ‰ePWMæ¨¡å—çš„æ—¶é’Ÿ</span><br><span class="line">   EDIS;</span><br><span class="line"></span><br><span class="line">   EPwmSetup();&#x2F;&#x2F;åˆå§‹åŒ–EPwm1ã€2ã€3æ¨¡å—</span><br><span class="line"></span><br><span class="line">   EALLOW;</span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC &#x3D; 1;&#x2F;&#x2F;å…è®¸æ‰€æœ‰ePWMæ¨¡å—çš„æ—¶é’Ÿ</span><br><span class="line">   EDIS;</span><br><span class="line"></span><br><span class="line">   IER |&#x3D; M_INT3;&#x2F;&#x2F;å…è®¸CPUçš„INT3ï¼ˆå¯¹åº”çš„æ˜¯EPWM1~6ï¼‰</span><br><span class="line"></span><br><span class="line">   PieCtrlRegs.PIEIER3.bit.INTx1 &#x3D; 1;&#x2F;&#x2F;å…è®¸PIEçº§ä¸­æ–­INT3.1ï¼Œå³EPWM1ä¸­æ–­</span><br><span class="line">   PieCtrlRegs.PIEIER3.bit.INTx2 &#x3D; 1;&#x2F;&#x2F;å…è®¸PIEçº§ä¸­æ–­INT3.2ï¼Œå³EPWM2ä¸­æ–­</span><br><span class="line">   PieCtrlRegs.PIEIER3.bit.INTx3 &#x3D; 1;&#x2F;&#x2F;å…è®¸PIEçº§ä¸­æ–­INT3.3ï¼Œå³EPWM3ä¸­æ–­</span><br><span class="line"></span><br><span class="line">   EINT;   &#x2F;&#x2F; Enable Global interrupt INTM</span><br><span class="line">   ERTM;   &#x2F;&#x2F; Enable Global realtime interrupt DBGM</span><br><span class="line">   for(n&#x3D;0;n&lt;256;n++)&#x2F;&#x2F;å‡†å¤‡å¥½ä¸‰ç›¸çš„æ³¢å½¢</span><br><span class="line">   &#123;</span><br><span class="line">	   ua[n] &#x3D; cos(2*PI*n&#x2F;256);</span><br><span class="line">	   ub[n] &#x3D; cos(2*PI*n&#x2F;256-2*PI&#x2F;3);</span><br><span class="line">	   uc[n] &#x3D; cos(2*PI*n&#x2F;256+2*PI&#x2F;3);</span><br><span class="line">&#x2F;&#x2F;	   cosne[n] &#x3D; 2&#x2F;3*(ua[n]-0.5*ub[n]-0.5*uc[n]);</span><br><span class="line">&#x2F;&#x2F;	   sinne[n] &#x3D; sqrt(3)&#x2F;3*(ub[n]-uc[n]);</span><br><span class="line">&#x2F;&#x2F;	   sinne[n]&#x3D; sin(n*(6.283&#x2F;256));&#x2F;&#x2F;æ­£ä½™å¼¦è¡¨åˆå§‹åŒ–</span><br><span class="line">&#x2F;&#x2F;	   cosne[n]&#x3D; cos(n*(6.283&#x2F;256));</span><br><span class="line">   &#125;</span><br><span class="line">   n&#x3D;0;</span><br><span class="line"></span><br><span class="line">   for(;;)</span><br><span class="line">   &#123;</span><br><span class="line">       asm(&quot;          NOP&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸­æ–­æœåŠ¡å­ç¨‹åºï¼Œä»¥epwm1_isr()å‡½æ•°ä¸ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">interrupt void epwm1_isr(void)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;å°†uaã€ubã€ucæ•°ç»„è¿›è¡ŒClarkeå˜æ¢ï¼Œmæ˜¯è°ƒåˆ¶æ¯”</span><br><span class="line">	u_alfa&#x3D;m*2&#x2F;3*(ua[k1]-0.5*ub[k1]-0.5*uc[k1]);</span><br><span class="line">	u_beta&#x3D;m*sqrt(3)&#x2F;3*(ub[k1]-uc[k1]);</span><br><span class="line">    &#x2F;&#x2F;ç¡®å®šXYZçš„å€¼ï¼Œè¯¦è§è‡ªå·±çš„æ€»ç»“æ–‡æ¡£ï¼Œè¿™é‡Œçš„XYZæ˜¯æ ‡å¹ºå€¼</span><br><span class="line">    X&#x3D;u_beta;</span><br><span class="line">    Y&#x3D;0.867*u_alfa-0.5*u_beta;</span><br><span class="line">    Z&#x3D;-0.867*u_alfa-0.5*u_beta;</span><br><span class="line">    &#x2F;&#x2F;ç”¨Xã€Yã€Zå¯ä»¥åˆ¤æ–­æ‰‡åŒºï¼Œsec&#x3D;315462åˆ†åˆ«å¯¹åº”æ‰‡åŒº123456</span><br><span class="line">    if(X&gt;0) A&#x3D;1;</span><br><span class="line">    else A&#x3D;0;</span><br><span class="line">    if(Y&gt;0) B&#x3D;1;</span><br><span class="line">    else B&#x3D;0;</span><br><span class="line">    if(Z&gt;0) C&#x3D;1;</span><br><span class="line">    else C&#x3D;0;</span><br><span class="line">    sec&#x3D;4*C+2*B+A;</span><br><span class="line"></span><br><span class="line">switch(sec)</span><br><span class="line">&#123;</span><br><span class="line">	case 1: &#x2F;&#x2F;2æ‰‡åŒº</span><br><span class="line">        t1&#x3D;-Y;&#x2F;&#x2F;æ—¶é—´å½’ä¸€åŒ–ç›¸å½“äºTså–1ï¼ŒVdcå–sqrt(3)</span><br><span class="line">        t2&#x3D;-Z;&#x2F;&#x2F;è¿™é‡Œçš„t1ã€t2æ˜¯å¹¿ä¹‰çš„t1ã€t2ï¼Œå¥‡å¶æ‰‡åŒºå·²ç»äº¤æ¢</span><br><span class="line">        t0&#x3D;1-t1-t2;</span><br><span class="line">        EPwm1Regs.CMPA.half.CMPA &#x3D; ((t0&#x2F;2)+t1)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        EPwm1Regs.CMPB &#x3D; (t0&#x2F;2+t1)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        break;</span><br><span class="line">    case 2:&#x2F;&#x2F;6æ‰‡åŒº</span><br><span class="line">        t1&#x3D;-Z;&#x2F;&#x2F;æ—¶é—´å½’ä¸€åŒ–ç›¸å½“äºTså–1ï¼ŒVdcå–sqrt(3)</span><br><span class="line">        t2&#x3D;-X;</span><br><span class="line">        t0&#x3D;1-t1-t2;</span><br><span class="line">        EPwm1Regs.CMPA.half.CMPA &#x3D;(t0*EPwm1Regs.TBPRD)&#x2F;2; &#x2F;&#x2F;</span><br><span class="line">        EPwm1Regs.CMPB &#x3D; (t0*EPwm1Regs.TBPRD)&#x2F;2; &#x2F;&#x2F;</span><br><span class="line">        break;</span><br><span class="line">    case 3:&#x2F;&#x2F;1æ‰‡åŒº</span><br><span class="line">        t1&#x3D;Y;</span><br><span class="line">        t2&#x3D;X;</span><br><span class="line">        t0&#x3D;1-t1-t2;</span><br><span class="line">        t&#x3D;t1+t2;</span><br><span class="line">        EPwm1Regs.CMPA.half.CMPA &#x3D;(t0*(EPwm1Regs.TBPRD))&#x2F;2; &#x2F;&#x2F;</span><br><span class="line">        EPwm1Regs.CMPB &#x3D;(t0*(EPwm1Regs.TBPRD))&#x2F;2; &#x2F;&#x2F;</span><br><span class="line">        break;</span><br><span class="line">    case 4:&#x2F;&#x2F;4æ‰‡åŒº</span><br><span class="line">        &#x2F;&#x2F;temp_1&#x3D;-X;</span><br><span class="line">        &#x2F;&#x2F;temp_2&#x3D;-Y;</span><br><span class="line">        t1&#x3D;-X;</span><br><span class="line">        t2&#x3D;-Y;</span><br><span class="line">        t0&#x3D;1-t1-t2;</span><br><span class="line">        EPwm1Regs.CMPA.half.CMPA &#x3D;(t0&#x2F;2+t1+t2)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        EPwm1Regs.CMPB &#x3D; (t0&#x2F;2+t1+t2)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        break;</span><br><span class="line">    case 5:&#x2F;&#x2F;3æ‰‡åŒº</span><br><span class="line">        &#x2F;&#x2F; temp_1&#x3D;X;</span><br><span class="line">        &#x2F;&#x2F; temp_2&#x3D;Z;</span><br><span class="line">        t1&#x3D;X;</span><br><span class="line">        t2&#x3D;Z;</span><br><span class="line">        t0&#x3D;1-t1-t2;</span><br><span class="line">        EPwm1Regs.CMPA.half.CMPA &#x3D;(t0&#x2F;2+t1+t2)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        EPwm1Regs.CMPB &#x3D; (t0&#x2F;2+t1+t2)*EPwm1Regs.TBPRD;</span><br><span class="line">        break;</span><br><span class="line">    case 6:&#x2F;&#x2F;5æ‰‡åŒº</span><br><span class="line">        &#x2F;&#x2F;temp_1&#x3D;Z;</span><br><span class="line">        &#x2F;&#x2F;temp_2&#x3D;Y;</span><br><span class="line">        t1&#x3D;Z;</span><br><span class="line">        t2&#x3D;Y;</span><br><span class="line">        t0&#x3D;1-t1-t2;</span><br><span class="line">        EPwm1Regs.CMPA.half.CMPA &#x3D; ((t0&#x2F;2)+t1)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        EPwm1Regs.CMPB &#x3D; (t0&#x2F;2+t1)*EPwm1Regs.TBPRD; &#x2F;&#x2F;</span><br><span class="line">        break;</span><br><span class="line">&#125;</span><br><span class="line">    &#x2F;&#x2F;Voltage1[k]&#x3D;EPwm1Regs.CMPA.half.CMPA ;&#x2F;&#x2F;è§‚å¯Ÿç”¨</span><br><span class="line">    Voltage1[k1]&#x3D;t0;</span><br><span class="line">   	k1++;</span><br><span class="line">	if(k1&gt;&#x3D;256) k1&#x3D;0;</span><br><span class="line"></span><br><span class="line">   EPwm1Regs.ETCLR.bit.INT &#x3D; 1;             &#x2F;&#x2F;æ¸…é™¤æ ‡å¿—ä½</span><br><span class="line">   PieCtrlRegs.PIEACK.all &#x3D; PIEACK_GROUP3;  &#x2F;&#x2F;æ¸…é™¤åº”ç­”ä½</span><br><span class="line">   EINT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ˜ŸæœŸå››"><a href="#æ˜ŸæœŸå››" class="headerlink" title="æ˜ŸæœŸå››"></a>æ˜ŸæœŸå››</h3><p>æ„Ÿè§‰æ˜¨å¤©çš„ä»£ç é€»è¾‘æœ‰ç‚¹å¤æ‚ï¼Œäºæ˜¯å°±é‡æ–°ä¿®æ”¹äº†è‡ªå·±ä¸»å‡½æ•°çš„é€»è¾‘ï¼Œåœ¨ä¸»å‡½æ•°ä¸­å…ˆå‡†å¤‡å¥½ä¸‰ç›¸æ³¢å½¢ï¼Œå¹¶è¿›è¡ŒClarkeå˜åŒ–ï¼Œå­˜å…¥å®šä¹‰çš„æ•°ç»„ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(n&#x3D;0;n&lt;256;n++)&#x2F;&#x2F;å‡†å¤‡å¥½ä¸‰ç›¸çš„æ³¢å½¢</span><br><span class="line">&#123;</span><br><span class="line"> ua[n] &#x3D; m*Vdc&#x2F;sqrt(3)*cos(2*PI*n&#x2F;256);</span><br><span class="line"> ub[n] &#x3D; m*Vdc&#x2F;sqrt(3)*cos(2*PI*n&#x2F;256-2*PI&#x2F;3);</span><br><span class="line"> uc[n] &#x3D; m*Vdc&#x2F;sqrt(3)*cos(2*PI*n&#x2F;256+2*PI&#x2F;3);</span><br><span class="line"> cosne[n] &#x3D; (double)2.0&#x2F;3*(ua[n]-0.5*ub[n]-0.5*uc[n]);</span><br><span class="line"> sinne[n] &#x3D; sqrt(3)&#x2F;3*(ub[n]-uc[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åé‡æ–°ä¿®æ”¹äº†ä¸‰ç›¸çš„ä¸­æ–­å‡½æ•°çš„ä»£ç ï¼Œé¦–å…ˆå°†å­˜å…¥æ•°ç»„ä¸­çš„Clarkeå˜æ¢çš„æ•°æ®é€ä¸€å–å‡ºï¼Œç”±è‡ªå·±åˆ†æçš„ã€Šå…³äºSVPWMæ‰‡åŒºåˆ¤æ–­ä»¥åŠçŸ¢é‡ä½œç”¨æ—¶é—´çš„ç†è§£ã€‹ï¼Œå®šä¹‰ä¸‰ä¸ªå˜é‡X1ã€Y1ã€Z1ç”¨æ¥ç¡®å®šæ‰‡åŒºï¼ŒXã€Yã€Zç”¨æ¥ç¡®å®šå…­ä¸ªæ‰‡åŒºå¯¹åº”çš„çŸ¢é‡ä½œç”¨æ—¶é—´ï¼Œé¦–å…ˆæ ¹æ®X1ã€Y1ã€Z1ç¡®å®šNçš„å€¼ï¼ŒNçš„å€¼å’Œæ‰‡åŒºå·æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥ä¹‹ååˆ©ç”¨ä¸€ä¸ªSwitchå‡½æ•°ï¼Œå°†æ•°å­—Nè½¬åŒ–æˆå¯¹åº”çš„æ‰‡åŒºå·secï¼Œè¿™æ ·sec[1-6]å¯¹åº”çš„å°±æ˜¯æ‰‡åŒºI-VIï¼Œä¹‹åæ ¹æ®æ‰‡åŒºç¡®å®šæ ‡å‡†çŸ¢é‡çš„ä½œç”¨æ—¶é—´ï¼Œå¾—åˆ°t1ã€t2ã€t0ä¸Xã€Yã€Zçš„å…³ç³»è¡¨ï¼Œ ä¹‹åå¯¹t1ã€t2è¿›è¡Œé¥±å’Œå¤„ç†ï¼Œå®šä¹‰ä¸‰ä¸ªæ—¶åˆ»Taonã€Tbonã€Tconï¼Œæ ¹æ®æ‰‡åŒºåˆ†åˆ«ç¡®å®šAã€Bã€Cç›¸çš„åˆ‡æ¢æ—¶åˆ»Taã€Tbã€Tcï¼Œæœ€åå°†Taã€Tbã€Tcè¿›è¡Œå½’ä¸€åŒ–åï¼Œç»™å¯¹åº”çš„ePWMæ¨¡å—çš„æ¯”è¾ƒå¯„å­˜å™¨çš„å€¼ï¼Œç”±äºePWMå·²ç»åˆå§‹åŒ–å¥½äº†ï¼Œä¸éœ€è¦å†ä¿®æ”¹ï¼ŒePWM1æ¨¡å—çš„ä¸­æ–­æœåŠ¡å­ç¨‹åºå®Œæˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">interrupt void epwm1_isr(void)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;å°†uaã€ubã€ucæ•°ç»„è¿›è¡ŒClarkeå˜æ¢ï¼Œmæ˜¯è°ƒåˆ¶æ¯”</span><br><span class="line">	u_alfa&#x3D;cosne[k1];</span><br><span class="line">	u_beta&#x3D;sinne[k1];</span><br><span class="line">    &#x2F;&#x2F;ç¡®å®šXYZçš„å€¼ï¼Œè¯¦è§è‡ªå·±çš„æ€»ç»“æ–‡æ¡£ï¼Œè¿™é‡Œçš„XYZæ˜¯æ ‡å¹ºå€¼</span><br><span class="line">    X1&#x3D;u_beta;</span><br><span class="line">    Y1&#x3D;0.867*u_alfa-0.5*u_beta;</span><br><span class="line">    Z1&#x3D;-0.867*u_alfa-0.5*u_beta;</span><br><span class="line">    X &#x3D; sqrt(3)*Ts&#x2F;Vdc*X1;&#x2F;&#x2F;è®¡ç®—çœŸæ­£çš„çŸ¢é‡ä½œé‡æ—¶é—´XYZçš„å€¼</span><br><span class="line">    Y &#x3D; sqrt(3)*Ts&#x2F;Vdc*Y1;</span><br><span class="line">    Z &#x3D; sqrt(3)*Ts&#x2F;Vdc*Z1;</span><br><span class="line">    &#x2F;&#x2F;ç”¨Xã€Yã€Zå¯ä»¥åˆ¤æ–­æ‰‡åŒºï¼Œsec&#x3D;315462åˆ†åˆ«å¯¹åº”æ‰‡åŒº123456</span><br><span class="line">    if(X1&gt;0) A&#x3D;1;</span><br><span class="line">    else A&#x3D;0;</span><br><span class="line">    if(Y1&gt;0) B&#x3D;1;</span><br><span class="line">    else B&#x3D;0;</span><br><span class="line">    if(Z1&gt;0) C&#x3D;1;</span><br><span class="line">    else C&#x3D;0;</span><br><span class="line">    N&#x3D;4*C+2*B+A;</span><br><span class="line">    &#x2F;&#x2F;å°†æ•°å­—Nè½¬åŒ–æˆå¯¹åº”çš„æ‰‡åŒºå·</span><br><span class="line">    switch(N)</span><br><span class="line">    &#123;</span><br><span class="line">    case 1: &#123;sec&#x3D;2; break;&#125;</span><br><span class="line">    case 2: &#123;sec&#x3D;6; break;&#125;</span><br><span class="line">    case 3: &#123;sec&#x3D;1; break;&#125;</span><br><span class="line">    case 4: &#123;sec&#x3D;4; break;&#125;</span><br><span class="line">    case 5: &#123;sec&#x3D;3; break;&#125;</span><br><span class="line">    case 6: &#123;sec&#x3D;5; break;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;æ ¹æ®å‚è€ƒç”µå‹çŸ¢é‡æ‰€åœ¨çš„æ‰‡åŒºç¡®å®šæ ‡å‡†çŸ¢é‡çš„ä½œç”¨æ—¶é—´</span><br><span class="line">    switch(sec)</span><br><span class="line">    &#123;</span><br><span class="line">    case 1: &#123;t1&#x3D;Y;  t2&#x3D;X;  t0&#x3D;Ts-t1-t2; break;&#125;</span><br><span class="line">    case 2: &#123;t1&#x3D;-Y; t2&#x3D;-Z; t0&#x3D;Ts-t1-t2; break;&#125;</span><br><span class="line">    case 3: &#123;t1&#x3D;X;  t2&#x3D;Z;  t0&#x3D;Ts-t1-t2; break;&#125;</span><br><span class="line">    case 4: &#123;t1&#x3D;-X; t2&#x3D;-Y; t0&#x3D;Ts-t1-t2; break;&#125;</span><br><span class="line">    case 5: &#123;t1&#x3D;Z;  t2&#x3D;Y;  t0&#x3D;Ts-t1-t2; break;&#125;</span><br><span class="line">    case 6: &#123;t1&#x3D;-Z; t2&#x3D;-X; t0&#x3D;Ts-t1-t2; break;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;å°†T1ã€T2è¿›è¡Œé¥±å’Œå¤„ç†</span><br><span class="line">    if(t1+t2&gt;Ts)</span><br><span class="line">    &#123;</span><br><span class="line">    	t1&#x3D;t1*Ts&#x2F;(t1+t2);</span><br><span class="line">    	t2&#x3D;t2*Ts&#x2F;(t1+t2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Taon&#x3D;t0&#x2F;4;</span><br><span class="line">    Tbon&#x3D;t0&#x2F;4+t1&#x2F;2;</span><br><span class="line">    Tcon&#x3D;t0&#x2F;4+t1&#x2F;2+t2&#x2F;2;</span><br><span class="line"></span><br><span class="line">    switch(sec)</span><br><span class="line">    &#123;</span><br><span class="line">    case 1: &#123;Ta&#x3D;Taon; Tb&#x3D;Tbon; Tc&#x3D;Tcon; break;&#125;</span><br><span class="line">    case 2: &#123;Ta&#x3D;Tbon; Tb&#x3D;Taon; Tc&#x3D;Tcon; break;&#125;</span><br><span class="line">    case 3: &#123;Ta&#x3D;Tcon; Tb&#x3D;Taon; Tc&#x3D;Tbon; break;&#125;</span><br><span class="line">    case 4: &#123;Ta&#x3D;Tcon; Tb&#x3D;Tbon; Tc&#x3D;Taon; break;&#125;</span><br><span class="line">    case 5: &#123;Ta&#x3D;Tbon; Tb&#x3D;Tcon; Tc&#x3D;Taon; break;&#125;</span><br><span class="line">    case 6: &#123;Ta&#x3D;Taon; Tb&#x3D;Tcon; Tc&#x3D;Tbon; break;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    EPwm1Regs.CMPA.half.CMPA &#x3D;Ta*EPwm1Regs.TBPRD&#x2F;(Ts&#x2F;2);</span><br><span class="line">    EPwm1Regs.CMPB &#x3D;Ta*EPwm1Regs.TBPRD&#x2F;(Ts&#x2F;2);</span><br><span class="line">    &#x2F;&#x2F;Voltage1[k]&#x3D;EPwm1Regs.CMPA.half.CMPA ;&#x2F;&#x2F;è§‚å¯Ÿç”¨</span><br><span class="line">    Voltage1[k1]&#x3D;Ta;</span><br><span class="line">   	k1++;</span><br><span class="line">	if(k1&gt;&#x3D;256) k1&#x3D;0;</span><br><span class="line">	EPwm1Regs.ETCLR.bit.INT &#x3D; 1;             &#x2F;&#x2F;æ¸…é™¤æ ‡å¿—ä½</span><br><span class="line">	PieCtrlRegs.PIEACK.all &#x3D; PIEACK_GROUP3;  &#x2F;&#x2F;æ¸…é™¤åº”ç­”ä½</span><br><span class="line">	EINT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºèƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘ï¼Œè¿è¡Œä¹‹åï¼Œåˆ©ç”¨Graphå¯ä»¥è§‚å¯ŸABCç›¸çš„æ³¢å½¢ï¼Œç”±äºæ¯æ¬¡Graphåªèƒ½æŸ¥çœ‹ä¸€ä¸ªå˜é‡çš„æ³¢å½¢ï¼Œæ‰€ä»¥å°†ä¸‰ç›¸å˜é‡çš„æ•°æ®å¯¼å‡ºæˆ.CSVæ–‡ä»¶ï¼Œå¹¶åˆ©ç”¨Excelç»˜åˆ¶æ•£ç‚¹å›¾ï¼Œå³å¯è§‚å¯ŸABCä¸‰ç›¸åˆ‡æ¢æ—¶åˆ»çš„æ³¢å½¢å›¾ï¼Œå¹¶ä¸è‡ªå·±ç”¨Matlabä»¿çœŸå¾—åˆ°çš„Taã€Tbã€Tcçš„æ³¢å½¢è¿›è¡Œäº†æ¯”è¾ƒï¼š</p>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gtw93tq6zyj60eb08hq4x02.jpg" alt="CCSç¼–ç¨‹å®ç°çš„Taã€Tbã€Tcæ³¢å½¢å›¾"></p>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gtw94dgg93j60dd080gng02.jpg" alt="Matlabä»¿çœŸå®ç°çš„Taã€Tbã€Tcæ³¢å½¢å›¾"></p>
<p>å¯ä»¥å‘ç°æ³¢å½¢åŸºæœ¬å»åˆï¼ŒTaã€Tbã€Tcç›¸å·®120Â°ï¼Œä¸€ä¸ªå‘¨æœŸæ˜¯50Hzã€‚å°†ç¨‹åºçƒ§å†™åˆ°DSPä¸­ï¼Œå¾—åˆ°çš„PWMçš„æ³¢å½¢ä¸ºä¸‹å›¾ï¼š</p>
<p><img data-src="https://tva4.sinaimg.cn/large/0084Tjdoly1gtw9cl7xk2j61400u0n1e02.jpg" alt="è¾“å‡ºçš„PWMæ³¢å½¢"></p>
<h3 id="æ˜ŸæœŸäº”"><a href="#æ˜ŸæœŸäº”" class="headerlink" title="æ˜ŸæœŸäº”"></a>æ˜ŸæœŸäº”</h3><p>å’Œè€å¸ˆäº¤æµä¹‹åï¼Œä¸‹ä¸€æ­¥éœ€è¦åœ¨å®ç°ç¼–ç¨‹çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯å› ä¸ºæ¯ä¸€ä¸ªè½½æ³¢é¢‘ç‡ä¹‹åæˆ‘éƒ½éœ€è¦å°†è½½æ³¢é¢‘ç‡å®æ—¶è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä¹‹å‰æå‰ç»™å¥½ä¸‰ç›¸ç”µå‹æ•°ç»„çš„é€»è¾‘å°±æœ‰é—®é¢˜ï¼Œæˆ‘ä¸èƒ½å†ç”¨å®š256ç‚¹ï¼Œä¹Ÿå°±æ˜¯12.8kHz/50Hzæ¥ç¡®å®šï¼Œè€Œæ˜¯éœ€è¦è®¾å®šä¸€ä¸ªæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´ç”¨æ¥ç¡®å®šä¸‰ç›¸çš„ç›¸ä½ï¼Œåˆ©ç”¨cosæ¥ç¡®å®šå¯¹åº”çš„å€¼ï¼Œç»è¿‡Clarkeå˜æ¢ï¼Œä¹‹åå†ç¡®å®šTaã€Tbã€Tcï¼Œç”±äºæˆ‘éœ€è¦å°†ePWMæ¨¡å—çš„æ—¶åŸºå‘¨æœŸå¯„å­˜å™¨çš„å€¼å®æ—¶å˜åŠ¨ï¼Œæš‚æ—¶å…ˆè®¡æ•°10000æ¬¡ç„¶åæ”¹å˜Tsçš„å€¼ï¼Œå³æ”¹å˜TBPRDçš„å€¼ï¼Œä¸€ä¸ªTBPRDè®¡æ•°ä¹‹åå°±æ˜¯ä¸€ä¸ªTsï¼Œé‚£ä¹ˆå¯ä»¥è®¾å®šä¸€ä¸ªæ—¶é—´Tctr=Tctr+2Ã—TBPRDÃ—TBCLKï¼Œå¹¶è®¾å®šä¸€ä¸ªå¾ªç¯è®©kå¢åŠ ä¸€æ¬¡ï¼Œå°±æ”¹å˜ä¸€æ¬¡æ—¶é—´ï¼Œå¹¶æŠŠè¿™ä¸ªæ—¶åˆ»å¯¹åº”çš„ä¸‰ç›¸ç”µå‹å€¼ç¡®å®šå¥½ç»™å…¥æ•°ç»„ï¼Œä¹‹åè¿›è¡Œç›¸åŒæ“ä½œç¡®å®šTaã€Tbã€Tcï¼ŒTBPRDçš„å€¼ä¹Ÿç›¸åº”æ”¹å˜äº†ï¼Œå°†å…¶ç»™å¦‚æ¯”è¾ƒå¯„å­˜å™¨ï¼Œè¿›è¡Œä¸€ä¸ªè½½æ³¢å‘¨æœŸçš„æ¯”è¾ƒã€‚</p>
<p>æŒ‰ç…§ä¸Šè¿°é€»è¾‘è¿›è¡Œäº†ä»£ç çš„ç›¸å…³ä¿®æ”¹ï¼Œä¸ºäº†ä»£ç æŠ¥é”™åèƒ½æ›´å¿«è¿˜åŸåˆ°è€ç‰ˆæœ¬ï¼Œå°†è€çš„çš„ä»£ç è¿›è¡Œäº†å¤‡ä»½ï¼Œæ–°çš„çš„ä»£ç æ ¹æ®ä¿®æ”¹æ—¥æœŸé‡æ–°å‘½åæˆï¼šSVPWM_Modified_3INT_0827.c</p>
<p>ä¿®æ”¹çš„é€»è¾‘å¦‚ä¸‹ï¼Œä¸»å‡½æ•°ä¸€ä¸ªforå¾ªç¯è¿›è¡Œè®¡æ•°å¹¶ä¿®æ”¹TBPRDçš„å€¼ï¼Œä¹‹åç»™tctr1ã€2ã€3è¿›è¡Œèµ‹æ–°å€¼ï¼Œç”±äºforå¾ªç¯æ˜¯åœ¨ä¸€ç›´å¾ªç¯çš„ï¼Œæ‰€ä»¥tctråº”è¯¥æ˜¯ä¸€ç›´åœ¨åŠ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">for(;;)</span><br><span class="line">&#123;</span><br><span class="line"> if(0&#x3D;&lt;k&lt;&#x3D;128000)</span><br><span class="line"> &#123;</span><br><span class="line">  Ts&#x3D;(double)1&#x2F;12800;</span><br><span class="line">  EPwm1Regs.TBPRD&#x3D;1500000000&#x2F;(2*1&#x2F;Ts);</span><br><span class="line">  k++;</span><br><span class="line"> &#125;</span><br><span class="line"> else if(128000&lt;k&lt;&#x3D;256000)</span><br><span class="line"> &#123;</span><br><span class="line">  Ts&#x3D;(double)1&#x2F;25600;</span><br><span class="line">  EPwm1Regs.TBPRD&#x3D;1500000000&#x2F;(2*1&#x2F;Ts);</span><br><span class="line">  k++;</span><br><span class="line"> &#125;</span><br><span class="line"> else</span><br><span class="line"> &#123;</span><br><span class="line">  Ts&#x3D;(double)1&#x2F;12800;</span><br><span class="line">  EPwm1Regs.TBPRD&#x3D;1500000000&#x2F;(2*1&#x2F;Ts);</span><br><span class="line">  k&#x3D;0;</span><br><span class="line"> &#125;</span><br><span class="line"> tctr1&#x3D;tctr1+(double)2*EPwm1Regs.TBPRD*1&#x2F;150000000;</span><br><span class="line"> tctr2&#x3D;tctr2+(double)2*EPwm1Regs.TBPRD*1&#x2F;150000000;</span><br><span class="line"> tctr3&#x3D;tctr3+(double)2*EPwm1Regs.TBPRD*1&#x2F;150000000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹‹åå¯¹ä¸­æ–­æœåŠ¡å­ç¨‹åºè¿›è¡Œç›¸åº”çš„ä¿®æ”¹ï¼Œä»¥Aç›¸çš„Epwm1æ¨¡å—ä¸ºä¾‹ï¼Œé¦–å…ˆå°†tctr1æ—¶åˆ»å¯¹åº”çš„cosä¸‰ç›¸çš„ç”µå‹å­˜å…¥æ•°ç»„ï¼Œå¹¶è¿›è¡ŒClarkeå˜æ¢ï¼Œä¹‹åå°†k1++ï¼Œå½“ä¸€ä¸ªå‘¨æœŸå³å½“50Ã—tctr1=1æ—¶ï¼Œå°†tctr1ç½®é›¶ï¼Œk1ç½®é›¶ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªè°ƒåˆ¶æ³¢çš„å‘¨æœŸï¼Œé‡æ–°è®¡æ•°â€¦åé¢çš„ç¡®å®šçŸ¢é‡ä½œç”¨æ—¶é—´åŸºæœ¬ä¸€æ ·ï¼Œä¸å†èµ˜è¿°ï¼Œæ–°å¢çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ua[k1]&#x3D;cos(100*PI*tctr1);</span><br><span class="line">ub[k1]&#x3D;cos(100*PI*tctr1-2*PI&#x2F;3);</span><br><span class="line">uc[k1]&#x3D;cos(100*PI*tctr1+2*PI&#x2F;3);</span><br><span class="line">cosne[k1] &#x3D; (double)2.0&#x2F;3*(ua[k1]-0.5*ub[k1]-0.5*uc[k1]);</span><br><span class="line">sinne[k1] &#x3D; sqrt(3)&#x2F;3*(ub[k1]-uc[k1]);</span><br><span class="line">   &#x2F;&#x2F;å°†uaã€ubã€ucæ•°ç»„è¿›è¡ŒClarkeå˜æ¢ï¼Œmæ˜¯è°ƒåˆ¶æ¯”</span><br><span class="line">u_alfa&#x3D;cosne[k1];</span><br><span class="line">u_beta&#x3D;sinne[k1];</span><br><span class="line">  	k1++;</span><br><span class="line">if(50*tctr1&#x3D;1)</span><br><span class="line">&#123;</span><br><span class="line">	tctr1&#x3D;0;</span><br><span class="line">	k1&#x3D;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åé‡æ–°ç¼–è¯‘æŠ¥é”™äº†ğŸ˜­ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆâ€¦â€¦ğŸ‘´ç´¯äº†ï¼Œå¿ƒç´¯ğŸ’”ï¼Œå¥½çƒ¦ï¼ï¼ï¼</p>
<p>æ™šä¸Šè¯•äº†ä¸‹æ€ä¹ˆå°†Tekç¤ºæ³¢å™¨çš„æ³¢å½¢å¯¼å‡ºåˆ°Uç›˜ï¼š</p>
<p>ç§‘ç ”éœ€è¦å°†ç¤ºæ³¢å™¨çš„æ³¢å½¢å¯¼å‡ºåˆ°Uç›˜è¿›è¡Œè§‚å¯Ÿå’Œåˆ†æï¼Œæƒ³è¦æŠŠç¤ºæ³¢å™¨çš„æ•°æ®å¯¼å‡ºåˆ°ç”µè„‘è¿›è¡Œè§‚çœ‹ï¼Œé‚£ä¹ˆæ€ä¹ˆå°†ç¤ºæ³¢å™¨çš„æ³¢å½¢è¿›è¡Œå¯¼å‡ºå‘¢ï¼Ÿ</p>
<p>æœ¬äººä½¿ç”¨çš„ç¤ºæ³¢å™¨çš„å‹å·ä¸ºï¼šTektronix DPO 2012B Digital Phosphor Oscilloscope</p>
<p>é¦–å…ˆå°†Uç›˜æ’å…¥åˆ°USBæ¥å£ä¸­ï¼Œä¹‹åç‚¹å‡»<code>Menu</code>æŒ‰é’®ï¼Œé€‰æ‹©<code>Save Waveform</code>ï¼š</p>
<p><img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gtwa7dgsxij63402c0u1002.jpg"></p>
<p>å³è¾¹çš„<code>source</code>é€‰æ‹©ä¿¡å·1ï¼Œ<code>Destination</code>é€‰æ‹©SpreadsheetFile(.csv)ï¼Œ<code>Waveform Resolution</code>æ³¢å½¢åˆ†è¾¨ç‡é€‰æ‹©Fullï¼Œ<code>Gating</code>æ ¹æ®éœ€æ±‚é€‰æ‹©Offã€Screenã€Between Cusorsï¼Œä¹‹åç‚¹å‡»<code>Saveâ€¦</code>å³å¯ï¼</p>
<p><img data-src="https://tvax4.sinaimg.cn/large/0084Tjdoly1gtwa88erksj63402c0u1002.jpg"></p>
<p>ä¹‹åUç›˜é‡Œé¢å°±ä¼šå¤šä¸€ä¸ª.CSVçš„æ–‡ä»¶ï¼Œå°†Uç›˜æ’å…¥ç”µè„‘ï¼Œå°±å¯ä»¥ç”»æ•£ç‚¹å›¾æŸ¥çœ‹æ³¢å½¢äº†ï¼</p>
<p><img data-src="https://tvax1.sinaimg.cn/large/0084Tjdoly1gtwb57ci79j60dd081my902.jpg"></p>
<h3 id="æ˜ŸæœŸå…­"><a href="#æ˜ŸæœŸå…­" class="headerlink" title="æ˜ŸæœŸå…­"></a>æ˜ŸæœŸå…­</h3><p>æ˜¨å¤©æ²¡æœ‰ç¼–è¯‘æˆåŠŸçš„ç¨‹åºï¼Œä»Šå¤©å¥½åƒçªç„¶èƒ½ç¼–è¯‘æˆåŠŸäº†ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œéš¾é“æ˜¯æˆ‘é‡å¯äº†ä¸€ä¸‹CCSè½¯ä»¶å°±èƒ½ç¼–è¯‘äº†å—ï¼Ÿå¾ˆå¥‡æ€ªâ€¦</p>
<p>ä½†æ˜¯å‘ç°ç¼–è¯‘æˆåŠŸä¹‹åæ³¢å½¢ä¸æ­£ç¡®ï¼Œå’Œè€å¸ˆäº¤æµä¹‹åï¼Œåº”è¯¥æ˜¯æ—¶é—´æ²¡æœ‰å¼„å¥½ï¼Œå¿…é¡»è¦ç¡®å®šå¥½ç¨‹åºè¿è¡Œçš„æ—¶é—´ï¼Œæˆ‘çš„æ€è·¯æ˜¯è¿›å…¥ä¸­æ–­ä¹‹åå¼€å§‹è®¡æ—¶ï¼Œå…ˆè¿™æ ·å§ï¼</p>
<h2 id="ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯"><a href="#ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯" class="headerlink" title="ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯"></a>ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯</h2><p>æœ€è¿‘å¸ˆå…„å¸ˆå§å·²ç»å¼€å§‹å‡†å¤‡æ‰¾å·¥ä½œäº†ï¼Œçœ‹ä»–ä»¬åœ¨å‡†å¤‡é¢è¯•å•¥çš„ï¼Œè¿˜æœ‰ç‚¹ç„¦è™‘ï¼Œé—®è€å¸ˆæ‰¾å·¥ä½œæœ‰ä»€ä¹ˆå»ºè®®ï¼Œè€å¸ˆç›´æ¥æ‰¹æˆ‘è¯´ä½ ç°åœ¨è¿˜ä¸ç”¨æƒ³é‚£ä¹ˆè¿œçš„äº‹ï¼Œç¡®å®ï¼Œè¿˜æ˜¯å…ˆè¸å®è¿‡å¥½æ¯ä¸€å¤©å§ï¼Œä¸å…¶æ¯å¤©ç„¦è™‘æœªæ¥ï¼Œä¸å¦‚è®©ä»Šå¤©æ›´å……å®ç‚¹â€¦</p>
<p>ä½†æ˜¯çœ‹åˆ°è¿™ä¸ªå°±æƒ³ğŸ˜­ğŸ‘‡</p>
<p><a target="_blank" rel="noopener" href="http://www.moe.gov.cn/jyb_sjzl/sjzl_fztjgb/202108/t20210827_555004.html">2020å¹´å…¨å›½æ•™è‚²äº‹ä¸šå‘å±•ç»Ÿè®¡å…¬æŠ¥</a></p>
<p>å…¨å›½å…±æœ‰æ™®é€šé«˜æ ¡2738æ‰€ï¼Œæ¯”ä¸Šå¹´å¢åŠ 50æ‰€ã€‚å…¶ä¸­ï¼Œæœ¬ç§‘é™¢æ ¡1270æ‰€ï¼ˆå«æœ¬ç§‘å±‚æ¬¡èŒä¸šå­¦æ ¡21æ‰€ï¼‰ï¼Œæ¯”ä¸Šå¹´å¢åŠ 5æ‰€ï¼›é«˜èŒï¼ˆä¸“ç§‘ï¼‰é™¢æ ¡1468æ‰€ï¼Œæ¯”ä¸Šå¹´å¢åŠ 45æ‰€ã€‚æˆäººé«˜ç­‰å­¦æ ¡265æ‰€ï¼Œæ¯”ä¸Šå¹´å‡å°‘3æ‰€ï¼›ç ”ç©¶ç”ŸåŸ¹å…»æœºæ„827ä¸ªï¼Œå…¶ä¸­ï¼Œæ™®é€šé«˜ç­‰å­¦æ ¡594ä¸ªï¼Œç§‘ç ”æœºæ„233ä¸ªã€‚</p>
<p><strong>ç ”ç©¶ç”Ÿæ‹›ç”Ÿ110.66ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 19.00ä¸‡äººï¼Œå¢é•¿20.74%ã€‚å…¶ä¸­ï¼Œåšå£«ç”Ÿ11.60ä¸‡äººï¼Œç¡•å£«ç”Ÿ99.05ä¸‡äººã€‚åœ¨å­¦ç ”ç©¶ç”Ÿ313.96ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 27.59ä¸‡äººï¼Œå¢é•¿9.63%ã€‚å…¶ä¸­ï¼Œåšå£«ç”Ÿ46.65ä¸‡äººï¼Œåœ¨å­¦ç¡•å£«ç”Ÿ267.30ä¸‡äººã€‚æ¯•ä¸šç ”ç©¶ç”Ÿ72.86ä¸‡äººï¼Œå…¶ä¸­ï¼Œæ¯•ä¸šåšå£«ç”Ÿ6.62ä¸‡äººï¼Œæ¯•ä¸šç¡•å£«ç”Ÿ66.25ä¸‡äººã€‚</strong></p>
<h2 id="å“²æ€å­¦æ„ğŸ“š"><a href="#å“²æ€å­¦æ„ğŸ“š" class="headerlink" title="å“²æ€å­¦æ„ğŸ“š"></a>å“²æ€å­¦æ„ğŸ“š</h2><p>æ”¾ç¼“èŠ‚å¥å¹¶è®°ä½ï¼šæˆ‘ä»¬æ‰€åšçš„ç»å¤§å¤šæ•°äº‹æƒ…éƒ½ä¸ä¼šæœ‰ä»€ä¹ˆæ˜æ˜¾ç»“æœï¼Œå¿™å¿™ç¢Œç¢Œå¸¸å¸¸æ˜¯æ€æƒ³æƒ°æ€§çš„è¡¨ç°å½¢å¼ï¼Œæ‡’å¾—æ€è€ƒã€ç›²ç›®è¡ŒåŠ¨ã€‚â€”â€”è’‚å§†</p>
<p>æ¯‹æ„ï¼Œæ¯‹å¿…ï¼Œæ¯‹å›ºï¼Œæ¯‹æˆ‘â€”â€”å­”å­æœ‰â€œå››ä¸â€ï¼Œå³ä¸è‡†æ–­ï¼Œä¸ç»å¯¹ï¼Œä¸å›ºæ‰§ï¼Œä¸è‡ªä»¥ä¸ºæ˜¯ã€‚</p>
<p>æˆ‘ä»¬å¤§å¯ä»¥æ´»æˆæˆ‘ä»¬è‡ªå·±ï¼Œæ´»å¾—æ›´æœ¬è‰²ä¸€ç‚¹ã€æ›´çœŸå®ä¸€ç‚¹ï¼Œåæ­£è¿˜æ˜¯æœ‰äººä¼šå–œæ¬¢ä½ ã€æœ‰äººä¼šä¸å–œæ¬¢ä½ ï¼Œä½†è‡³å°‘ä½ ä¼šæ›´å–œæ¬¢ä½ è‡ªå·±ã€‚â€”â€”é™ˆæœ</p>
<p>æˆ‘ä»¬å°½ä¸€åˆ‡æ‰€èƒ½æ¥å¯¹æŠ—æ˜å¤©çš„ä¸ç¡®å®š ã€‚å°½å¯èƒ½åœ°èµšé’± ,æå‡è‡ªå·±çš„åœ°ä½ , å‚¨å¤‡çŸ¥è¯† , ç§¯ç´¯äººè„‰ , æ¥å¯¹æŠ—è¿™ç§ä¸ç¡®å®šçš„äººç”Ÿ ã€‚ä½†æ˜¯ , è¶Šå¤šçš„ç§¯ç´¯å´å‚¬ç”Ÿå‡ºæ›´å¤šçš„ææƒ§ , æˆ‘ä»¬è¶Šæ¥è¶Šå®³æ€•å¤±å»å·²ç»æ‹¥æœ‰çš„ä¸€åˆ‡ ã€‚æˆ‘ä»¬é™·å…¥ä¸€ç§æ·±æ·±çš„è‡ªæ¬º ,é‚£å°±æ˜¯ç”¨è¡¨é¢çš„ â€œå¼ºå¤§ â€æ¥æ©ç›–è‡ªå·±æœ‰é™ ã€è„†å¼±ä¸æ— å¥ˆçš„æœ¬ç›¸ ã€‚ç„¶è€Œ , æˆ‘ä»¬æ˜¯ç»å¯¹ä¾èµ–çš„ç‰©ç§ , æˆ‘ä»¬ä¸å¯èƒ½ä»…é ç€è‡ªå·±å°±è·å¾—ç”Ÿå­˜ , è¿™ç§ç»å¯¹çš„ä¾èµ–æ„Ÿæ˜¯æˆ‘ä»¬çš„æœ¬ç›¸ , ä¹Ÿæ˜¯å¾ˆå¤šäººä¸€ç”Ÿä¸ä¹‹ç›¸éšçš„ææƒ§æ„Ÿçš„æ¥æº ã€‚å› æ­¤ , äººåªæœ‰æ‰¿è®¤å¹¶æ¥å—è‡ªå·±çš„æœ¬ç›¸ , æ‰èƒ½é™¤å»è‡ªæ¬ºæ‰€å¸¦æ¥çš„ææƒ§ ã€‚æˆ‘ä»¬å¿…é¡»æ¥å—è¿™æ ·ä¸€ä¸ªäº‹å® , é‚£å°±æ˜¯æ²¡æœ‰äººèƒ½æ´»åœ¨ç¡®å®šæ€§ä¹‹ä¸­ , å¯¹äººç”Ÿè€Œè¨€ ,æˆ‘ä»¬å”¯ä¸€èƒ½ç¡®å®šçš„å°±æ˜¯ä¸ç¡®å®šçš„äººç”Ÿ ã€‚ â€”â€”ç½—ç¿”</p>
<p>æ— è®ºæ˜¯èµ°åœ¨å‰é¢è¿˜æ˜¯èµ°åœ¨åé¢éƒ½æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬éƒ½èµ°åœ¨ä¸€ä¸ªå¹¶ä¸å­˜åœ¨çºµè½´çš„æ°´å¹³é¢ä¸Šï¼Œæˆ‘ä»¬ä¸æ–­å‘å‰è¿ˆè¿›å¹¶ä¸æ˜¯ä¸ºäº†ä¸è°ç«äº‰ã€‚ä»·å€¼åœ¨äºä¸æ–­è¶…è¶Šè‡ªæˆ‘ã€‚â€”â€”ã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹</p>
<p>Recogniseï¼Œthe excuses are not valid. Thereâ€™re conjured up, thereâ€™re fabricated, thereâ€™re lies. And how do you stop the lies? You stop the lies with the truth. and the truth is you have time, you have the skill, you have the knowledge and the support, and the will power, and the discipline, to get it done.</p>
<h2 id="ä¼‘æ¯å¨±ä¹ğŸ˜”"><a href="#ä¼‘æ¯å¨±ä¹ğŸ˜”" class="headerlink" title="ä¼‘æ¯å¨±ä¹ğŸ˜”"></a>ä¼‘æ¯å¨±ä¹ğŸ˜”</h2><p>è¿™å‘¨æ²¡ä»€ä¹ˆå¨±ä¹ï¼Œæ„Ÿè§‰è‡ªå·±æœ‰ç‚¹çƒ¦å°±ç»ƒç»ƒå­—ï¼</p>
<p><img data-src="https://tva3.sinaimg.cn/large/0084Tjdoly1gtwlqwi9wxj61l728mb0d02.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://ncepuee.github.io/2021/08/22/20210816-0822/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="èœèœçš„é»„">
      <meta itemprop="description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="School boy">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/22/20210816-0822/" class="post-title-link" itemprop="url">20210816-0822å‘¨æŠ¥</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-22 08:00:00" itemprop="dateCreated datePublished" datetime="2021-08-22T08:00:00+08:00">2021-08-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="æ¯å‘¨éŸ³ä¹ğŸµ"><a href="#æ¯å‘¨éŸ³ä¹ğŸµ" class="headerlink" title="æ¯å‘¨éŸ³ä¹ğŸµ"></a>æ¯å‘¨éŸ³ä¹ğŸµ</h2><iframe frameborder="0" height="80" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;"  src="//music.163.com/outchain/player?type=2&id=411314681&auto=0&height=66"></iframe>

<h2 id="è¿åŠ¨æ­Œå•ğŸƒâ€"><a href="#è¿åŠ¨æ­Œå•ğŸƒâ€" class="headerlink" title="è¿åŠ¨æ­Œå•ğŸƒâ€"></a>è¿åŠ¨æ­Œå•ğŸƒâ€</h2><p>é€‚åˆè·‘æ­¥è¿åŠ¨çš„æ­Œå•ï¼ˆï£¿Musicï¼‰</p>
<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/cn/playlist/running-fitness-sports/pl.u-Ldbqel5u27kmjlm"></iframe>

<h2 id="å­¦ä¹ è¿›å±•âœ"><a href="#å­¦ä¹ è¿›å±•âœ" class="headerlink" title="å­¦ä¹ è¿›å±•âœ"></a>å­¦ä¹ è¿›å±•âœ</h2><h3 id="æ˜ŸæœŸä¸€"><a href="#æ˜ŸæœŸä¸€" class="headerlink" title="æ˜ŸæœŸä¸€"></a>æ˜ŸæœŸä¸€</h3><p>å°†CCSçš„SVPWMçš„ä»£ç æˆåŠŸè¿è¡Œï¼Œèƒ½çœ‹åˆ°è„‰å†²æ³¢å½¢ï¼Œä½†æ˜¯å¯èƒ½ç›¸ä½è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥æš‚æ—¶å°±æ²¡æœ‰ç»§ç»­æ”¹ä»£ç ï¼Œä»£ç æ„Ÿè§‰æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç›¸ä½è¿˜ä¸çŸ¥é“å¦‚ä½•è®¾ç½®ï¼›</p>
<h3 id="æ˜ŸæœŸäºŒ"><a href="#æ˜ŸæœŸäºŒ" class="headerlink" title="æ˜ŸæœŸäºŒ"></a>æ˜ŸæœŸäºŒ</h3><p>å°†Clarkeå˜æ¢çš„ç†è®ºå’Œä»¿çœŸè¿›è¡Œäº†æ•´ç†ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.notion.so/Clarke-Clarke-301400a20eb14e8f962e856d3f3a8f71">ç­‰å¹…å€¼Clarkeå˜æ¢å’Œç­‰åŠŸç‡Clarkeå˜æ¢</a></p>
<p>å°†SVPWMçš„ç†è®ºè¿›è¡Œäº†é‡æ–°å›é¡¾ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.notion.so/SVPWM-89b447306e0b4c859679265940c6c28b">ç©ºé—´çŸ¢é‡çš„æ¦‚å¿µå’ŒSVPWMçš„å·¥ä½œåŸç†</a></p>
<p>å°†SVPWMçš„Simulinkä»¿çœŸè¿›è¡Œå›é¡¾æ€»ç»“ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.notion.so/SVPWM-Simulink-406b4f843e644115935db13e7c74c873">SVPWMçš„Simulinkå»ºæ¨¡ä»¿çœŸ</a></p>
<blockquote>
<p>åˆ†æäº†ä¸ºä»€ä¹ˆä¸¤ç§ä»¿çœŸçš„T0ã€T1ã€T2çš„æ³¢å½¢ä¸ä¸€è‡´ï¼Œæ‰¾å‡ºäº†åŸå› ï¼Œå¹¶è¿›è¡Œäº†æ€»ç»“ï¼Œå°†ä¸¤ç§ç”ŸæˆSVPWMçš„è„‰å†²çš„æ–¹æ³•è¿›è¡Œäº†æ±‡æ€»ï¼Œæ‰‡åŒºåˆ¤æ–­ç”±äºCCSç¼–ç¨‹ä½¿ç”¨çš„æ˜¯N=4C+2B+Aï¼Œæ‰€ä»¥Simulinkçš„ä»¿çœŸä¸­ä½¿ç”¨æ­¤æ–¹æ³•æ¥åˆ¤æ–­æ‰‡åŒºã€‚</p>
</blockquote>
<p>æŸ¥æ‰¾é˜…è¯»åŸºäºSimulinkçš„SVPWMè‡ªåŠ¨ä»£ç ç”Ÿæˆçš„æ–‡çŒ®ï¼š</p>
<p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gtm4tmloxej60lc0fzn2502.jpg" alt="image"></p>
<h3 id="æ˜ŸæœŸä¸‰"><a href="#æ˜ŸæœŸä¸‰" class="headerlink" title="æ˜ŸæœŸä¸‰"></a>æ˜ŸæœŸä¸‰</h3><p>éœ€è¦å®Œæˆc2833xæ¨¡å—çš„å‚æ•°è®¾ç½®ï¼ŒePWMAå’ŒePWMBæ¨¡å—çš„è®¾ç½®æˆ‘çš„æ€è·¯æ˜¯è¾“å…¥å ç©ºæ¯”ï¼Œç”±äºæ˜¯ç”¨æ—¶é’Ÿå‘¨æœŸå€¼ï¼Œæ‰€ä»¥è¦å°†å ç©ºæ¯”è½¬åŒ–æˆæ•°å­—ï¼Œæ±‚å‡ºTBPRD=1/12800/(2*(1/150000000))=5859ï¼Œå°†ä¸‰ç›¸çš„å ç©ºæ¯”ä¹˜ä»¥è¿™ä¸ªå€¼å°±å¯ä»¥å¾—åˆ°æ¯”è¾ƒå¯„å­˜å™¨çš„å€¼ï¼Œå°†å…¶è¾“å…¥ä½œä¸ºæ¯”è¾ƒå¯„å­˜å™¨CMPAå’ŒCMPBçš„å€¼ï¼›ä¸‰ç›¸ç”µè·¯æ‰€ä»¥ç”¨ä¸‰ä¸ªePWMæ¨¡å—ePWM1ã€ePWM2ã€ePWM3ï¼Œæ¯ä¸ªæ¨¡å—çš„ePWMAã€ePWMBå¯¹åº”çš„æ˜¯ä¸Šä¸‹æ¡¥è‡‚çš„è„‰å†²ã€‚</p>
<blockquote>
<p>ç”±äºæ˜¯å‘ä¸Šå‘ä¸‹è®¡æ•°ï¼Œæ¯”è¾ƒå¯„å­˜å™¨çš„å€¼ç”±å½’ä¸€åŒ–çš„å ç©ºæ¯”è¾“å…¥ï¼Œä¹˜ä»¥TBPRDçš„å€¼ï¼Œå¾—åˆ°æ•°å€¼ï¼Œä¹‹åå¯ä»¥è¿›è¡Œæ¯”è¾ƒï¼Œè¾“å…¥ä¸ºCMPAå’ŒCMPBçš„å€¼ã€‚</p>
</blockquote>
<p>ePWMAè®¾ç½®æ—¶é’Ÿå‘¨æœŸï¼Œé€šè¿‡è¾“å…¥ç¡®å®šCMPAçš„å€¼ï¼Œå½“æ—¶åŸºè®¡æ•°å™¨ç­‰äºé›¶æ—¶ï¼Œæ¸…é›¶ï¼Œå½“å‘ä¸Šè®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨ç­‰äºæ¯”è¾ƒå¯„å­˜å™¨CMPAçš„å€¼æ—¶ï¼Œå°†ePWMAè¿›è¡Œç¿»è½¬ï¼Œå½“å‘ä¸‹è®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨ç­‰äºæ¯”è¾ƒå¯„å­˜å™¨CMPAçš„å€¼æ—¶ï¼Œå°†ePWMAæ¸…é›¶ã€‚</p>
<p>ePWMBè®¾ç½®æ—¶é’Ÿå‘¨æœŸï¼Œé€šè¿‡è¾“å…¥ç¡®å®šCMPBçš„å€¼ï¼Œå½“æ—¶åŸºè®¡æ•°å™¨ç­‰äºé›¶æ—¶ï¼Œç½®ä½ï¼Œå½“å‘ä¸Šè®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨ç­‰äºæ¯”è¾ƒå¯„å­˜å™¨CMPBçš„å€¼æ—¶ï¼Œå°†ePWMBè¿›è¡Œç¿»è½¬ï¼Œå½“å‘ä¸‹è®¡æ•°æ—¶ï¼Œæ—¶åŸºè®¡æ•°å™¨ç­‰äºæ¯”è¾ƒå¯„å­˜å™¨CMPBçš„å€¼æ—¶ï¼Œå°†ePWMBç½®ä½ã€‚</p>
<p>å°†ePWMBæ¨¡å—è®¾ç½®æ­»åŒºæ—¶é—´ï¼Œä¸Šå‡æ²¿å’Œä¸‹é™æ²¿éƒ½è®¾ç½®3Î¼sçš„æ­»åŒºæ—¶é—´ï¼Œæ•°å­—ä¸º475ï¼ˆå‚è€ƒç›¸å…³æ–‡çŒ®è®¾ç½®ï¼‰ã€‚</p>
<p>æ³¢å½¢å‘ç°å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆå ç©ºæ¯”å…¨æ˜¯ä¸€æ ·çš„â€¦â€¦ï¼Ÿæˆ‘è§‰å¾—è‡ªå·±çš„åˆ†ææ²¡æœ‰é—®é¢˜â€¦</p>
<p><img data-src="https://tvax3.sinaimg.cn/large/0084Tjdoly1gtm4ul5ri4j61jk15ob2902.jpg" alt="image"></p>
<p>é‡æ–°ç†è§£ï¼šå¦‚æœç”¨åˆ‡æ¢æ—¶åˆ»Taã€Tbã€Tcä½œä¸ºæ¯”è¾ƒå¯„å­˜å™¨çš„è¾“å…¥å€¼ï¼Œé‚£ä¹ˆæˆ‘çš„ç›®çš„æ˜¯ä¸ºäº†è®©ç¡¬ä»¶è¾“å‡ºç›¸åŒçš„å ç©ºæ¯”ç½¢äº†ï¼Œæˆ‘ä»¿çœŸçš„Taã€Tbã€Tcçš„åˆ‡æ¢æ—¶åˆ»ï¼Œæœ€åè¦å’Œä¸€ä¸ªä¸‰è§’æ³¢è¿›è¡Œæ¯”è¾ƒï¼š</p>
<p><img data-src="https://tvax2.sinaimg.cn/large/0084Tjdoly1gtm4vyk7wtj615x0mgtby02.jpg" alt="image"></p>
<p>å½“æˆ‘çš„æ—¶åˆ»æ¯”Taã€Tbã€Tcå¤§æ—¶ï¼Œå°±å°†å…¶ç½®é«˜ç”µå¹³ï¼Œå¦åˆ™ç½®ä½ç”µå¹³ï¼Œæœ€åå¾—åˆ°çš„æ˜¯0101çš„è„‰å†²æ³¢å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨F28335ä¸­å®ç°åŒæ ·çš„è„‰å†²æ³¢å½¢çš„è¯ï¼Œé‚£ä¹ˆå¦‚æœç”¨å‘ä¸Šå‘ä¸‹è®¡æ•°æ¨¡å¼ï¼Œå’Œè¿™ä¸ªæ¯”è¾ƒå…¶å®æ˜¯ä¸€æ ·çš„æ„æ€ï¼Œæˆ‘ä»¬çŸ¥é“å‘ä¸Šå‘ä¸‹è®¡æ•°ï¼Œè®¡å®Œä¹‹åå°±æ˜¯ä¸€ä¸ªè„‰å†²å‘¨æœŸTpwmï¼ˆTsï¼‰</p>
<p>åœ¨ä»¿çœŸä¸­çš„æ¯”è¾ƒæ˜¯x=yçš„æ¯”è¾ƒï¼Œå½“Ts/2æ—¶ï¼Œyä¸ºTs/2ï¼Œå½“æ¯”Taå¤§æ—¶ï¼Œç½®é«˜ç”µå¹³ï¼Œå½“æ¯”Tbå¤§æ—¶ï¼Œç½®é«˜ç”µå¹³ï¼Œå½“æ¯”Tcå¤§æ—¶ï¼Œç½®é«˜ç”µå¹³ã€‚æ¯”ä¸‰è€…å°æ—¶ï¼Œå°±æ˜¯ä½ç”µå¹³ï¼›</p>
<p>ä½†æ˜¯åœ¨F28335ä¸­çš„ePWMæ¨¡å—ï¼Œè®¾ç½®ä¸ºå‘ä¸Šå‘ä¸‹è®¡æ•°æ—¶ï¼Œè®¡æ•°è®¡å®Œä¹‹åï¼Œå¯¹åº”çš„æ—¶é•¿ä¸ºTpwmï¼ˆTsï¼‰æ‰€ä»¥å’Œä»¿çœŸå¯¹æ¯”ï¼Œxçš„å˜åŒ–æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯yä¸ä¸€æ ·ï¼Œæ‰€ä»¥åŒæ ·çš„æ—¶åˆ»å¯¹åº”çš„å€¼ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å°†Taã€Tbã€Tcè¾“å…¥åˆ°ePWMæ¨¡å—ä¸­æ—¶éœ€è¦å°†å…¶é™¤ä»¥Ts/2ä¹‹åå†ä¹˜ä»¥TBPRDï¼Œå°†ä¸‰ä¸ªå€¼åˆ†åˆ«ä½œä¸ºCMPAå’ŒCMPBå¯„å­˜å™¨çš„å€¼ï¼ŒCMPAå¯„å­˜å™¨ä½œä¸ºä¸Šæ¡¥è‡‚çš„æ¯”è¾ƒå€¼ï¼ŒCMPBå¯„å­˜å™¨ä½œä¸ºä¸‹æ¡¥è‡‚çš„æ¯”è¾ƒå€¼ï¼ŒePWMAåˆå§‹çŠ¶æ€ä¸ºä½ç”µå¹³ï¼ˆæ—¶åŸºè®¡æ•°å™¨ä¸º0æ—¶ï¼‰ï¼Œå½“æ—¶åŸºè®¡æ•°å™¨å¤§äºCMPAå¯„å­˜å™¨çš„å€¼æ—¶ï¼ŒePWMAç½®é«˜ç”µå¹³ï¼Œå½“æ—¶åŸºè®¡æ•°å™¨çš„å€¼å°äºCMPAå¯„å­˜å™¨çš„å€¼æ—¶ï¼ŒePWMAæ¸…é›¶ï¼›ePWMBåˆå§‹çŠ¶æ€ä¸ºé«˜ç”µå¹³ï¼ˆæ—¶åŸºè®¡æ•°å™¨ä¸º0æ—¶ï¼‰ï¼Œå½“æ—¶åŸºè®¡æ•°å™¨å¤§äºCMPBå¯„å­˜å™¨çš„å€¼æ—¶ï¼Œç½®ä½ç”µå¹³ï¼Œå½“æ—¶åŸºè®¡æ•°å™¨å°äºCMPBå¯„å­˜å™¨çš„å€¼æ—¶ï¼Œç½®é«˜ç”µå¹³ã€‚</p>
<p><img data-src="https://tva3.sinaimg.cn/large/0084Tjdoly1gtm4wflnirj61jk0kq7r202.jpg" alt="image"></p>
<p>ç„¶åè¿è¡Œç¨‹åºä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯å°±æ˜¯å‡ºæ¥æ³¢å½¢æ„Ÿè§‰ä¸å¯¹å› ä¸ºå ç©ºæ¯”å¥½åƒéƒ½ä¸€æ ·â€¦â€¦è‡ªå·±æ„Ÿè§‰åˆ†ææ²¡æœ‰é—®é¢˜ã€‚æŸ¥çœ‹äº†æ–‡çŒ®ä¹Ÿæ˜¯è¿™æ ·æ“ä½œã€‚</p>
<h3 id="æ˜ŸæœŸå››"><a href="#æ˜ŸæœŸå››" class="headerlink" title="æ˜ŸæœŸå››"></a>æ˜ŸæœŸå››</h3><p>å’Œç‰›è€å¸ˆè¿›è¡Œäº†äº¤æµï¼Œæ ¹æ®ç‰›è€å¸ˆçš„æŒ‡å¯¼ï¼Œæ¢äº†ä¸€ä¸ªæ€è·¯ï¼Œå…ˆåšä¸€ä¸ªSPWMçš„Simulinkæ¨¡å‹ï¼Œç„¶åçœ‹èƒ½ä¸èƒ½å‡ºæ³¢å½¢ï¼š</p>
<p>é¦–å…ˆæ­å»ºäº†ä¸€ä¸ªSPWMçš„æ¨¡å‹ï¼Œè¾“å…¥ä¸‰ç›¸å¯¹ç§°çš„äº¤æµä½™å¼¦æ³¢ï¼Œç”±äºè¦ä¸è½½æ³¢è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è®¾ç½®æ­£å¼¦æ³¢å‘ç”Ÿå™¨å¹…å€¼ä¸º1ï¼Œç„¶åå°†å…¶åŠ 1ï¼Œå¾—åˆ°åœ¨0~1å˜åŒ–çš„ä¸‰ç›¸å¯¹ç§°çš„ä½™å¼¦æ³¢å½¢ï¼›</p>
<p>ä¸ºäº†å’Œå‘ä¸Šå‘ä¸‹çš„è½½æ³¢è¿›è¡Œæ¯”è¾ƒï¼Œè½½æ³¢è®¾ç½®çš„é¢‘ç‡ä¸º12.8kHzï¼Œç³»ç»Ÿé¢‘ç‡è®¾ç½®ä¸º150MHzï¼Œæ‰€ä»¥TBPRD=5859ï¼Œè¦å’Œè¿™æ ·çš„è½½æ³¢æ¯”è¾ƒçš„è¯ï¼Œå°±éœ€è¦å°†ä½™å¼¦æ³¢çš„å¹…å€¼åœ¨(0,5859)å˜åŒ–ï¼Œæ‰€ä»¥åœ¨ä¸Šè¿°çš„åŸºç¡€ä¸Šä¹˜ä»¥ä¸€ä¸ªç³»æ•°5859ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°æ¯”è¾ƒäº†ã€‚</p>
<p>ç„¶åè®¾ç½®ePWMæ¨¡å—ï¼š</p>
<p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gtm4y5hdo1j60k80kv7bw02.jpg" alt="image"></p>
<p>ePWMAå’ŒePWMBä¸­å·²ç»è®¾ç½®äº†æ›´æ–°æ¯”è¾ƒå¯„å­˜å™¨çš„å€¼ï¼Œåœ¨Compare Value Reload Conditionä¸­å½“æ—¶åŸºè®¡æ•°å™¨ç­‰äºé›¶çš„æ—¶å€™è£…è½½æ¯”è¾ƒå¯„å­˜å™¨çš„å€¼ã€‚æ‰€ä»¥åé¢å°±å¯ä»¥ä¸ç”¨è®¾ç½®ä¸­æ–­äº†~</p>
<p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gtm4ytk7zqj60k80kvn6v02.jpg" alt="image"></p>
<p><img data-src="https://tva4.sinaimg.cn/large/0084Tjdoly1gtm4z9357bj60k80kvk0z02.jpg" alt="image"></p>
<p>æˆ‘å‘ç°å¦‚æœåŒæ—¶è¾“å…¥CMPAå’ŒCMPBä¸ºç›¸åŒå€¼ï¼Œå¦‚æœePWMBä¹Ÿè®¾ç½®Inputï¼Œæœ€åè¾“å‡ºçš„PWMçš„é¢‘ç‡ä¼šå˜æˆä¸¤å€ï¼Œæˆ‘è®¾ç½®çš„è½½æ³¢é¢‘ç‡ä¸º12.8kHzï¼Œä½†æ˜¯å¦‚æœePWMBçš„CMPBä¹Ÿè®¾ç½®inputï¼Œåˆ™é¢‘ç‡å°±å˜æˆäº†25.6kHzï¼Œä¹Ÿå°±æ˜¯è®¾ç½®çš„é¢‘ç‡çš„ä¸¤å€ã€‚æ‰€ä»¥ä¸è¦è®¾ç½®CMPBï¼Œè®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¯„å­˜å™¨çš„è¾“å…¥å€¼å³å¯ï¼ç”¨CMPAå°±ä¸ç”¨CMPBæ¯”è¾ƒå¯„å­˜å™¨ã€‚<strong>ï¼ˆæ˜ŸæœŸå››ä¸‹åˆæ›´æ–°ï¼šå¥½åƒè®¾ç½®äº†è¿˜æ˜¯ä¸è¡Œè¿˜æ˜¯ä¸€æ ·çš„é¢‘ç‡ğŸ¤¦â€ï¼‰</strong></p>
<p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gtm5073e5cj61jk15oe8102.jpg" alt="image"></p>
<p>ä¹‹åæ˜¯è®¾ç½®æ­»åŒºæ¨¡å—ï¼Œæ•°å­—ä¸º950æ—¶å¯¹åº”çš„æ­»åŒºæ—¶é—´å¤§è‡´æ˜¯6Î¼sï¼Œä½¿èƒ½ePWMAå’ŒePWMBçš„æ­»åŒºæ¨¡å—ï¼Œä¹‹åè®¾ç½®æ­»åŒºçš„æ¨¡å¼ï¼Œæœ‰AHCã€ALCã€AHã€ALï¼Œå¯¹åº”çš„è¾“å‡ºæ³¢å½¢å¦‚ä¸Šå›¾å³è¾¹æ‰€ç¤ºã€‚REDå’ŒFEDåˆ†åˆ«å¯¹åº”çš„æ˜¯æ³¢å½¢çš„ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿ï¼Œä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œå»¶æ—¶ã€‚å…¶ä»–çš„å‡ ä¸ªæ¨¡å—å¯ä»¥ä¸ç”¨ã€‚</p>
<p>æœ€åç‚¹å‡»<code>Ctrl+B</code>å³å¯ç¼–è¯‘ç¨‹åºå¹¶åŠ è½½åˆ°F28335ï¼Œæ¿å­ä¸Šé¢çš„1å¯¹åº”çš„ePWM1çš„ePWMAæ¨¡å—ï¼Œ2å¯¹åº”ePWM1çš„ePWMBæ¨¡å—ã€‚å°†æœé‚¦çº¿æ¥åˆ°ä¸Šé¢ï¼Œåœ¨ç¤ºæ³¢å™¨ä¸Šè¿›è¡Œæ˜¾ç¤ºã€‚</p>
<h3 id="æ˜ŸæœŸäº”"><a href="#æ˜ŸæœŸäº”" class="headerlink" title="æ˜ŸæœŸäº”"></a>æ˜ŸæœŸäº”</h3><p>ç»ˆäºå®ç°äº†Matlabçš„ä»¿çœŸï¼å¤ªèµäº†ï¼Œæ„Ÿè°¢ç‰›è€å¸ˆçš„å¸®åŠ©ï¼</p>
<p>ä¸‹é¢çš„è§†é¢‘è¯·ç¿»å¢™è§‚çœ‹ğŸ˜…</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/m0qA1nVFbRg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3 id="æ˜ŸæœŸå…­"><a href="#æ˜ŸæœŸå…­" class="headerlink" title="æ˜ŸæœŸå…­"></a>æ˜ŸæœŸå…­</h3><p>å…³äºæ—¶é’Ÿé¢‘ç‡çš„ä¸€äº›é—®é¢˜åˆ†æï¼šæˆ‘æ˜¯æŒ‰ç…§å¢å‡æ¨¡å¼çš„å…¬å¼æ±‚TBPRDçš„å€¼ï¼Œæ ¹æ®ä¹¦ä¸Š207é¡µçš„è®¾ç½®ï¼ŒCLKDIVå’ŒHSPCLKDIVçš„å€¼æŒ‰é“ç†éƒ½è®¾ç½®000ï¼Œè¿™æ ·TBCLKçš„é¢‘ç‡ä¸ºç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡150MHzï¼Œä½†æ˜¯ç”¨CCSä»£ç epwmåˆå§‹åŒ–è®¾ç½®000ï¼Œ000ä¹‹åå‡ºæ¥çš„é¢‘ç‡ä¸æ˜¯12.8kHzã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EPwm1Regs.TBCTL.bit.HSPCLKDIV &#x3D;0;&#x2F;&#x2F;1 TB_DIV1;</span><br><span class="line">EPwm1Regs.TBCTL.bit.CLKDIV &#x3D; 1;&#x2F;&#x2F;2  75M</span><br><span class="line">åˆ«äººéƒ½è®¾ç½®ä¸ºè¿™æ ·çš„å€¼ï¼Œå‡ºæ¥å°±æ˜¯æ­£ç¡®çš„é¢‘ç‡â€¦</span><br></pre></td></tr></table></figure>
<p>TBCLK=SYSCLKOUT/(HSPCLKDIVÃ—CLKDIV)ï¼ŒMatlabçš„HSPCLKDIVå’ŒCLKDIVæˆ‘éƒ½è®¾ç½®æˆ1ï¼Œä¹Ÿå°±æ˜¯ä¸åˆ†é¢‘ï¼Œé‚£ä¹ˆTBCLKçš„é¢‘ç‡æ‰æ˜¯150MHzï¼Œè¿™æ ·å¢å‡æ¨¡å¼ä¸‹Tpwm=2<em>TBPRD</em>TBCLKï¼ŒTBPRDçš„å€¼ä¸º5859ï¼Œä½†æ˜¯éƒ½è®¾ç½®ä¸åˆ†é¢‘å‡ºæ¥çš„ç¤ºæ³¢å™¨PWMé¢‘ç‡æ˜¾ç¤ºæ˜¯25.6kHzï¼Œä¸çŸ¥é“ä¸ºå•¥â€¦è§‚å¯Ÿä¸€ä¸ªPWMçš„å‘¨æœŸå€¼æ˜¯æ­£ç¡®çš„ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç¤ºæ³¢å™¨æ²¡è®¾ç½®å¥½ï¼›</p>
<p>å°†CCSè‡ªå·±çš„ç¼–ç¨‹çš„ä»£ç è¿›è¡Œäº†æ•´ç†ï¼Œç¼–ç¨‹ä¸å†™æ³¨é‡Šï¼Œå°±å’Œæ‹‰å±ä¸æ“¦å±è‚¡æ˜¯ä¸€æ ·çš„ï¼å†™ä»£ç ä¸€å®šè¦å†™æ³¨é‡Šï¼ç›®å‰è‡ªå·±å†™çš„ä»£ç è¿˜æ²¡æœ‰ç¼–è¯‘æˆåŠŸï¼Œè¿˜è¦ç»§ç»­åŠªåŠ›ä¿®æ”¹ä»£ç â€¦â€¦</p>
<h2 id="ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯"><a href="#ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯" class="headerlink" title="ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯"></a>ä¸€äº›æ„Ÿæ‚ŸğŸ¤¯</h2><p>ä»Šå¤©ä¸Šåˆæˆ‘å¦ä¸€ä¸ªæ•™ç ”å®¤è€å¸ˆæŠŠä¸€ä¸ªå¸ˆå…„éª‚æƒ¨äº†ï¼Œè…¾è®¯ä¼šè®®æ±‡æŠ¥å•¥éƒ½æ²¡åšï¼Œè¯´å«ä»–é€€å­¦ï¼Œè…¾è®¯ä¼šè®®æ±‡æŠ¥å•¥éƒ½æ²¡åšï¼Œå¥½åƒä¸æ˜¯ä¸€æ¬¡ä¸¤æ¬¡ï¼Œè€å¸ˆæƒ³æŠŠä»–è¾äº†ï¼Œå«é‚£ä¸ªå¸ˆå…„ç”³è¯·ä¼‘å­¦æˆ–é€€å­¦ï¼Œä¸è¦æµªè´¹å¤§å¥½é’æ˜¥ï¼Œå–œæ¬¢æ‰“æ¸¸æˆå°±å»åšæ¸¸æˆä¸»æ’­æŒ£é’±ã€‚æ‰€ä»¥ç ”ç©¶ç”ŸçœŸçš„ä¸èƒ½æ‘¸é±¼å•Šï¼Œä¸ç„¶å¯¼å¸ˆå°±ç»™è¾é€€äº†ï¼</p>
<h2 id="æˆ‘çš„ä¹¦å•ğŸ“š"><a href="#æˆ‘çš„ä¹¦å•ğŸ“š" class="headerlink" title="æˆ‘çš„ä¹¦å•ğŸ“š"></a>æˆ‘çš„ä¹¦å•ğŸ“š</h2><p>çªç„¶å‘ç°è‡ªå·±å¥½åƒè¯»äº†ä¸å°‘ä¹¦ï¼Œè™½ç„¶æ„Ÿè§‰æ²¡å•¥ç”¨ï¼ŒåŒ…æ‹¬ä¸“ä¸šä¹¦å·²ç»å·®ä¸å¤šå¿«ä¸€ç™¾å¤šæœ¬äº†ï¼Œæ¯è¯»å®Œä¸€æœ¬ä¹¦æˆ‘éƒ½ä¼šè®°å½•ä¸‹è¯»è¿‡çš„ä¹¦ç±å°é¢å¹¶ä¸”ä¿å­˜è‡ªå·±çš„è¯»ä¹¦ç¬”è®°ã€‚</p>
<p>è¿™æ˜¯è‡ªå·±çš„è¯»è¿‡çš„ä¹¦ç±æ•´ç†ï¼š<a target="_blank" rel="noopener" href="https://reinvented-star-45f.notion.site/6ec651c06b2a4e388acd240a55a9ccba?v=c56fde318a834f93ad18770a10a2a3b7">æˆ‘çš„è¯»ä¹¦æ‘˜è®°</a></p>
<p>è¿™æ˜¯æˆ‘æ”¶é›†çš„è¯¾å¤–ä¹¦ç±ç”µå­ä¹¦ï¼š<a target="_blank" rel="noopener" href="https://reinvented-star-45f.notion.site/63d59fb3e36a4f2ebdc39fb2b8e217da?v=34fa3d60453e4702954b4cb5c42d525e">ä¸€äº›è¯¾å¤–ç”µå­ä¹¦èµ„æº</a></p>
<p>æœ€è¿‘è¯»å®Œäº†ã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹ï¼Œè¿™æ˜¯ã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹çš„è¯»ä¹¦ç¬”è®°ï¼š<a target="_blank" rel="noopener" href="https://reinvented-star-45f.notion.site/da99268613ce41ef873e1987a55cb729">è¢«è®¨åŒçš„å‹‡æ°”è¯»ä¹¦æ‘˜è®°</a></p>
<p>ç„¶åå¼€å§‹è¯»ã€Šè®¤è¯†ç»æµã€‹</p>
<p><img data-src="https://tva4.sinaimg.cn/large/0084Tjdoly1gtm55mogsej60rm13jtzm02.jpg" alt="è¿ªæ©Â·å¡å°”å…°ã€è®¤è¯†ç»æµã€‘"></p>
<p>æˆ‘æŠŠæˆ‘çœ‹è¿‡çš„è¯¾å¤–ä¹¦ï¼ˆä¸åŒ…æ‹¬è‡ªå·±çš„ä¸“ä¸šè¯¾çš„ä¹¦ï¼‰çš„å°é¢è¿›è¡Œäº†æ”¶é›†ï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/0084Tjdoly1gthi209e6jj617p0pq7wh02.jpg" alt="æˆ‘çš„ä¹¦å•ï¼ˆæˆªè‡³20210822ï¼‰"></p>
<p>åšæŒè¯»ä¹¦ï¼Œæå‡è‡ªå·±çš„è®¤çŸ¥ï¼Œä¿æŒå†…å¿ƒçš„ç«¥çœŸï¼Œåšä¸€ä¸ªä¸ä¸–ä¿—çš„äººï¼</p>
<h2 id="ä¼‘æ¯å¨±ä¹âœŒ"><a href="#ä¼‘æ¯å¨±ä¹âœŒ" class="headerlink" title="ä¼‘æ¯å¨±ä¹âœŒ"></a>ä¼‘æ¯å¨±ä¹âœŒ</h2><p>æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªéå¸¸æ£’çš„è§†é¢‘ï¼Œ1999å¹´å®è²ç¯çš„åŠ¨ç”»ç‰‡ï¼Œèµ·å› æ˜¯æˆ‘å¬å¼ ä¿¡å“²çš„ã€Šçˆ±å°±ä¸€ä¸ªå­—ã€‹ï¼Œç«Ÿç„¶å‘ç°è¿™æ˜¯åŠ¨ç”»ç‰‡å®è²ç¯çš„ä¸»é¢˜æ›²ï¼›å†å»Bç«™ä¸€æœç«Ÿç„¶å‘ç°ä»¥å‰çš„å®è²ç¯é…éŸ³é˜µå®¹ç«Ÿç„¶æœ‰è¿™ä¹ˆå¤šåäººï¼ŒäºŒéƒç¥æ˜¯å§œæ–‡é…éŸ³â€¦å­™æ‚Ÿç©ºæ˜¯é™ˆä½©æ–¯é…éŸ³â€¦â†“â†“</p>
<iframe src="//player.bilibili.com/player.html?aid=969960654&bvid=BV11p4y1r7Hi&cid=244030022&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>1999 ç”µå½±ã€å¤§é™†ã€‘ã€Šå®è²ç¯ã€‹bï¼ˆï¿£â–½ï¿£ï¼‰dã€€</p>
<iframe src="//player.bilibili.com/player.html?aid=8317208&bvid=BV1Js41187V8&cid=13686142&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>æ¨èçºªå½•ç‰‡å¾ç«¥å¯¼æ¼” æ¸¸æ°‘ä¸‰éƒ¨æ›²ã€Šç®—å‘½ã€‹ã€Šéº¦æ”¶ã€‹</p>
<iframe src="//player.bilibili.com/player.html?aid=5846667&bvid=BV1cs411k72E&cid=9494127&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<iframe src="//player.bilibili.com/player.html?aid=329458766&bvid=BV1RA411n7HL&cid=232382089&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>æ˜ŸæœŸå…­å‘ç°äº†ä¸€æ¬¾éå¸¸å¥½ç”¨çš„å®‰å“è½¯ä»¶ï¼šæè·³è·³</p>
<p>å®ƒå¯ä»¥è‡ªåŠ¨è·³è¿‡å®‰å“å¹¿å‘Šï¼ŒçœŸçš„éå¸¸å¥½ç”¨ï¼</p>
<p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://wwe.lanzoui.com/iGC8fsyie8h">ç‚¹æˆ‘ä¸‹è½½ä¸ç»™èµ„æœ¬æ°çƒ‚é’±çš„æœºä¼š</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://ncepuee.github.io/2021/08/15/20210809-0815/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="èœèœçš„é»„">
      <meta itemprop="description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="School boy">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/15/20210809-0815/" class="post-title-link" itemprop="url">20210809-0815å‘¨æŠ¥</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-15 08:00:00" itemprop="dateCreated datePublished" datetime="2021-08-15T08:00:00+08:00">2021-08-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ä¸€å‘¨çœŸçš„å¤ªå¿«äº†ï¼æ„Ÿè§‰è‡ªå·±æœ‰ç‚¹ç¬¨ï¼Œä½†æ˜¯å‹‰å¼ºè¿˜èƒ½å­¦ï¼Œæ¯å¤©è„‘æ±éƒ½æ„Ÿè§‰æ¦¨å¹²äº†ğŸ¤¦â€ï¼Œæœç„¶è„‘åŠ›åŠ³åŠ¨æ˜¯æœ€ç´¯çš„ï¼Œå“â€¦ï¼Œä»¥ä¸‹æ˜¯ä¸€å‘¨ä¸ªäººæ€»ç»“ï¼ˆ20210809-0815ï¼‰</p>
<iframe frameborder="0" height="80" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" src="//music.163.com/outchain/player?type=2&id=36392026&auto=0&height=66"></iframe>

<h2 id="è¿åŠ¨æ­Œå•ğŸµ"><a href="#è¿åŠ¨æ­Œå•ğŸµ" class="headerlink" title="è¿åŠ¨æ­Œå•ğŸµ"></a>è¿åŠ¨æ­Œå•ğŸµ</h2><p>é€‚åˆè·‘æ­¥è¿åŠ¨çš„æ­Œå•ï¼ˆï£¿Musicï¼‰</p>
<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/cn/playlist/running-fitness-sports/pl.u-Ldbqel5u27kmjlm"></iframe>

<h2 id="åŒé—¨åƒç“œğŸ‰"><a href="#åŒé—¨åƒç“œğŸ‰" class="headerlink" title="åŒé—¨åƒç“œğŸ‰"></a>åŒé—¨åƒç“œğŸ‰</h2><p>å’Œå¸ˆå…„å¸ˆå§å…¶å®ä¹Ÿå·®ä¸äº†å‡ å²ï¼Œæ„Ÿè§‰å¤§å®¶éƒ½æ˜¯åŒé¾„äººï¼Œäººéƒ½éå¸¸å¥½ï¼Œç–«æƒ…å°æ ¡å¤§å®¶éƒ½ä¸èƒ½å›å®¶ï¼Œç„¶åç‰¹åˆ«æƒ³åƒè¥¿ç“œ</p>
<p>æˆ‘å’Œæˆ‘åŒå­¦å°±ç‚¹äº†æ°´æœè¶…å¸‚çš„å¤–å–ï¼Œå¤–å–ä¸‰åèµ·é€ï¼Œäºæ˜¯å°±ä¹°äº†ä¸€ä¸ªå¤§è¥¿ç“œã€‚</p>
<p>å’Œå¸ˆå…„å¸ˆå§ä¸€èµ·åˆ†ç€åƒï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œä¸€èµ·åƒç“œæ‰çˆ½ï¼Œç»™å¦å¤–ä¸€ä¸ªè€å¸ˆçš„å¸ˆå…„ä»¬ä¹Ÿé€äº†è¥¿ç“œåƒğŸ˜‚ï¼Œç„¶åç»ˆäºæŠŠä¸€ä¸ªä¸‰åå¤šæ–¤çš„å¤§è¥¿ç“œåˆ†å®Œäº†ï¼</p>
<p><img data-src="https://tvax2.sinaimg.cn/large/0084Tjdoly1gt9o0gaojyj31400u0jvk.jpg" alt="åƒç“œå›¾ğŸ‰"></p>
<h2 id="å­¦ä¹ è¿›å±•ğŸ“•"><a href="#å­¦ä¹ è¿›å±•ğŸ“•" class="headerlink" title="å­¦ä¹ è¿›å±•ğŸ“•"></a>å­¦ä¹ è¿›å±•ğŸ“•</h2><p>æ•ˆç‡å±å®ä¸é«˜/(ã„’oã„’)/~~</p>
<p>æ˜ŸæœŸä¸€ã€æ˜ŸæœŸäºŒï¼šçœ‹å®Œäº†DSPèŠ¯ç‰‡çš„ePWMæ¨¡å—çš„ä»‹ç»ï¼Œäº†è§£äº†å„ä¸ªæ¨¡å—çš„å®é™…ä½œç”¨ï¼Œä»¥åŠå¯¹å¯„å­˜å™¨çš„å„ä½ä¿¡æ¯è¡¨è¿›è¡Œäº†äº†è§£ï¼Œæ„Ÿè§‰å•¥éƒ½æ²¡çœ‹æ‡‚â€¦è¿˜æ˜¯è¦è¿›è¡Œå®é™…çš„ç¼–ç¨‹æ‰èƒ½æ…¢æ…¢ç†è§£ï¼</p>
<p>æ˜ŸæœŸä¸‰ï¼šçœ‹å®Œäº†DSPèŠ¯ç‰‡çš„èŠ¯ç‰‡èµ„æºã€æ—¶é’Ÿç”µè·¯åŠç³»ç»Ÿæ§åˆ¶ã€å­˜å‚¨å™¨åŠå…¶åœ°å€åˆ†é…ã€‚éƒ½æ˜¯å¤§æ¦‚äº†è§£ä¸‹ï¼Œå®åœ¨æ˜¯çœ‹ä¸æ‡‚ï¼Œè¿˜æ˜¯è§‰å¾—è¦å®é™…åšä¸€ä¸ªå·¥ç¨‹æ‰èƒ½æ·±å…¥äº†è§£å…¶åŸç†ã€‚</p>
<p>æ˜ŸæœŸå››ï¼šä¸æƒ³çœ‹è§†é¢‘äº†ï¼Œçœ‹äº†å¦‚ä½•å»ºç«‹ä¸€ä¸ªCCSå·¥ç¨‹Projectæ–‡ä»¶åæ€ä¹ˆåˆå§‹åŒ–è®¾ç½®åº“æ–‡ä»¶å’Œæºæ–‡ä»¶ã€‚åœ¨ç¬”è®°è½¯ä»¶ä¸­è®°å½•äº†YouTuberçš„å°åº¦äººçš„æ•™ç¨‹ï¼Œåªè¦æ¯æ¬¡æ–°å»ºProjectå·¥ç¨‹ï¼Œéƒ½éœ€è¦è¿™æ ·æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆå³é”®é¡¹ç›®ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span><br><span class="line"></span><br><span class="line">åœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†ä¸­ï¼Œé€‰æ‹©&#96;Advanced&#96;ï¼Œé€‰æ‹©&#96;Link to alternate location(Linked Folder)&#96;</span><br><span class="line"></span><br><span class="line">é€‰æ‹©&#96;Browseâ€¦&#96;ï¼Œæ‰¾åˆ°ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼štiâ†’controlSUITEâ†’device_supportâ†’f2833xâ†’v142â†’DSP2833x_commonæ–‡ä»¶å¤¹ï¼Œç‚¹å‡»OKï¼Œä¹‹åç‚¹å‡»Finishï¼Œå®Œæ•´è·¯å¾„ï¼šD:\ti\controlSUITE\device_support\f2833x\v142\DSP2833x_common</span><br><span class="line"></span><br><span class="line">ä¹‹åä¼šåœ¨Projecté¡¹ç›®ä¸­å¯¼å…¥DSP2833x_commonæ–‡ä»¶å¤¹</span><br><span class="line"></span><br><span class="line">DSP2833x_commonæ–‡ä»¶å¤¹ä¸‹æœ‰å¥½å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬åªéœ€è¦includeæ–‡ä»¶å¤¹å’Œsourceæ–‡ä»¶å¤¹ï¼Œé€‰æ‹©å…¶ä»–çš„æ–‡ä»¶å¤¹ï¼Œå³é”®ç‚¹å‡»&#96;Exclude from Build&#96;</span><br><span class="line"></span><br><span class="line">åŒç†å†æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé€‰æ‹©&#96;Browseâ€¦&#96;ï¼Œæ‰¾åˆ°ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼štiâ†’controlSUITEâ†’device_supportâ†’f2833xâ†’v142â†’DSP2833x_headersæ–‡ä»¶å¤¹ï¼Œç‚¹å‡»OKï¼Œç‚¹å‡»Finishï¼Œå³å¯å¯¼å…¥è¯¥æ–‡ä»¶å¤¹ã€‚</span><br><span class="line"></span><br><span class="line">DSP2833x_headersæ–‡ä»¶å¤¹ä¸‹æœ‰å››ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿ç•™includeæ–‡ä»¶å¤¹å’Œsourceæ–‡ä»¶å¤¹ï¼Œå°†gelæ–‡ä»¶å¤¹Exclude from Buildï¼Œé€‰æ‹©cmdæ–‡ä»¶å¤¹ä¸‹çš„ç¬¬ä¸€ä¸ªcmdæ–‡ä»¶&#96;DSP2833x_Headers_BIOS.cmd&#96;æ–‡ä»¶ï¼Œå°†å…¶Exclude from Buildã€‚åªä¿ç•™&#96;DSP2833x_Headers_nonBIOS.cmd&#96;æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶åæ‰¾åˆ°DSP2833x_commonæ–‡ä»¶å¤¹ä¸‹çš„sourceæ–‡ä»¶å¤¹ä¸‹çš„&#96;DSP2833x_SWPrioritizedDefaultsr.c&#96;æ–‡ä»¶å’Œ&#96;DSP2833x_SWPrioritizedPieVect.c&#96;æ–‡ä»¶ï¼Œå°†ä¸¤ä¸ªæ–‡ä»¶Exclude from Buildã€‚</span><br><span class="line"></span><br><span class="line">ä¹‹åè‡ªå·±å†æ–°å»ºä¸€ä¸ªincludeæ–‡ä»¶å¤¹å’Œsrcæ–‡ä»¶å¤¹åˆ†åˆ«å­˜æ”¾è‡ªå·±å®šä¹‰çš„åº“æ–‡ä»¶å’Œæºæ–‡ä»¶ï¼Œå³ &#96;.h&#96; å’Œ &#96;.c&#96; çš„åç¼€æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">åœ¨CCS Projectå³é”®é€‰æ‹©&#96;Properties&#96;ï¼Œé€‰æ‹©&#96;General&#96;ä¸‹çš„&#96;Product&#96;ï¼Œå–æ¶ˆå‹¾é€‰&#96;XDAIS&#96;ï¼Œå†åœ¨&#96;Include Options&#96;æŠŠDSP2833x_commonæ–‡ä»¶å¤¹ä¸‹çš„includeæ–‡ä»¶å¤¹å’ŒDSP2833x_headersæ–‡ä»¶å¤¹ä¸‹çš„includeæ–‡ä»¶å¤¹ä»¥åŠè‡ªå·±å®šä¹‰çš„includeæ–‡ä»¶å¤¹çš„è·¯å¾„æ·»åŠ åˆ°å˜é‡ã€‚</span><br><span class="line"></span><br><span class="line">æœ€åå³é”®ç‚¹å‡»Build Projectå³å¯æˆåŠŸç¼–è¯‘ç”Ÿæˆçƒ§å†™.outæ–‡ä»¶ï¼</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœè¿è¡Œå‡ºç°è¿™ä¸ªæŠ¥é”™ï¼š#10234-D: unresolved symbols remainï¼›è¯´æ˜æ˜¯æºæ–‡ä»¶å‡ºé”™äº†ï¼æŸ¥çœ‹æºæ–‡ä»¶æ˜¯å¦å†™å¯¹äº†ï¼</p>
</blockquote>
<p>æŸ¥æ‰¾äº†åŸºäºTMS320F28335çš„SVPWMç®—æ³•çš„ä¸€äº›è®ºæ–‡â†“â†“</p>
<p><img data-src="https://tva2.sinaimg.cn/large/0084Tjdoly1gtec05ith6j60ri0hnk9v02.jpg" alt="ä¸€äº›ä¸è¯¦ç»†çš„è®ºæ–‡"></p>
<p>æ˜ŸæœŸäº”ï¼šå°†SVPWMä»£ç è¿›è¡Œäº†æ’°å†™å’Œåˆ†æâ€¦â€¦</p>
<h2 id="å®ç”¨å·¥å…·ğŸ”§"><a href="#å®ç”¨å·¥å…·ğŸ”§" class="headerlink" title="å®ç”¨å·¥å…·ğŸ”§"></a>å®ç”¨å·¥å…·ğŸ”§</h2><p>æŠŠåšæ¯•ä¸šè®¾è®¡æ—¶å€™è‡ªå·±åšçš„å­¦æ ¡çš„è®ºæ–‡æ¨¡æ¿ä½œä¸ºè‡ªå·±çš„ç§‘ç ”ç¬”è®°æœ¬ğŸ˜€ï¼Œæ„Ÿè§‰è¿˜è¡Œï¼Œå¦‚æœæœ‹å‹ä»¬ä¹Ÿéœ€è¦æ¬¢è¿ä¸‹è½½~</p>
<p>School boyçš„ç§‘ç ”ç¬”è®°æœ¬ =&gt; <a target="_blank" rel="noopener" href="https://wwe.lanzoui.com/inE3vsh6reh">ç¬”è®°æœ¬æ¨¡æ¿</a></p>
<p>ç¬”è®°æœ¬æ¨¡æ¿çš„æ ‡é¢˜æ ¼å¼ã€ç›®å½•ã€é¢˜æ³¨ç­‰ç­‰éƒ½å…¨éƒ¨æŒ‰ç…§è‡ªå·±çš„å­¦æ ¡è¦æ±‚è®¾ç½®å¥½äº†ï¼Œæ‰€ä»¥åªéœ€è¦å†™ä¸œè¥¿è®°å½•å³å¯ï¼</p>
<h2 id="ç–«æƒ…ç”Ÿæ´»ğŸ«"><a href="#ç–«æƒ…ç”Ÿæ´»ğŸ«" class="headerlink" title="ç–«æƒ…ç”Ÿæ´»ğŸ«"></a>ç–«æƒ…ç”Ÿæ´»ğŸ«</h2><p>å› ä¸ºç–«æƒ…ï¼Œå­¦æ ¡ä¸å‡†å‡ºé—¨ï¼Œåªèƒ½å¾…åœ¨å­¦æ ¡ï¼Œç„¶åå­¦æ ¡é£Ÿå ‚æš‘å‡æ¯å¤©æ—©ä¸Š7:30-8:30ã€ä¸­åˆ11:30-12:30ã€æ™šä¸Š5:30-6:30æ‰ä¾›åº”ï¼Œæ‰€ä»¥æ¯å¤©æ—©ä¸Šéƒ½éœ€è¦å®šæ—¶èµ·æ¥ï¼Œç¬‘æ‹‰äº†ï¼Œä¸è¿‡æƒ³æƒ³è¿™æ ·å¯ä»¥è§„å¾‹ä¸€ç‚¹ä¹ŸæŒºä¸é”™çš„ã€‚</p>
<p>ç”±äºä¸èƒ½å‡ºæ ¡é—¨ï¼Œåˆæƒ³åƒæ°´æœï¼Œæ‰€ä»¥åªèƒ½ç‚¹å¤–å–ï¼Œæ¯æ¬¡éƒ½è¦ç‚¹æ»¡30å…ƒï¼Œå› ä¸ºä¸‰åèµ·é€â€¦ğŸ˜‚</p>
<p>å­¦æ ¡çš„èœè¿‡äºéš¾åƒï¼Œå°±å’Œæˆ‘çš„æ–°çš„å®¤å‹ä»¬ä¸€èµ·ä¹°äº†ç»å‘³é¸­è„–ï¼Œå‘³é“é’ˆä¸é”™ï¼Œåƒäº†å¥½å¤šé¥­å“ˆå“ˆå“ˆå“ˆï¼ˆå­¦æ ¡çš„èœä»€ä¹ˆæ—¶å€™èƒ½å˜ä¸€å˜ğŸ˜­ï¼‰</p>
<h2 id="å…³äºåˆç¡ğŸ’¤"><a href="#å…³äºåˆç¡ğŸ’¤" class="headerlink" title="å…³äºåˆç¡ğŸ’¤"></a>å…³äºåˆç¡ğŸ’¤</h2><p>æˆ‘è§‰å¾—åˆç¡ç°åœ¨å¯¹æˆ‘æ¥è¯´çœŸçš„éå¸¸é‡è¦ï¼Œç°åœ¨ç²¾åŠ›æ„Ÿè§‰å°‘äº†å¥½å¤šï¼Œç¡äº†åˆè§‰æ„Ÿè§‰ä¸‹åˆç²¾ç¥ä¼šå¥½å¾ˆå¤šï¼Œå°±æ˜¯æœ‰æ—¶å€™ç¡ä¸ç€æœ‰ç‚¹éš¾å—ã€‚è¿˜å¥½å­¦æ ¡æ¯”è¾ƒå°ï¼Œå¯å®¤ç¦»å®éªŒå®¤ä¸æ˜¯å¾ˆè¿œï¼Œæ¯å¤©ä¸­åˆéƒ½å¯ä»¥ç¡åˆè§‰ï¼Œè¿˜æŒºå¥½çš„ã€‚</p>
<h2 id="æ ¡å›­è¿åŠ¨ğŸƒâ€"><a href="#æ ¡å›­è¿åŠ¨ğŸƒâ€" class="headerlink" title="æ ¡å›­è¿åŠ¨ğŸƒâ€"></a>æ ¡å›­è¿åŠ¨ğŸƒâ€</h2><p>æœ‹å‹ä»¬ä¸€å®šä¸è¦ä¹…åï¼Œæ¯å¤©ä¹…åå¯¼è‡´è…°éƒ¨é…¸ç—›ï¼Œæ‰€ä»¥æ¯å¤©ä¸€å®šè¦è¿åŠ¨ä¸‹ï¼Œå¾ˆä¼¤å¿ƒæˆ‘ä»¬å®éªŒå®¤çš„å¸ˆå…„éƒ½ä¸æ‰“çƒğŸ€ï¼Œä¹Ÿä¸å–œæ¬¢è¿åŠ¨ï¼Œè¿˜å¥½æˆ‘åŒä¸€å±Šçš„åŒå­¦ä¼šè¿åŠ¨ä¸‹ï¼Œæœ‰æ—¶å€™è·‘æ­¥ï¼Œæœ‰æ—¶å€™ç¯®çƒï¼Œæœ‰æ—¶å€™ä¼šå«ä¸Šå¸ˆå…„æ‰“ç¾½æ¯›çƒğŸ¤¦â€ï¼ˆæ²¡é”™å¿…é¡»æˆ‘å«å¸ˆå…„æ‰ä¼šå»ï¼‰</p>
<p>çƒ­çŸ¥è¯†ï¼šæˆ‘å¸ˆå…„æ˜¯æˆ‘æ±Ÿè¥¿è€è¡¨~</p>
<h2 id="å­¦ç”Ÿç¥¨ğŸ‘¨â€ğŸ“"><a href="#å­¦ç”Ÿç¥¨ğŸ‘¨â€ğŸ“" class="headerlink" title="å­¦ç”Ÿç¥¨ğŸ‘¨â€ğŸ“"></a>å­¦ç”Ÿç¥¨ğŸ‘¨â€ğŸ“</h2><p>çªç„¶å‘ç°ç°åœ¨å»æ™¯åŒºå·²ç»æ²¡æœ‰å­¦ç”Ÿç¥¨äº†ï¼æˆ‘ä»¥ä¸ºç ”ç©¶ç”Ÿè¿˜å¯ä»¥ç®—å­¦ç”Ÿç¥¨ï¼Œå¥½æƒ³å“­ï¼ŒåŠä»·å•Šï¼å¥½åƒåªæœ‰ä¹°ç«è½¦ç¥¨æ‰æœ‰å­¦ç”Ÿç¥¨äº†â€¦å‘œå‘œå‘œã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://ncepuee.github.io/2021/08/08/20210808/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="èœèœçš„é»„">
      <meta itemprop="description" content="è®°å½•ç§‘ç ”ç”Ÿæ´»">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="School boy">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/08/20210808/" class="post-title-link" itemprop="url">é‡æ–°å‡ºå‘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-08 08:00:00" itemprop="dateCreated datePublished" datetime="2021-08-08T08:00:00+08:00">2021-08-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>2021å¹´8æœˆ8æ—¥</p>
<iframe frameborder="0" height="80" style="width:100%;max-width:1080px;overflow:hidden;background:transparent;" src="//music.163.com/outchain/player?type=2&id=454698657&auto=0&height=66"></iframe>

<p>æœ€è¿‘å¥½åƒåšäº†å¾ˆå¤šäº‹æƒ…ï¼Œåˆå¥½åƒä»€ä¹ˆéƒ½æ²¡æœ‰åšğŸ¤¦â€ï¼Œçªç„¶å‘ç°å¥½ä¹…æ²¡å¼„åšå®¢äº†ï¼Œæƒ³ç€å°±æ¯å‘¨æ›´æ–°ä¸€ç¯‡è‡ªå·±çš„å­¦ä¹ ç”Ÿæ´»å§ã€‚</p>
<p>çŸ¥ä¹å…³æ³¨æˆ‘çš„äººæœ‰ç‚¹å¤šï¼Œéƒ½ä¸æƒ³å‘å•¥äº†ï¼Œè¿˜æ˜¯è¦ç»™è‡ªå·±ç•™ä¸ªâ€œç§å¯†ç©ºé—´â€å“ˆå“ˆå“ˆå“ˆï¼Œè¿™ä¸ªåšå®¢ä¸»è¦æ˜¯æƒ³è¦æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥åŠä¸€äº›ç”Ÿæ´»å•¥çš„ï¼Œæœ€è¿‘éƒ½æ²¡æ€ä¹ˆçœ‹å¾®ä¿¡äº†ï¼Œæ¯å¤©éƒ½æ˜¯çœ‹ç”µè„‘ï¼Œæœ‰ç©ºå°±ç ç å­—å˜»å˜»ï¼Œå°±è¿™æ ·å§ï¼å¸Œæœ›æ¥ä¸‹æ¥èƒ½ä¸“æ³¨ç§‘ç ”ï¼Œä¸å¼€å¿ƒå°±åœ¨åšå®¢ä¸Šç ç å­—ï¼ŒæŠ±æ€¨ä¸‹å˜¿å˜¿ğŸ¤­</p>
<p>çœ‹åˆ°åŒå­¦åˆ†äº«çš„è¿™ä¸ªè§†é¢‘è§‰å¾—è¿˜ä¸é”™â†“â†“</p>
<iframe src="//player.bilibili.com/player.html?bvid=BV1a64y1W76X&cid=380546070&page=1" scrolling="no" border="0" frameborder="no" framespacing="0"></iframe>

<p>æºœäº†æºœäº†ï¼Œæå­¦ä¹ å»äº†ï¼Œéƒ½åŠ æ²¹å•Šï¼</p>
<blockquote>
<p>å¦‚æœè®©æˆ‘å¿…é¡»åœ¨é‚£ç§ç”±è€å¸ˆç®¡ç€ã€é€‰å¤Ÿå­¦åˆ†å°±èƒ½æ¯•ä¸šçš„å¤§å­¦å’Œé‚£ç§æ²¡æœ‰æ•™æˆã€è€ƒè¯•ï¼Œè®©å¹´è½»äººåœ¨ä¸€èµ·å…±åŒç”Ÿæ´»ã€äº’ç›¸å­¦ä¹ ä¸‰å››å¹´çš„å¤§å­¦ä¸­é€‰æ‹©ä¸€ç§ï¼Œæˆ‘å°†æ¯«ä¸çŠ¹è±«åœ°é€‰æ‹©åè€…â€¦â€¦ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘æ˜¯è¿™æ ·æƒ³çš„ï¼šå½“è®¸å¤šèªæ˜ã€æ±‚çŸ¥æ¬²å¼ºã€å¯Œæœ‰åŒæƒ…å¿ƒè€Œåˆç›®å…‰æ•é”çš„å¹´è½»äººèšåˆ°ä¸€èµ·ï¼Œå³ä½¿æ²¡æœ‰äººæ•™ï¼Œä»–ä»¬ä¹Ÿèƒ½äº’ç›¸å­¦ä¹ ã€‚ä»–ä»¬äº’ç›¸äº¤æµï¼Œäº†è§£åˆ°æ–°çš„æ€æƒ³å’Œçœ‹æ³•ï¼Œçœ‹åˆ°æ–°é²œäº‹ç‰©å¹¶ä¸”æŒæ¡ç‹¬åˆ°çš„è¡Œä¸ºåˆ¤æ–­åŠ›ã€‚â€”â€”è‹±å›½æ•™è‚²å®¶ã€ç‰›æ´¥ä¸»æ•™çº¦ç¿°Â·çº½æ›¼</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">èœèœçš„é»„</span>
</div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-601e7b328682665a" async="async"></script>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  




  





</body>
</html>
